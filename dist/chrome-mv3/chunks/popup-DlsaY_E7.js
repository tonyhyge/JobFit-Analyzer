function zS(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();try{}catch(n){console.error("[wxt] Failed to initialize plugins",n)}function zh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Vf={exports:{}},$a={},bf={exports:{}},xe={};var Xg;function $S(){if(Xg)return xe;Xg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.iterator;function I(G){return G===null||typeof G!="object"?null:(G=_&&G[_]||G["@@iterator"],typeof G=="function"?G:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,b={};function N(G,Z,Ae){this.props=G,this.context=Z,this.refs=b,this.updater=Ae||C}N.prototype.isReactComponent={},N.prototype.setState=function(G,Z){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,Z,"setState")},N.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function B(){}B.prototype=N.prototype;function K(G,Z,Ae){this.props=G,this.context=Z,this.refs=b,this.updater=Ae||C}var Y=K.prototype=new B;Y.constructor=K,D(Y,N.prototype),Y.isPureReactComponent=!0;var Q=Array.isArray,le=Object.prototype.hasOwnProperty,J={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function R(G,Z,Ae){var Re,Me={},De=null,$e=null;if(Z!=null)for(Re in Z.ref!==void 0&&($e=Z.ref),Z.key!==void 0&&(De=""+Z.key),Z)le.call(Z,Re)&&!M.hasOwnProperty(Re)&&(Me[Re]=Z[Re]);var Ue=arguments.length-2;if(Ue===1)Me.children=Ae;else if(1<Ue){for(var Ke=Array(Ue),Jt=0;Jt<Ue;Jt++)Ke[Jt]=arguments[Jt+2];Me.children=Ke}if(G&&G.defaultProps)for(Re in Ue=G.defaultProps,Ue)Me[Re]===void 0&&(Me[Re]=Ue[Re]);return{$$typeof:n,type:G,key:De,ref:$e,props:Me,_owner:J.current}}function P(G,Z){return{$$typeof:n,type:G.type,key:Z,ref:G.ref,props:G.props,_owner:G._owner}}function L(G){return typeof G=="object"&&G!==null&&G.$$typeof===n}function V(G){var Z={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(Ae){return Z[Ae]})}var F=/\/+/g;function k(G,Z){return typeof G=="object"&&G!==null&&G.key!=null?V(""+G.key):Z.toString(36)}function Te(G,Z,Ae,Re,Me){var De=typeof G;(De==="undefined"||De==="boolean")&&(G=null);var $e=!1;if(G===null)$e=!0;else switch(De){case"string":case"number":$e=!0;break;case"object":switch(G.$$typeof){case n:case e:$e=!0}}if($e)return $e=G,Me=Me($e),G=Re===""?"."+k($e,0):Re,Q(Me)?(Ae="",G!=null&&(Ae=G.replace(F,"$&/")+"/"),Te(Me,Z,Ae,"",function(Jt){return Jt})):Me!=null&&(L(Me)&&(Me=P(Me,Ae+(!Me.key||$e&&$e.key===Me.key?"":(""+Me.key).replace(F,"$&/")+"/")+G)),Z.push(Me)),1;if($e=0,Re=Re===""?".":Re+":",Q(G))for(var Ue=0;Ue<G.length;Ue++){De=G[Ue];var Ke=Re+k(De,Ue);$e+=Te(De,Z,Ae,Ke,Me)}else if(Ke=I(G),typeof Ke=="function")for(G=Ke.call(G),Ue=0;!(De=G.next()).done;)De=De.value,Ke=Re+k(De,Ue++),$e+=Te(De,Z,Ae,Ke,Me);else if(De==="object")throw Z=String(G),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return $e}function qe(G,Z,Ae){if(G==null)return G;var Re=[],Me=0;return Te(G,Re,"","",function(De){return Z.call(Ae,De,Me++)}),Re}function Oe(G){if(G._status===-1){var Z=G._result;Z=Z(),Z.then(function(Ae){(G._status===0||G._status===-1)&&(G._status=1,G._result=Ae)},function(Ae){(G._status===0||G._status===-1)&&(G._status=2,G._result=Ae)}),G._status===-1&&(G._status=0,G._result=Z)}if(G._status===1)return G._result.default;throw G._result}var ze={current:null},re={transition:null},he={ReactCurrentDispatcher:ze,ReactCurrentBatchConfig:re,ReactCurrentOwner:J};function ce(){throw Error("act(...) is not supported in production builds of React.")}return xe.Children={map:qe,forEach:function(G,Z,Ae){qe(G,function(){Z.apply(this,arguments)},Ae)},count:function(G){var Z=0;return qe(G,function(){Z++}),Z},toArray:function(G){return qe(G,function(Z){return Z})||[]},only:function(G){if(!L(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},xe.Component=N,xe.Fragment=t,xe.Profiler=i,xe.PureComponent=K,xe.StrictMode=r,xe.Suspense=m,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=he,xe.act=ce,xe.cloneElement=function(G,Z,Ae){if(G==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+G+".");var Re=D({},G.props),Me=G.key,De=G.ref,$e=G._owner;if(Z!=null){if(Z.ref!==void 0&&(De=Z.ref,$e=J.current),Z.key!==void 0&&(Me=""+Z.key),G.type&&G.type.defaultProps)var Ue=G.type.defaultProps;for(Ke in Z)le.call(Z,Ke)&&!M.hasOwnProperty(Ke)&&(Re[Ke]=Z[Ke]===void 0&&Ue!==void 0?Ue[Ke]:Z[Ke])}var Ke=arguments.length-2;if(Ke===1)Re.children=Ae;else if(1<Ke){Ue=Array(Ke);for(var Jt=0;Jt<Ke;Jt++)Ue[Jt]=arguments[Jt+2];Re.children=Ue}return{$$typeof:n,type:G.type,key:Me,ref:De,props:Re,_owner:$e}},xe.createContext=function(G){return G={$$typeof:l,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},G.Provider={$$typeof:a,_context:G},G.Consumer=G},xe.createElement=R,xe.createFactory=function(G){var Z=R.bind(null,G);return Z.type=G,Z},xe.createRef=function(){return{current:null}},xe.forwardRef=function(G){return{$$typeof:d,render:G}},xe.isValidElement=L,xe.lazy=function(G){return{$$typeof:y,_payload:{_status:-1,_result:G},_init:Oe}},xe.memo=function(G,Z){return{$$typeof:p,type:G,compare:Z===void 0?null:Z}},xe.startTransition=function(G){var Z=re.transition;re.transition={};try{G()}finally{re.transition=Z}},xe.unstable_act=ce,xe.useCallback=function(G,Z){return ze.current.useCallback(G,Z)},xe.useContext=function(G){return ze.current.useContext(G)},xe.useDebugValue=function(){},xe.useDeferredValue=function(G){return ze.current.useDeferredValue(G)},xe.useEffect=function(G,Z){return ze.current.useEffect(G,Z)},xe.useId=function(){return ze.current.useId()},xe.useImperativeHandle=function(G,Z,Ae){return ze.current.useImperativeHandle(G,Z,Ae)},xe.useInsertionEffect=function(G,Z){return ze.current.useInsertionEffect(G,Z)},xe.useLayoutEffect=function(G,Z){return ze.current.useLayoutEffect(G,Z)},xe.useMemo=function(G,Z){return ze.current.useMemo(G,Z)},xe.useReducer=function(G,Z,Ae){return ze.current.useReducer(G,Z,Ae)},xe.useRef=function(G){return ze.current.useRef(G)},xe.useState=function(G){return ze.current.useState(G)},xe.useSyncExternalStore=function(G,Z,Ae){return ze.current.useSyncExternalStore(G,Z,Ae)},xe.useTransition=function(){return ze.current.useTransition()},xe.version="18.3.1",xe}var Zg;function $h(){return Zg||(Zg=1,bf.exports=$S()),bf.exports}var jg;function WS(){if(jg)return $a;jg=1;var n=$h(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(d,m,p){var y,_={},I=null,C=null;p!==void 0&&(I=""+p),m.key!==void 0&&(I=""+m.key),m.ref!==void 0&&(C=m.ref);for(y in m)r.call(m,y)&&!a.hasOwnProperty(y)&&(_[y]=m[y]);if(d&&d.defaultProps)for(y in m=d.defaultProps,m)_[y]===void 0&&(_[y]=m[y]);return{$$typeof:e,type:d,key:I,ref:C,props:_,_owner:i.current}}return $a.Fragment=t,$a.jsx=l,$a.jsxs=l,$a}var ey;function JS(){return ey||(ey=1,Vf.exports=WS()),Vf.exports}var ae=JS(),oe=$h();const br=zh(oe),lE=zS({__proto__:null,default:br},[oe]);var $u={},Uf={exports:{}},rn={},Ff={exports:{}},Of={};var ty;function KS(){return ty||(ty=1,(function(n){function e(re,he){var ce=re.length;re.push(he);e:for(;0<ce;){var G=ce-1>>>1,Z=re[G];if(0<i(Z,he))re[G]=he,re[ce]=Z,ce=G;else break e}}function t(re){return re.length===0?null:re[0]}function r(re){if(re.length===0)return null;var he=re[0],ce=re.pop();if(ce!==he){re[0]=ce;e:for(var G=0,Z=re.length,Ae=Z>>>1;G<Ae;){var Re=2*(G+1)-1,Me=re[Re],De=Re+1,$e=re[De];if(0>i(Me,ce))De<Z&&0>i($e,Me)?(re[G]=$e,re[De]=ce,G=De):(re[G]=Me,re[Re]=ce,G=Re);else if(De<Z&&0>i($e,ce))re[G]=$e,re[De]=ce,G=De;else break e}}return he}function i(re,he){var ce=re.sortIndex-he.sortIndex;return ce!==0?ce:re.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();n.unstable_now=function(){return l.now()-d}}var m=[],p=[],y=1,_=null,I=3,C=!1,D=!1,b=!1,N=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(re){for(var he=t(p);he!==null;){if(he.callback===null)r(p);else if(he.startTime<=re)r(p),he.sortIndex=he.expirationTime,e(m,he);else break;he=t(p)}}function Q(re){if(b=!1,Y(re),!D)if(t(m)!==null)D=!0,Oe(le);else{var he=t(p);he!==null&&ze(Q,he.startTime-re)}}function le(re,he){D=!1,b&&(b=!1,B(R),R=-1),C=!0;var ce=I;try{for(Y(he),_=t(m);_!==null&&(!(_.expirationTime>he)||re&&!V());){var G=_.callback;if(typeof G=="function"){_.callback=null,I=_.priorityLevel;var Z=G(_.expirationTime<=he);he=n.unstable_now(),typeof Z=="function"?_.callback=Z:_===t(m)&&r(m),Y(he)}else r(m);_=t(m)}if(_!==null)var Ae=!0;else{var Re=t(p);Re!==null&&ze(Q,Re.startTime-he),Ae=!1}return Ae}finally{_=null,I=ce,C=!1}}var J=!1,M=null,R=-1,P=5,L=-1;function V(){return!(n.unstable_now()-L<P)}function F(){if(M!==null){var re=n.unstable_now();L=re;var he=!0;try{he=M(!0,re)}finally{he?k():(J=!1,M=null)}}else J=!1}var k;if(typeof K=="function")k=function(){K(F)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,qe=Te.port2;Te.port1.onmessage=F,k=function(){qe.postMessage(null)}}else k=function(){N(F,0)};function Oe(re){M=re,J||(J=!0,k())}function ze(re,he){R=N(function(){re(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(re){re.callback=null},n.unstable_continueExecution=function(){D||C||(D=!0,Oe(le))},n.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<re?Math.floor(1e3/re):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(re){switch(I){case 1:case 2:case 3:var he=3;break;default:he=I}var ce=I;I=he;try{return re()}finally{I=ce}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(re,he){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ce=I;I=re;try{return he()}finally{I=ce}},n.unstable_scheduleCallback=function(re,he,ce){var G=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?G+ce:G):ce=G,re){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ce+Z,re={id:y++,callback:he,priorityLevel:re,startTime:ce,expirationTime:Z,sortIndex:-1},ce>G?(re.sortIndex=ce,e(p,re),t(m)===null&&re===t(p)&&(b?(B(R),R=-1):b=!0,ze(Q,ce-G))):(re.sortIndex=Z,e(m,re),D||C||(D=!0,Oe(le))),re},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(re){var he=I;return function(){var ce=I;I=he;try{return re.apply(this,arguments)}finally{I=ce}}}})(Of)),Of}var ny;function YS(){return ny||(ny=1,Ff.exports=KS()),Ff.exports}var ry;function QS(){if(ry)return rn;ry=1;var n=$h(),e=YS();function t(o){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+o,u=1;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(o,s){l(o,s),l(o+"Capture",s)}function l(o,s){for(i[o]=s,o=0;o<s.length;o++)r.add(s[o])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},_={};function I(o){return m.call(_,o)?!0:m.call(y,o)?!1:p.test(o)?_[o]=!0:(y[o]=!0,!1)}function C(o,s,u,g){if(u!==null&&u.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return g?!1:u!==null?!u.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function D(o,s,u,g){if(s===null||typeof s>"u"||C(o,s,u,g))return!0;if(g)return!1;if(u!==null)switch(u.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function b(o,s,u,g,v,E,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=g,this.attributeNamespace=v,this.mustUseProperty=u,this.propertyName=o,this.type=s,this.sanitizeURL=E,this.removeEmptyString=w}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){N[o]=new b(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var s=o[0];N[s]=new b(s,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){N[o]=new b(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){N[o]=new b(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){N[o]=new b(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){N[o]=new b(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){N[o]=new b(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){N[o]=new b(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){N[o]=new b(o,5,!1,o.toLowerCase(),null,!1,!1)});var B=/[\-:]([a-z])/g;function K(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var s=o.replace(B,K);N[s]=new b(s,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var s=o.replace(B,K);N[s]=new b(s,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var s=o.replace(B,K);N[s]=new b(s,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){N[o]=new b(o,1,!1,o.toLowerCase(),null,!1,!1)}),N.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){N[o]=new b(o,1,!1,o.toLowerCase(),null,!0,!0)});function Y(o,s,u,g){var v=N.hasOwnProperty(s)?N[s]:null;(v!==null?v.type!==0:g||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(D(s,u,v,g)&&(u=null),g||v===null?I(s)&&(u===null?o.removeAttribute(s):o.setAttribute(s,""+u)):v.mustUseProperty?o[v.propertyName]=u===null?v.type===3?!1:"":u:(s=v.attributeName,g=v.attributeNamespace,u===null?o.removeAttribute(s):(v=v.type,u=v===3||v===4&&u===!0?"":""+u,g?o.setAttributeNS(g,s,u):o.setAttribute(s,u))))}var Q=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,le=Symbol.for("react.element"),J=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),V=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),qe=Symbol.for("react.memo"),Oe=Symbol.for("react.lazy"),ze=Symbol.for("react.offscreen"),re=Symbol.iterator;function he(o){return o===null||typeof o!="object"?null:(o=re&&o[re]||o["@@iterator"],typeof o=="function"?o:null)}var ce=Object.assign,G;function Z(o){if(G===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);G=s&&s[1]||""}return`
`+G+o}var Ae=!1;function Re(o,s){if(!o||Ae)return"";Ae=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var g=$}Reflect.construct(o,[],s)}else{try{s.call()}catch($){g=$}o.call(s.prototype)}else{try{throw Error()}catch($){g=$}o()}}catch($){if($&&g&&typeof $.stack=="string"){for(var v=$.stack.split(`
`),E=g.stack.split(`
`),w=v.length-1,x=E.length-1;1<=w&&0<=x&&v[w]!==E[x];)x--;for(;1<=w&&0<=x;w--,x--)if(v[w]!==E[x]){if(w!==1||x!==1)do if(w--,x--,0>x||v[w]!==E[x]){var U=`
`+v[w].replace(" at new "," at ");return o.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",o.displayName)),U}while(1<=w&&0<=x);break}}}finally{Ae=!1,Error.prepareStackTrace=u}return(o=o?o.displayName||o.name:"")?Z(o):""}function Me(o){switch(o.tag){case 5:return Z(o.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return o=Re(o.type,!1),o;case 11:return o=Re(o.type.render,!1),o;case 1:return o=Re(o.type,!0),o;default:return""}}function De(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case M:return"Fragment";case J:return"Portal";case P:return"Profiler";case R:return"StrictMode";case k:return"Suspense";case Te:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case V:return(o.displayName||"Context")+".Consumer";case L:return(o._context.displayName||"Context")+".Provider";case F:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case qe:return s=o.displayName||null,s!==null?s:De(o.type)||"Memo";case Oe:s=o._payload,o=o._init;try{return De(o(s))}catch{}}return null}function $e(o){var s=o.type;switch(o.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=s.render,o=o.displayName||o.name||"",s.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(s);case 8:return s===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ue(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ke(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Jt(o){var s=Ke(o)?"checked":"value",u=Object.getOwnPropertyDescriptor(o.constructor.prototype,s),g=""+o[s];if(!o.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,E=u.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return v.call(this)},set:function(w){g=""+w,E.call(this,w)}}),Object.defineProperty(o,s,{enumerable:u.enumerable}),{getValue:function(){return g},setValue:function(w){g=""+w},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function Mo(o){o._valueTracker||(o._valueTracker=Jt(o))}function Xs(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var u=s.getValue(),g="";return o&&(g=Ke(o)?o.checked?"true":"false":o.value),o=g,o!==u?(s.setValue(o),!0):!1}function Qr(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Do(o,s){var u=s.checked;return ce({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??o._wrapperState.initialChecked})}function kl(o,s){var u=s.defaultValue==null?"":s.defaultValue,g=s.checked!=null?s.checked:s.defaultChecked;u=Ue(s.value!=null?s.value:u),o._wrapperState={initialChecked:g,initialValue:u,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Lo(o,s){s=s.checked,s!=null&&Y(o,"checked",s,!1)}function Bi(o,s){Lo(o,s);var u=Ue(s.value),g=s.type;if(u!=null)g==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+u):o.value!==""+u&&(o.value=""+u);else if(g==="submit"||g==="reset"){o.removeAttribute("value");return}s.hasOwnProperty("value")?pt(o,s.type,u):s.hasOwnProperty("defaultValue")&&pt(o,s.type,Ue(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(o.defaultChecked=!!s.defaultChecked)}function Zs(o,s,u){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var g=s.type;if(!(g!=="submit"&&g!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+o._wrapperState.initialValue,u||s===o.value||(o.value=s),o.defaultValue=s}u=o.name,u!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,u!==""&&(o.name=u)}function pt(o,s,u){(s!=="number"||Qr(o.ownerDocument)!==o)&&(u==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+u&&(o.defaultValue=""+u))}var dt=Array.isArray;function Rn(o,s,u,g){if(o=o.options,s){s={};for(var v=0;v<u.length;v++)s["$"+u[v]]=!0;for(u=0;u<o.length;u++)v=s.hasOwnProperty("$"+o[u].value),o[u].selected!==v&&(o[u].selected=v),v&&g&&(o[u].defaultSelected=!0)}else{for(u=""+Ue(u),s=null,v=0;v<o.length;v++){if(o[v].value===u){o[v].selected=!0,g&&(o[v].defaultSelected=!0);return}s!==null||o[v].disabled||(s=o[v])}s!==null&&(s.selected=!0)}}function js(o,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},s,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function ea(o,s){var u=s.value;if(u==null){if(u=s.children,s=s.defaultValue,u!=null){if(s!=null)throw Error(t(92));if(dt(u)){if(1<u.length)throw Error(t(93));u=u[0]}s=u}s==null&&(s=""),u=s}o._wrapperState={initialValue:Ue(u)}}function xl(o,s){var u=Ue(s.value),g=Ue(s.defaultValue);u!=null&&(u=""+u,u!==o.value&&(o.value=u),s.defaultValue==null&&o.defaultValue!==u&&(o.defaultValue=u)),g!=null&&(o.defaultValue=""+g)}function Xr(o){var s=o.textContent;s===o._wrapperState.initialValue&&s!==""&&s!==null&&(o.value=s)}function ta(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vo(o,s){return o==null||o==="http://www.w3.org/1999/xhtml"?ta(s):o==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Zr,Ml=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,u,g,v){MSApp.execUnsafeLocalFunction(function(){return o(s,u,g,v)})}:o})(function(o,s){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=s;else{for(Zr=Zr||document.createElement("div"),Zr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Zr.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;s.firstChild;)o.appendChild(s.firstChild)}});function Hi(o,s){if(s){var u=o.firstChild;if(u&&u===o.lastChild&&u.nodeType===3){u.nodeValue=s;return}}o.textContent=s}var jr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dl=["Webkit","ms","Moz","O"];Object.keys(jr).forEach(function(o){Dl.forEach(function(s){s=s+o.charAt(0).toUpperCase()+o.substring(1),jr[s]=jr[o]})});function ei(o,s,u){return s==null||typeof s=="boolean"||s===""?"":u||typeof s!="number"||s===0||jr.hasOwnProperty(o)&&jr[o]?(""+s).trim():s+"px"}function bo(o,s){o=o.style;for(var u in s)if(s.hasOwnProperty(u)){var g=u.indexOf("--")===0,v=ei(u,s[u],g);u==="float"&&(u="cssFloat"),g?o.setProperty(u,v):o[u]=v}}var na=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pn(o,s){if(s){if(na[o]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Uo(o,s){if(o.indexOf("-")===-1)return typeof s.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ti=null;function Fo(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var yr=null,vr=null,lt=null;function ra(o){if(o=ka(o)){if(typeof yr!="function")throw Error(t(280));var s=o.stateNode;s&&(s=su(s),yr(o.stateNode,o.type,s))}}function ni(o){vr?lt?lt.push(o):lt=[o]:vr=o}function ri(){if(vr){var o=vr,s=lt;if(lt=vr=null,ra(o),s)for(o=0;o<s.length;o++)ra(s[o])}}function Ll(o,s){return o(s)}function Vl(){}var Jn=!1;function bl(o,s,u){if(Jn)return o(s,u);Jn=!0;try{return Ll(o,s,u)}finally{Jn=!1,(vr!==null||lt!==null)&&(Vl(),ri())}}function qi(o,s){var u=o.stateNode;if(u===null)return null;var g=su(u);if(g===null)return null;u=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(u&&typeof u!="function")throw Error(t(231,s,typeof u));return u}var ii=!1;if(d)try{var oi={};Object.defineProperty(oi,"passive",{get:function(){ii=!0}}),window.addEventListener("test",oi,oi),window.removeEventListener("test",oi,oi)}catch{ii=!1}function Ul(o,s,u,g,v,E,w,x,U){var $=Array.prototype.slice.call(arguments,3);try{s.apply(u,$)}catch(ee){this.onError(ee)}}var _r=!1,Kn=null,Oo=!1,yn=null,Fl={onError:function(o){_r=!0,Kn=o}};function Ol(o,s,u,g,v,E,w,x,U){_r=!1,Kn=null,Ul.apply(Fl,arguments)}function ia(o,s,u,g,v,E,w,x,U){if(Ol.apply(this,arguments),_r){if(_r){var $=Kn;_r=!1,Kn=null}else throw Error(t(198));Oo||(Oo=!0,yn=$)}}function Nn(o){var s=o,u=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,(s.flags&4098)!==0&&(u=s.return),o=s.return;while(o)}return s.tag===3?u:null}function oa(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function Gl(o){if(Nn(o)!==o)throw Error(t(188))}function Bl(o){var s=o.alternate;if(!s){if(s=Nn(o),s===null)throw Error(t(188));return s!==o?null:o}for(var u=o,g=s;;){var v=u.return;if(v===null)break;var E=v.alternate;if(E===null){if(g=v.return,g!==null){u=g;continue}break}if(v.child===E.child){for(E=v.child;E;){if(E===u)return Gl(v),o;if(E===g)return Gl(v),s;E=E.sibling}throw Error(t(188))}if(u.return!==g.return)u=v,g=E;else{for(var w=!1,x=v.child;x;){if(x===u){w=!0,u=v,g=E;break}if(x===g){w=!0,g=v,u=E;break}x=x.sibling}if(!w){for(x=E.child;x;){if(x===u){w=!0,u=E,g=v;break}if(x===g){w=!0,g=E,u=v;break}x=x.sibling}if(!w)throw Error(t(189))}}if(u.alternate!==g)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?o:s}function Hl(o){return o=Bl(o),o!==null?zi(o):null}function zi(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var s=zi(o);if(s!==null)return s;o=o.sibling}return null}var sa=e.unstable_scheduleCallback,Go=e.unstable_cancelCallback,$i=e.unstable_shouldYield,Er=e.unstable_requestPaint,Ze=e.unstable_now,dd=e.unstable_getCurrentPriorityLevel,Bo=e.unstable_ImmediatePriority,aa=e.unstable_UserBlockingPriority,Wi=e.unstable_NormalPriority,la=e.unstable_LowPriority,Ho=e.unstable_IdlePriority,Ji=null,an=null;function ql(o){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Ji,o,void 0,(o.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:Ki,Yn=Math.log,vn=Math.LN2;function Ki(o){return o>>>=0,o===0?32:31-(Yn(o)/vn|0)|0}var Qn=64,si=4194304;function He(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Tr(o,s){var u=o.pendingLanes;if(u===0)return 0;var g=0,v=o.suspendedLanes,E=o.pingedLanes,w=u&268435455;if(w!==0){var x=w&~v;x!==0?g=He(x):(E&=w,E!==0&&(g=He(E)))}else w=u&~v,w!==0?g=He(w):E!==0&&(g=He(E));if(g===0)return 0;if(s!==0&&s!==g&&(s&v)===0&&(v=g&-g,E=s&-s,v>=E||v===16&&(E&4194240)!==0))return s;if((g&4)!==0&&(g|=u&16),s=o.entangledLanes,s!==0)for(o=o.entanglements,s&=g;0<s;)u=31-ln(s),v=1<<u,g|=o[u],s&=~v;return g}function Yi(o,s){switch(o){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qi(o,s){for(var u=o.suspendedLanes,g=o.pingedLanes,v=o.expirationTimes,E=o.pendingLanes;0<E;){var w=31-ln(E),x=1<<w,U=v[w];U===-1?((x&u)===0||(x&g)!==0)&&(v[w]=Yi(x,s)):U<=s&&(o.expiredLanes|=x),E&=~x}}function ua(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function ca(){var o=Qn;return Qn<<=1,(Qn&4194240)===0&&(Qn=64),o}function da(o){for(var s=[],u=0;31>u;u++)s.push(o);return s}function Xi(o,s,u){o.pendingLanes|=s,s!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,s=31-ln(s),o[s]=u}function fd(o,s){var u=o.pendingLanes&~s;o.pendingLanes=s,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=s,o.mutableReadLanes&=s,o.entangledLanes&=s,s=o.entanglements;var g=o.eventTimes;for(o=o.expirationTimes;0<u;){var v=31-ln(u),E=1<<v;s[v]=0,g[v]=-1,o[v]=-1,u&=~E}}function fa(o,s){var u=o.entangledLanes|=s;for(o=o.entanglements;u;){var g=31-ln(u),v=1<<g;v&s|o[g]&s&&(o[g]|=s),u&=~v}}var Ve=0;function Xn(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var ha,qo,pa,ma,ga,Zn=!1,zo=[],jn=null,er=null,Nt=null,Zi=new Map,Ir=new Map,un=[],zl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ai(o,s){switch(o){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Zi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ir.delete(s.pointerId)}}function kn(o,s,u,g,v,E){return o===null||o.nativeEvent!==E?(o={blockedOn:s,domEventName:u,eventSystemFlags:g,nativeEvent:E,targetContainers:[v]},s!==null&&(s=ka(s),s!==null&&qo(s)),o):(o.eventSystemFlags|=g,s=o.targetContainers,v!==null&&s.indexOf(v)===-1&&s.push(v),o)}function $l(o,s,u,g,v){switch(s){case"focusin":return jn=kn(jn,o,s,u,g,v),!0;case"dragenter":return er=kn(er,o,s,u,g,v),!0;case"mouseover":return Nt=kn(Nt,o,s,u,g,v),!0;case"pointerover":var E=v.pointerId;return Zi.set(E,kn(Zi.get(E)||null,o,s,u,g,v)),!0;case"gotpointercapture":return E=v.pointerId,Ir.set(E,kn(Ir.get(E)||null,o,s,u,g,v)),!0}return!1}function $o(o){var s=no(o.target);if(s!==null){var u=Nn(s);if(u!==null){if(s=u.tag,s===13){if(s=oa(u),s!==null){o.blockedOn=s,ga(o.priority,function(){pa(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){o.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Ye(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var u=Wo(o.domEventName,o.eventSystemFlags,s[0],o.nativeEvent);if(u===null){u=o.nativeEvent;var g=new u.constructor(u.type,u);ti=g,u.target.dispatchEvent(g),ti=null}else return s=ka(u),s!==null&&qo(s),o.blockedOn=u,!1;s.shift()}return!0}function Wl(o,s,u){Ye(o)&&u.delete(s)}function hd(){Zn=!1,jn!==null&&Ye(jn)&&(jn=null),er!==null&&Ye(er)&&(er=null),Nt!==null&&Ye(Nt)&&(Nt=null),Zi.forEach(Wl),Ir.forEach(Wl)}function li(o,s){o.blockedOn===s&&(o.blockedOn=null,Zn||(Zn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hd)))}function ui(o){function s(v){return li(v,o)}if(0<zo.length){li(zo[0],o);for(var u=1;u<zo.length;u++){var g=zo[u];g.blockedOn===o&&(g.blockedOn=null)}}for(jn!==null&&li(jn,o),er!==null&&li(er,o),Nt!==null&&li(Nt,o),Zi.forEach(s),Ir.forEach(s),u=0;u<un.length;u++)g=un[u],g.blockedOn===o&&(g.blockedOn=null);for(;0<un.length&&(u=un[0],u.blockedOn===null);)$o(u),u.blockedOn===null&&un.shift()}var Sr=Q.ReactCurrentBatchConfig,wr=!0;function tr(o,s,u,g){var v=Ve,E=Sr.transition;Sr.transition=null;try{Ve=1,ya(o,s,u,g)}finally{Ve=v,Sr.transition=E}}function Jl(o,s,u,g){var v=Ve,E=Sr.transition;Sr.transition=null;try{Ve=4,ya(o,s,u,g)}finally{Ve=v,Sr.transition=E}}function ya(o,s,u,g){if(wr){var v=Wo(o,s,u,g);if(v===null)wd(o,s,g,nr,u),ai(o,g);else if($l(v,o,s,u,g))g.stopPropagation();else if(ai(o,g),s&4&&-1<zl.indexOf(o)){for(;v!==null;){var E=ka(v);if(E!==null&&ha(E),E=Wo(o,s,u,g),E===null&&wd(o,s,g,nr,u),E===v)break;v=E}v!==null&&g.stopPropagation()}else wd(o,s,g,null,u)}}var nr=null;function Wo(o,s,u,g){if(nr=null,o=Fo(g),o=no(o),o!==null)if(s=Nn(o),s===null)o=null;else if(u=s.tag,u===13){if(o=oa(s),o!==null)return o;o=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null);return nr=o,null}function Jo(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dd()){case Bo:return 1;case aa:return 4;case Wi:case la:return 16;case Ho:return 536870912;default:return 16}default:return 16}}var cn=null,Ko=null,Cr=null;function Kl(){if(Cr)return Cr;var o,s=Ko,u=s.length,g,v="value"in cn?cn.value:cn.textContent,E=v.length;for(o=0;o<u&&s[o]===v[o];o++);var w=u-o;for(g=1;g<=w&&s[u-g]===v[E-g];g++);return Cr=v.slice(o,1<g?1-g:void 0)}function ji(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function rr(){return!0}function va(){return!1}function Ut(o){function s(u,g,v,E,w){this._reactName=u,this._targetInst=v,this.type=g,this.nativeEvent=E,this.target=w,this.currentTarget=null;for(var x in o)o.hasOwnProperty(x)&&(u=o[x],this[x]=u?u(E):E[x]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?rr:va,this.isPropagationStopped=va,this}return ce(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),s}var ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eo=Ut(ir),ci=ce({},ir,{view:0,detail:0}),Yo=Ut(ci),Qo,Xo,dn,to=ce({},ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ce,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==dn&&(dn&&o.type==="mousemove"?(Qo=o.screenX-dn.screenX,Xo=o.screenY-dn.screenY):Xo=Qo=0,dn=o),Qo)},movementY:function(o){return"movementY"in o?o.movementY:Xo}}),_a=Ut(to),Yl=ce({},to,{dataTransfer:0}),Ql=Ut(Yl),Zo=ce({},ci,{relatedTarget:0}),kt=Ut(Zo),Xl=ce({},ir,{animationName:0,elapsedTime:0,pseudoElement:0}),Zl=Ut(Xl),di=ce({},ir,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),h=Ut(di),T=ce({},ir,{data:0}),S=Ut(T),A={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},W={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function se(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=W[o])?!!s[o]:!1}function Ce(){return se}var ft=ce({},ci,{key:function(o){if(o.key){var s=A[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=ji(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?q[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ce,charCode:function(o){return o.type==="keypress"?ji(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?ji(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Je=Ut(ft),mt=ce({},to,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fn=Ut(mt),Ar=ce({},ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ce}),or=Ut(Ar),sr=ce({},ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),jo=Ut(sr),Ea=ce({},to,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),FI=Ut(Ea),OI=[9,13,27,32],pd=d&&"CompositionEvent"in window,Ta=null;d&&"documentMode"in document&&(Ta=document.documentMode);var GI=d&&"TextEvent"in window&&!Ta,qp=d&&(!pd||Ta&&8<Ta&&11>=Ta),zp=" ",$p=!1;function Wp(o,s){switch(o){case"keyup":return OI.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jp(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var es=!1;function BI(o,s){switch(o){case"compositionend":return Jp(s);case"keypress":return s.which!==32?null:($p=!0,zp);case"textInput":return o=s.data,o===zp&&$p?null:o;default:return null}}function HI(o,s){if(es)return o==="compositionend"||!pd&&Wp(o,s)?(o=Kl(),Cr=Ko=cn=null,es=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return qp&&s.locale!=="ko"?null:s.data;default:return null}}var qI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kp(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!qI[o.type]:s==="textarea"}function Yp(o,s,u,g){ni(g),s=ru(s,"onChange"),0<s.length&&(u=new eo("onChange","change",null,u,g),o.push({event:u,listeners:s}))}var Ia=null,Sa=null;function zI(o){hm(o,0)}function jl(o){var s=os(o);if(Xs(s))return o}function $I(o,s){if(o==="change")return s}var Qp=!1;if(d){var md;if(d){var gd="oninput"in document;if(!gd){var Xp=document.createElement("div");Xp.setAttribute("oninput","return;"),gd=typeof Xp.oninput=="function"}md=gd}else md=!1;Qp=md&&(!document.documentMode||9<document.documentMode)}function Zp(){Ia&&(Ia.detachEvent("onpropertychange",jp),Sa=Ia=null)}function jp(o){if(o.propertyName==="value"&&jl(Sa)){var s=[];Yp(s,Sa,o,Fo(o)),bl(zI,s)}}function WI(o,s,u){o==="focusin"?(Zp(),Ia=s,Sa=u,Ia.attachEvent("onpropertychange",jp)):o==="focusout"&&Zp()}function JI(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return jl(Sa)}function KI(o,s){if(o==="click")return jl(s)}function YI(o,s){if(o==="input"||o==="change")return jl(s)}function QI(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var xn=typeof Object.is=="function"?Object.is:QI;function wa(o,s){if(xn(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var u=Object.keys(o),g=Object.keys(s);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var v=u[g];if(!m.call(s,v)||!xn(o[v],s[v]))return!1}return!0}function em(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function tm(o,s){var u=em(o);o=0;for(var g;u;){if(u.nodeType===3){if(g=o+u.textContent.length,o<=s&&g>=s)return{node:u,offset:s-o};o=g}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=em(u)}}function nm(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?nm(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function rm(){for(var o=window,s=Qr();s instanceof o.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)o=s.contentWindow;else break;s=Qr(o.document)}return s}function yd(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}function XI(o){var s=rm(),u=o.focusedElem,g=o.selectionRange;if(s!==u&&u&&u.ownerDocument&&nm(u.ownerDocument.documentElement,u)){if(g!==null&&yd(u)){if(s=g.start,o=g.end,o===void 0&&(o=s),"selectionStart"in u)u.selectionStart=s,u.selectionEnd=Math.min(o,u.value.length);else if(o=(s=u.ownerDocument||document)&&s.defaultView||window,o.getSelection){o=o.getSelection();var v=u.textContent.length,E=Math.min(g.start,v);g=g.end===void 0?E:Math.min(g.end,v),!o.extend&&E>g&&(v=g,g=E,E=v),v=tm(u,E);var w=tm(u,g);v&&w&&(o.rangeCount!==1||o.anchorNode!==v.node||o.anchorOffset!==v.offset||o.focusNode!==w.node||o.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(v.node,v.offset),o.removeAllRanges(),E>g?(o.addRange(s),o.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),o.addRange(s)))}}for(s=[],o=u;o=o.parentNode;)o.nodeType===1&&s.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<s.length;u++)o=s[u],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var ZI=d&&"documentMode"in document&&11>=document.documentMode,ts=null,vd=null,Ca=null,_d=!1;function im(o,s,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;_d||ts==null||ts!==Qr(g)||(g=ts,"selectionStart"in g&&yd(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Ca&&wa(Ca,g)||(Ca=g,g=ru(vd,"onSelect"),0<g.length&&(s=new eo("onSelect","select",null,s,u),o.push({event:s,listeners:g}),s.target=ts)))}function eu(o,s){var u={};return u[o.toLowerCase()]=s.toLowerCase(),u["Webkit"+o]="webkit"+s,u["Moz"+o]="moz"+s,u}var ns={animationend:eu("Animation","AnimationEnd"),animationiteration:eu("Animation","AnimationIteration"),animationstart:eu("Animation","AnimationStart"),transitionend:eu("Transition","TransitionEnd")},Ed={},om={};d&&(om=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function tu(o){if(Ed[o])return Ed[o];if(!ns[o])return o;var s=ns[o],u;for(u in s)if(s.hasOwnProperty(u)&&u in om)return Ed[o]=s[u];return o}var sm=tu("animationend"),am=tu("animationiteration"),lm=tu("animationstart"),um=tu("transitionend"),cm=new Map,dm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fi(o,s){cm.set(o,s),a(s,[o])}for(var Td=0;Td<dm.length;Td++){var Id=dm[Td],jI=Id.toLowerCase(),eS=Id[0].toUpperCase()+Id.slice(1);fi(jI,"on"+eS)}fi(sm,"onAnimationEnd"),fi(am,"onAnimationIteration"),fi(lm,"onAnimationStart"),fi("dblclick","onDoubleClick"),fi("focusin","onFocus"),fi("focusout","onBlur"),fi(um,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Aa));function fm(o,s,u){var g=o.type||"unknown-event";o.currentTarget=u,ia(g,s,void 0,o),o.currentTarget=null}function hm(o,s){s=(s&4)!==0;for(var u=0;u<o.length;u++){var g=o[u],v=g.event;g=g.listeners;e:{var E=void 0;if(s)for(var w=g.length-1;0<=w;w--){var x=g[w],U=x.instance,$=x.currentTarget;if(x=x.listener,U!==E&&v.isPropagationStopped())break e;fm(v,x,$),E=U}else for(w=0;w<g.length;w++){if(x=g[w],U=x.instance,$=x.currentTarget,x=x.listener,U!==E&&v.isPropagationStopped())break e;fm(v,x,$),E=U}}}if(Oo)throw o=yn,Oo=!1,yn=null,o}function je(o,s){var u=s[kd];u===void 0&&(u=s[kd]=new Set);var g=o+"__bubble";u.has(g)||(pm(s,o,2,!1),u.add(g))}function Sd(o,s,u){var g=0;s&&(g|=4),pm(u,o,g,s)}var nu="_reactListening"+Math.random().toString(36).slice(2);function Ra(o){if(!o[nu]){o[nu]=!0,r.forEach(function(u){u!=="selectionchange"&&(tS.has(u)||Sd(u,!1,o),Sd(u,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[nu]||(s[nu]=!0,Sd("selectionchange",!1,s))}}function pm(o,s,u,g){switch(Jo(s)){case 1:var v=tr;break;case 4:v=Jl;break;default:v=ya}u=v.bind(null,s,u,o),v=void 0,!ii||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(v=!0),g?v!==void 0?o.addEventListener(s,u,{capture:!0,passive:v}):o.addEventListener(s,u,!0):v!==void 0?o.addEventListener(s,u,{passive:v}):o.addEventListener(s,u,!1)}function wd(o,s,u,g,v){var E=g;if((s&1)===0&&(s&2)===0&&g!==null)e:for(;;){if(g===null)return;var w=g.tag;if(w===3||w===4){var x=g.stateNode.containerInfo;if(x===v||x.nodeType===8&&x.parentNode===v)break;if(w===4)for(w=g.return;w!==null;){var U=w.tag;if((U===3||U===4)&&(U=w.stateNode.containerInfo,U===v||U.nodeType===8&&U.parentNode===v))return;w=w.return}for(;x!==null;){if(w=no(x),w===null)return;if(U=w.tag,U===5||U===6){g=E=w;continue e}x=x.parentNode}}g=g.return}bl(function(){var $=E,ee=Fo(u),ne=[];e:{var j=cm.get(o);if(j!==void 0){var de=eo,pe=o;switch(o){case"keypress":if(ji(u)===0)break e;case"keydown":case"keyup":de=Je;break;case"focusin":pe="focus",de=kt;break;case"focusout":pe="blur",de=kt;break;case"beforeblur":case"afterblur":de=kt;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=_a;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=Ql;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=or;break;case sm:case am:case lm:de=Zl;break;case um:de=jo;break;case"scroll":de=Yo;break;case"wheel":de=FI;break;case"copy":case"cut":case"paste":de=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=fn}var me=(s&4)!==0,ht=!me&&o==="scroll",H=me?j!==null?j+"Capture":null:j;me=[];for(var O=$,z;O!==null;){z=O;var ie=z.stateNode;if(z.tag===5&&ie!==null&&(z=ie,H!==null&&(ie=qi(O,H),ie!=null&&me.push(Pa(O,ie,z)))),ht)break;O=O.return}0<me.length&&(j=new de(j,pe,null,u,ee),ne.push({event:j,listeners:me}))}}if((s&7)===0){e:{if(j=o==="mouseover"||o==="pointerover",de=o==="mouseout"||o==="pointerout",j&&u!==ti&&(pe=u.relatedTarget||u.fromElement)&&(no(pe)||pe[Rr]))break e;if((de||j)&&(j=ee.window===ee?ee:(j=ee.ownerDocument)?j.defaultView||j.parentWindow:window,de?(pe=u.relatedTarget||u.toElement,de=$,pe=pe?no(pe):null,pe!==null&&(ht=Nn(pe),pe!==ht||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(de=null,pe=$),de!==pe)){if(me=_a,ie="onMouseLeave",H="onMouseEnter",O="mouse",(o==="pointerout"||o==="pointerover")&&(me=fn,ie="onPointerLeave",H="onPointerEnter",O="pointer"),ht=de==null?j:os(de),z=pe==null?j:os(pe),j=new me(ie,O+"leave",de,u,ee),j.target=ht,j.relatedTarget=z,ie=null,no(ee)===$&&(me=new me(H,O+"enter",pe,u,ee),me.target=z,me.relatedTarget=ht,ie=me),ht=ie,de&&pe)t:{for(me=de,H=pe,O=0,z=me;z;z=rs(z))O++;for(z=0,ie=H;ie;ie=rs(ie))z++;for(;0<O-z;)me=rs(me),O--;for(;0<z-O;)H=rs(H),z--;for(;O--;){if(me===H||H!==null&&me===H.alternate)break t;me=rs(me),H=rs(H)}me=null}else me=null;de!==null&&mm(ne,j,de,me,!1),pe!==null&&ht!==null&&mm(ne,ht,pe,me,!0)}}e:{if(j=$?os($):window,de=j.nodeName&&j.nodeName.toLowerCase(),de==="select"||de==="input"&&j.type==="file")var ye=$I;else if(Kp(j))if(Qp)ye=YI;else{ye=JI;var _e=WI}else(de=j.nodeName)&&de.toLowerCase()==="input"&&(j.type==="checkbox"||j.type==="radio")&&(ye=KI);if(ye&&(ye=ye(o,$))){Yp(ne,ye,u,ee);break e}_e&&_e(o,j,$),o==="focusout"&&(_e=j._wrapperState)&&_e.controlled&&j.type==="number"&&pt(j,"number",j.value)}switch(_e=$?os($):window,o){case"focusin":(Kp(_e)||_e.contentEditable==="true")&&(ts=_e,vd=$,Ca=null);break;case"focusout":Ca=vd=ts=null;break;case"mousedown":_d=!0;break;case"contextmenu":case"mouseup":case"dragend":_d=!1,im(ne,u,ee);break;case"selectionchange":if(ZI)break;case"keydown":case"keyup":im(ne,u,ee)}var Ee;if(pd)e:{switch(o){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else es?Wp(o,u)&&(Ie="onCompositionEnd"):o==="keydown"&&u.keyCode===229&&(Ie="onCompositionStart");Ie&&(qp&&u.locale!=="ko"&&(es||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&es&&(Ee=Kl()):(cn=ee,Ko="value"in cn?cn.value:cn.textContent,es=!0)),_e=ru($,Ie),0<_e.length&&(Ie=new S(Ie,o,null,u,ee),ne.push({event:Ie,listeners:_e}),Ee?Ie.data=Ee:(Ee=Jp(u),Ee!==null&&(Ie.data=Ee)))),(Ee=GI?BI(o,u):HI(o,u))&&($=ru($,"onBeforeInput"),0<$.length&&(ee=new S("onBeforeInput","beforeinput",null,u,ee),ne.push({event:ee,listeners:$}),ee.data=Ee))}hm(ne,s)})}function Pa(o,s,u){return{instance:o,listener:s,currentTarget:u}}function ru(o,s){for(var u=s+"Capture",g=[];o!==null;){var v=o,E=v.stateNode;v.tag===5&&E!==null&&(v=E,E=qi(o,u),E!=null&&g.unshift(Pa(o,E,v)),E=qi(o,s),E!=null&&g.push(Pa(o,E,v))),o=o.return}return g}function rs(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function mm(o,s,u,g,v){for(var E=s._reactName,w=[];u!==null&&u!==g;){var x=u,U=x.alternate,$=x.stateNode;if(U!==null&&U===g)break;x.tag===5&&$!==null&&(x=$,v?(U=qi(u,E),U!=null&&w.unshift(Pa(u,U,x))):v||(U=qi(u,E),U!=null&&w.push(Pa(u,U,x)))),u=u.return}w.length!==0&&o.push({event:s,listeners:w})}var nS=/\r\n?/g,rS=/\u0000|\uFFFD/g;function gm(o){return(typeof o=="string"?o:""+o).replace(nS,`
`).replace(rS,"")}function iu(o,s,u){if(s=gm(s),gm(o)!==s&&u)throw Error(t(425))}function ou(){}var Cd=null,Ad=null;function Rd(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Pd=typeof setTimeout=="function"?setTimeout:void 0,iS=typeof clearTimeout=="function"?clearTimeout:void 0,ym=typeof Promise=="function"?Promise:void 0,oS=typeof queueMicrotask=="function"?queueMicrotask:typeof ym<"u"?function(o){return ym.resolve(null).then(o).catch(sS)}:Pd;function sS(o){setTimeout(function(){throw o})}function Nd(o,s){var u=s,g=0;do{var v=u.nextSibling;if(o.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"){if(g===0){o.removeChild(v),ui(s);return}g--}else u!=="$"&&u!=="$?"&&u!=="$!"||g++;u=v}while(u);ui(s)}function hi(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return o}function vm(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var u=o.data;if(u==="$"||u==="$!"||u==="$?"){if(s===0)return o;s--}else u==="/$"&&s++}o=o.previousSibling}return null}var is=Math.random().toString(36).slice(2),ar="__reactFiber$"+is,Na="__reactProps$"+is,Rr="__reactContainer$"+is,kd="__reactEvents$"+is,aS="__reactListeners$"+is,lS="__reactHandles$"+is;function no(o){var s=o[ar];if(s)return s;for(var u=o.parentNode;u;){if(s=u[Rr]||u[ar]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(o=vm(o);o!==null;){if(u=o[ar])return u;o=vm(o)}return s}o=u,u=o.parentNode}return null}function ka(o){return o=o[ar]||o[Rr],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function os(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function su(o){return o[Na]||null}var xd=[],ss=-1;function pi(o){return{current:o}}function et(o){0>ss||(o.current=xd[ss],xd[ss]=null,ss--)}function Qe(o,s){ss++,xd[ss]=o.current,o.current=s}var mi={},Ft=pi(mi),Zt=pi(!1),ro=mi;function as(o,s){var u=o.type.contextTypes;if(!u)return mi;var g=o.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===s)return g.__reactInternalMemoizedMaskedChildContext;var v={},E;for(E in u)v[E]=s[E];return g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=s,o.__reactInternalMemoizedMaskedChildContext=v),v}function jt(o){return o=o.childContextTypes,o!=null}function au(){et(Zt),et(Ft)}function _m(o,s,u){if(Ft.current!==mi)throw Error(t(168));Qe(Ft,s),Qe(Zt,u)}function Em(o,s,u){var g=o.stateNode;if(s=s.childContextTypes,typeof g.getChildContext!="function")return u;g=g.getChildContext();for(var v in g)if(!(v in s))throw Error(t(108,$e(o)||"Unknown",v));return ce({},u,g)}function lu(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||mi,ro=Ft.current,Qe(Ft,o),Qe(Zt,Zt.current),!0}function Tm(o,s,u){var g=o.stateNode;if(!g)throw Error(t(169));u?(o=Em(o,s,ro),g.__reactInternalMemoizedMergedChildContext=o,et(Zt),et(Ft),Qe(Ft,o)):et(Zt),Qe(Zt,u)}var Pr=null,uu=!1,Md=!1;function Im(o){Pr===null?Pr=[o]:Pr.push(o)}function uS(o){uu=!0,Im(o)}function gi(){if(!Md&&Pr!==null){Md=!0;var o=0,s=Ve;try{var u=Pr;for(Ve=1;o<u.length;o++){var g=u[o];do g=g(!0);while(g!==null)}Pr=null,uu=!1}catch(v){throw Pr!==null&&(Pr=Pr.slice(o+1)),sa(Bo,gi),v}finally{Ve=s,Md=!1}}return null}var ls=[],us=0,cu=null,du=0,_n=[],En=0,io=null,Nr=1,kr="";function oo(o,s){ls[us++]=du,ls[us++]=cu,cu=o,du=s}function Sm(o,s,u){_n[En++]=Nr,_n[En++]=kr,_n[En++]=io,io=o;var g=Nr;o=kr;var v=32-ln(g)-1;g&=~(1<<v),u+=1;var E=32-ln(s)+v;if(30<E){var w=v-v%5;E=(g&(1<<w)-1).toString(32),g>>=w,v-=w,Nr=1<<32-ln(s)+v|u<<v|g,kr=E+o}else Nr=1<<E|u<<v|g,kr=o}function Dd(o){o.return!==null&&(oo(o,1),Sm(o,1,0))}function Ld(o){for(;o===cu;)cu=ls[--us],ls[us]=null,du=ls[--us],ls[us]=null;for(;o===io;)io=_n[--En],_n[En]=null,kr=_n[--En],_n[En]=null,Nr=_n[--En],_n[En]=null}var hn=null,pn=null,nt=!1,Mn=null;function wm(o,s){var u=wn(5,null,null,0);u.elementType="DELETED",u.stateNode=s,u.return=o,s=o.deletions,s===null?(o.deletions=[u],o.flags|=16):s.push(u)}function Cm(o,s){switch(o.tag){case 5:var u=o.type;return s=s.nodeType!==1||u.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(o.stateNode=s,hn=o,pn=hi(s.firstChild),!0):!1;case 6:return s=o.pendingProps===""||s.nodeType!==3?null:s,s!==null?(o.stateNode=s,hn=o,pn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(u=io!==null?{id:Nr,overflow:kr}:null,o.memoizedState={dehydrated:s,treeContext:u,retryLane:1073741824},u=wn(18,null,null,0),u.stateNode=s,u.return=o,o.child=u,hn=o,pn=null,!0):!1;default:return!1}}function Vd(o){return(o.mode&1)!==0&&(o.flags&128)===0}function bd(o){if(nt){var s=pn;if(s){var u=s;if(!Cm(o,s)){if(Vd(o))throw Error(t(418));s=hi(u.nextSibling);var g=hn;s&&Cm(o,s)?wm(g,u):(o.flags=o.flags&-4097|2,nt=!1,hn=o)}}else{if(Vd(o))throw Error(t(418));o.flags=o.flags&-4097|2,nt=!1,hn=o}}}function Am(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;hn=o}function fu(o){if(o!==hn)return!1;if(!nt)return Am(o),nt=!0,!1;var s;if((s=o.tag!==3)&&!(s=o.tag!==5)&&(s=o.type,s=s!=="head"&&s!=="body"&&!Rd(o.type,o.memoizedProps)),s&&(s=pn)){if(Vd(o))throw Rm(),Error(t(418));for(;s;)wm(o,s),s=hi(s.nextSibling)}if(Am(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,s=0;o;){if(o.nodeType===8){var u=o.data;if(u==="/$"){if(s===0){pn=hi(o.nextSibling);break e}s--}else u!=="$"&&u!=="$!"&&u!=="$?"||s++}o=o.nextSibling}pn=null}}else pn=hn?hi(o.stateNode.nextSibling):null;return!0}function Rm(){for(var o=pn;o;)o=hi(o.nextSibling)}function cs(){pn=hn=null,nt=!1}function Ud(o){Mn===null?Mn=[o]:Mn.push(o)}var cS=Q.ReactCurrentBatchConfig;function xa(o,s,u){if(o=u.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var g=u.stateNode}if(!g)throw Error(t(147,o));var v=g,E=""+o;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===E?s.ref:(s=function(w){var x=v.refs;w===null?delete x[E]:x[E]=w},s._stringRef=E,s)}if(typeof o!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,o))}return o}function hu(o,s){throw o=Object.prototype.toString.call(s),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o))}function Pm(o){var s=o._init;return s(o._payload)}function Nm(o){function s(H,O){if(o){var z=H.deletions;z===null?(H.deletions=[O],H.flags|=16):z.push(O)}}function u(H,O){if(!o)return null;for(;O!==null;)s(H,O),O=O.sibling;return null}function g(H,O){for(H=new Map;O!==null;)O.key!==null?H.set(O.key,O):H.set(O.index,O),O=O.sibling;return H}function v(H,O){return H=wi(H,O),H.index=0,H.sibling=null,H}function E(H,O,z){return H.index=z,o?(z=H.alternate,z!==null?(z=z.index,z<O?(H.flags|=2,O):z):(H.flags|=2,O)):(H.flags|=1048576,O)}function w(H){return o&&H.alternate===null&&(H.flags|=2),H}function x(H,O,z,ie){return O===null||O.tag!==6?(O=Nf(z,H.mode,ie),O.return=H,O):(O=v(O,z),O.return=H,O)}function U(H,O,z,ie){var ye=z.type;return ye===M?ee(H,O,z.props.children,ie,z.key):O!==null&&(O.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Oe&&Pm(ye)===O.type)?(ie=v(O,z.props),ie.ref=xa(H,O,z),ie.return=H,ie):(ie=Uu(z.type,z.key,z.props,null,H.mode,ie),ie.ref=xa(H,O,z),ie.return=H,ie)}function $(H,O,z,ie){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=kf(z,H.mode,ie),O.return=H,O):(O=v(O,z.children||[]),O.return=H,O)}function ee(H,O,z,ie,ye){return O===null||O.tag!==7?(O=po(z,H.mode,ie,ye),O.return=H,O):(O=v(O,z),O.return=H,O)}function ne(H,O,z){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Nf(""+O,H.mode,z),O.return=H,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case le:return z=Uu(O.type,O.key,O.props,null,H.mode,z),z.ref=xa(H,null,O),z.return=H,z;case J:return O=kf(O,H.mode,z),O.return=H,O;case Oe:var ie=O._init;return ne(H,ie(O._payload),z)}if(dt(O)||he(O))return O=po(O,H.mode,z,null),O.return=H,O;hu(H,O)}return null}function j(H,O,z,ie){var ye=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ye!==null?null:x(H,O,""+z,ie);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case le:return z.key===ye?U(H,O,z,ie):null;case J:return z.key===ye?$(H,O,z,ie):null;case Oe:return ye=z._init,j(H,O,ye(z._payload),ie)}if(dt(z)||he(z))return ye!==null?null:ee(H,O,z,ie,null);hu(H,z)}return null}function de(H,O,z,ie,ye){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return H=H.get(z)||null,x(O,H,""+ie,ye);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case le:return H=H.get(ie.key===null?z:ie.key)||null,U(O,H,ie,ye);case J:return H=H.get(ie.key===null?z:ie.key)||null,$(O,H,ie,ye);case Oe:var _e=ie._init;return de(H,O,z,_e(ie._payload),ye)}if(dt(ie)||he(ie))return H=H.get(z)||null,ee(O,H,ie,ye,null);hu(O,ie)}return null}function pe(H,O,z,ie){for(var ye=null,_e=null,Ee=O,Ie=O=0,wt=null;Ee!==null&&Ie<z.length;Ie++){Ee.index>Ie?(wt=Ee,Ee=null):wt=Ee.sibling;var Ge=j(H,Ee,z[Ie],ie);if(Ge===null){Ee===null&&(Ee=wt);break}o&&Ee&&Ge.alternate===null&&s(H,Ee),O=E(Ge,O,Ie),_e===null?ye=Ge:_e.sibling=Ge,_e=Ge,Ee=wt}if(Ie===z.length)return u(H,Ee),nt&&oo(H,Ie),ye;if(Ee===null){for(;Ie<z.length;Ie++)Ee=ne(H,z[Ie],ie),Ee!==null&&(O=E(Ee,O,Ie),_e===null?ye=Ee:_e.sibling=Ee,_e=Ee);return nt&&oo(H,Ie),ye}for(Ee=g(H,Ee);Ie<z.length;Ie++)wt=de(Ee,H,Ie,z[Ie],ie),wt!==null&&(o&&wt.alternate!==null&&Ee.delete(wt.key===null?Ie:wt.key),O=E(wt,O,Ie),_e===null?ye=wt:_e.sibling=wt,_e=wt);return o&&Ee.forEach(function(Ci){return s(H,Ci)}),nt&&oo(H,Ie),ye}function me(H,O,z,ie){var ye=he(z);if(typeof ye!="function")throw Error(t(150));if(z=ye.call(z),z==null)throw Error(t(151));for(var _e=ye=null,Ee=O,Ie=O=0,wt=null,Ge=z.next();Ee!==null&&!Ge.done;Ie++,Ge=z.next()){Ee.index>Ie?(wt=Ee,Ee=null):wt=Ee.sibling;var Ci=j(H,Ee,Ge.value,ie);if(Ci===null){Ee===null&&(Ee=wt);break}o&&Ee&&Ci.alternate===null&&s(H,Ee),O=E(Ci,O,Ie),_e===null?ye=Ci:_e.sibling=Ci,_e=Ci,Ee=wt}if(Ge.done)return u(H,Ee),nt&&oo(H,Ie),ye;if(Ee===null){for(;!Ge.done;Ie++,Ge=z.next())Ge=ne(H,Ge.value,ie),Ge!==null&&(O=E(Ge,O,Ie),_e===null?ye=Ge:_e.sibling=Ge,_e=Ge);return nt&&oo(H,Ie),ye}for(Ee=g(H,Ee);!Ge.done;Ie++,Ge=z.next())Ge=de(Ee,H,Ie,Ge.value,ie),Ge!==null&&(o&&Ge.alternate!==null&&Ee.delete(Ge.key===null?Ie:Ge.key),O=E(Ge,O,Ie),_e===null?ye=Ge:_e.sibling=Ge,_e=Ge);return o&&Ee.forEach(function(qS){return s(H,qS)}),nt&&oo(H,Ie),ye}function ht(H,O,z,ie){if(typeof z=="object"&&z!==null&&z.type===M&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case le:e:{for(var ye=z.key,_e=O;_e!==null;){if(_e.key===ye){if(ye=z.type,ye===M){if(_e.tag===7){u(H,_e.sibling),O=v(_e,z.props.children),O.return=H,H=O;break e}}else if(_e.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Oe&&Pm(ye)===_e.type){u(H,_e.sibling),O=v(_e,z.props),O.ref=xa(H,_e,z),O.return=H,H=O;break e}u(H,_e);break}else s(H,_e);_e=_e.sibling}z.type===M?(O=po(z.props.children,H.mode,ie,z.key),O.return=H,H=O):(ie=Uu(z.type,z.key,z.props,null,H.mode,ie),ie.ref=xa(H,O,z),ie.return=H,H=ie)}return w(H);case J:e:{for(_e=z.key;O!==null;){if(O.key===_e)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){u(H,O.sibling),O=v(O,z.children||[]),O.return=H,H=O;break e}else{u(H,O);break}else s(H,O);O=O.sibling}O=kf(z,H.mode,ie),O.return=H,H=O}return w(H);case Oe:return _e=z._init,ht(H,O,_e(z._payload),ie)}if(dt(z))return pe(H,O,z,ie);if(he(z))return me(H,O,z,ie);hu(H,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,O!==null&&O.tag===6?(u(H,O.sibling),O=v(O,z),O.return=H,H=O):(u(H,O),O=Nf(z,H.mode,ie),O.return=H,H=O),w(H)):u(H,O)}return ht}var ds=Nm(!0),km=Nm(!1),pu=pi(null),mu=null,fs=null,Fd=null;function Od(){Fd=fs=mu=null}function Gd(o){var s=pu.current;et(pu),o._currentValue=s}function Bd(o,s,u){for(;o!==null;){var g=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),o===u)break;o=o.return}}function hs(o,s){mu=o,Fd=fs=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&s)!==0&&(en=!0),o.firstContext=null)}function Tn(o){var s=o._currentValue;if(Fd!==o)if(o={context:o,memoizedValue:s,next:null},fs===null){if(mu===null)throw Error(t(308));fs=o,mu.dependencies={lanes:0,firstContext:o}}else fs=fs.next=o;return s}var so=null;function Hd(o){so===null?so=[o]:so.push(o)}function xm(o,s,u,g){var v=s.interleaved;return v===null?(u.next=u,Hd(s)):(u.next=v.next,v.next=u),s.interleaved=u,xr(o,g)}function xr(o,s){o.lanes|=s;var u=o.alternate;for(u!==null&&(u.lanes|=s),u=o,o=o.return;o!==null;)o.childLanes|=s,u=o.alternate,u!==null&&(u.childLanes|=s),u=o,o=o.return;return u.tag===3?u.stateNode:null}var yi=!1;function qd(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mm(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Mr(o,s){return{eventTime:o,lane:s,tag:0,payload:null,callback:null,next:null}}function vi(o,s,u){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(Fe&2)!==0){var v=g.pending;return v===null?s.next=s:(s.next=v.next,v.next=s),g.pending=s,xr(o,u)}return v=g.interleaved,v===null?(s.next=s,Hd(g)):(s.next=v.next,v.next=s),g.interleaved=s,xr(o,u)}function gu(o,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194240)!==0)){var g=s.lanes;g&=o.pendingLanes,u|=g,s.lanes=u,fa(o,u)}}function Dm(o,s){var u=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var v=null,E=null;if(u=u.firstBaseUpdate,u!==null){do{var w={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};E===null?v=E=w:E=E.next=w,u=u.next}while(u!==null);E===null?v=E=s:E=E.next=s}else v=E=s;u={baseState:g.baseState,firstBaseUpdate:v,lastBaseUpdate:E,shared:g.shared,effects:g.effects},o.updateQueue=u;return}o=u.lastBaseUpdate,o===null?u.firstBaseUpdate=s:o.next=s,u.lastBaseUpdate=s}function yu(o,s,u,g){var v=o.updateQueue;yi=!1;var E=v.firstBaseUpdate,w=v.lastBaseUpdate,x=v.shared.pending;if(x!==null){v.shared.pending=null;var U=x,$=U.next;U.next=null,w===null?E=$:w.next=$,w=U;var ee=o.alternate;ee!==null&&(ee=ee.updateQueue,x=ee.lastBaseUpdate,x!==w&&(x===null?ee.firstBaseUpdate=$:x.next=$,ee.lastBaseUpdate=U))}if(E!==null){var ne=v.baseState;w=0,ee=$=U=null,x=E;do{var j=x.lane,de=x.eventTime;if((g&j)===j){ee!==null&&(ee=ee.next={eventTime:de,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var pe=o,me=x;switch(j=s,de=u,me.tag){case 1:if(pe=me.payload,typeof pe=="function"){ne=pe.call(de,ne,j);break e}ne=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=me.payload,j=typeof pe=="function"?pe.call(de,ne,j):pe,j==null)break e;ne=ce({},ne,j);break e;case 2:yi=!0}}x.callback!==null&&x.lane!==0&&(o.flags|=64,j=v.effects,j===null?v.effects=[x]:j.push(x))}else de={eventTime:de,lane:j,tag:x.tag,payload:x.payload,callback:x.callback,next:null},ee===null?($=ee=de,U=ne):ee=ee.next=de,w|=j;if(x=x.next,x===null){if(x=v.shared.pending,x===null)break;j=x,x=j.next,j.next=null,v.lastBaseUpdate=j,v.shared.pending=null}}while(!0);if(ee===null&&(U=ne),v.baseState=U,v.firstBaseUpdate=$,v.lastBaseUpdate=ee,s=v.shared.interleaved,s!==null){v=s;do w|=v.lane,v=v.next;while(v!==s)}else E===null&&(v.shared.lanes=0);uo|=w,o.lanes=w,o.memoizedState=ne}}function Lm(o,s,u){if(o=s.effects,s.effects=null,o!==null)for(s=0;s<o.length;s++){var g=o[s],v=g.callback;if(v!==null){if(g.callback=null,g=u,typeof v!="function")throw Error(t(191,v));v.call(g)}}}var Ma={},lr=pi(Ma),Da=pi(Ma),La=pi(Ma);function ao(o){if(o===Ma)throw Error(t(174));return o}function zd(o,s){switch(Qe(La,s),Qe(Da,o),Qe(lr,Ma),o=s.nodeType,o){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Vo(null,"");break;default:o=o===8?s.parentNode:s,s=o.namespaceURI||null,o=o.tagName,s=Vo(s,o)}et(lr),Qe(lr,s)}function ps(){et(lr),et(Da),et(La)}function Vm(o){ao(La.current);var s=ao(lr.current),u=Vo(s,o.type);s!==u&&(Qe(Da,o),Qe(lr,u))}function $d(o){Da.current===o&&(et(lr),et(Da))}var ot=pi(0);function vu(o){for(var s=o;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Wd=[];function Jd(){for(var o=0;o<Wd.length;o++)Wd[o]._workInProgressVersionPrimary=null;Wd.length=0}var _u=Q.ReactCurrentDispatcher,Kd=Q.ReactCurrentBatchConfig,lo=0,st=null,_t=null,It=null,Eu=!1,Va=!1,ba=0,dS=0;function Ot(){throw Error(t(321))}function Yd(o,s){if(s===null)return!1;for(var u=0;u<s.length&&u<o.length;u++)if(!xn(o[u],s[u]))return!1;return!0}function Qd(o,s,u,g,v,E){if(lo=E,st=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,_u.current=o===null||o.memoizedState===null?mS:gS,o=u(g,v),Va){E=0;do{if(Va=!1,ba=0,25<=E)throw Error(t(301));E+=1,It=_t=null,s.updateQueue=null,_u.current=yS,o=u(g,v)}while(Va)}if(_u.current=Su,s=_t!==null&&_t.next!==null,lo=0,It=_t=st=null,Eu=!1,s)throw Error(t(300));return o}function Xd(){var o=ba!==0;return ba=0,o}function ur(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?st.memoizedState=It=o:It=It.next=o,It}function In(){if(_t===null){var o=st.alternate;o=o!==null?o.memoizedState:null}else o=_t.next;var s=It===null?st.memoizedState:It.next;if(s!==null)It=s,_t=o;else{if(o===null)throw Error(t(310));_t=o,o={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},It===null?st.memoizedState=It=o:It=It.next=o}return It}function Ua(o,s){return typeof s=="function"?s(o):s}function Zd(o){var s=In(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=o;var g=_t,v=g.baseQueue,E=u.pending;if(E!==null){if(v!==null){var w=v.next;v.next=E.next,E.next=w}g.baseQueue=v=E,u.pending=null}if(v!==null){E=v.next,g=g.baseState;var x=w=null,U=null,$=E;do{var ee=$.lane;if((lo&ee)===ee)U!==null&&(U=U.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),g=$.hasEagerState?$.eagerState:o(g,$.action);else{var ne={lane:ee,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};U===null?(x=U=ne,w=g):U=U.next=ne,st.lanes|=ee,uo|=ee}$=$.next}while($!==null&&$!==E);U===null?w=g:U.next=x,xn(g,s.memoizedState)||(en=!0),s.memoizedState=g,s.baseState=w,s.baseQueue=U,u.lastRenderedState=g}if(o=u.interleaved,o!==null){v=o;do E=v.lane,st.lanes|=E,uo|=E,v=v.next;while(v!==o)}else v===null&&(u.lanes=0);return[s.memoizedState,u.dispatch]}function jd(o){var s=In(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=o;var g=u.dispatch,v=u.pending,E=s.memoizedState;if(v!==null){u.pending=null;var w=v=v.next;do E=o(E,w.action),w=w.next;while(w!==v);xn(E,s.memoizedState)||(en=!0),s.memoizedState=E,s.baseQueue===null&&(s.baseState=E),u.lastRenderedState=E}return[E,g]}function bm(){}function Um(o,s){var u=st,g=In(),v=s(),E=!xn(g.memoizedState,v);if(E&&(g.memoizedState=v,en=!0),g=g.queue,ef(Gm.bind(null,u,g,o),[o]),g.getSnapshot!==s||E||It!==null&&It.memoizedState.tag&1){if(u.flags|=2048,Fa(9,Om.bind(null,u,g,v,s),void 0,null),St===null)throw Error(t(349));(lo&30)!==0||Fm(u,s,v)}return v}function Fm(o,s,u){o.flags|=16384,o={getSnapshot:s,value:u},s=st.updateQueue,s===null?(s={lastEffect:null,stores:null},st.updateQueue=s,s.stores=[o]):(u=s.stores,u===null?s.stores=[o]:u.push(o))}function Om(o,s,u,g){s.value=u,s.getSnapshot=g,Bm(s)&&Hm(o)}function Gm(o,s,u){return u(function(){Bm(s)&&Hm(o)})}function Bm(o){var s=o.getSnapshot;o=o.value;try{var u=s();return!xn(o,u)}catch{return!0}}function Hm(o){var s=xr(o,1);s!==null&&bn(s,o,1,-1)}function qm(o){var s=ur();return typeof o=="function"&&(o=o()),s.memoizedState=s.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:o},s.queue=o,o=o.dispatch=pS.bind(null,st,o),[s.memoizedState,o]}function Fa(o,s,u,g){return o={tag:o,create:s,destroy:u,deps:g,next:null},s=st.updateQueue,s===null?(s={lastEffect:null,stores:null},st.updateQueue=s,s.lastEffect=o.next=o):(u=s.lastEffect,u===null?s.lastEffect=o.next=o:(g=u.next,u.next=o,o.next=g,s.lastEffect=o)),o}function zm(){return In().memoizedState}function Tu(o,s,u,g){var v=ur();st.flags|=o,v.memoizedState=Fa(1|s,u,void 0,g===void 0?null:g)}function Iu(o,s,u,g){var v=In();g=g===void 0?null:g;var E=void 0;if(_t!==null){var w=_t.memoizedState;if(E=w.destroy,g!==null&&Yd(g,w.deps)){v.memoizedState=Fa(s,u,E,g);return}}st.flags|=o,v.memoizedState=Fa(1|s,u,E,g)}function $m(o,s){return Tu(8390656,8,o,s)}function ef(o,s){return Iu(2048,8,o,s)}function Wm(o,s){return Iu(4,2,o,s)}function Jm(o,s){return Iu(4,4,o,s)}function Km(o,s){if(typeof s=="function")return o=o(),s(o),function(){s(null)};if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function Ym(o,s,u){return u=u!=null?u.concat([o]):null,Iu(4,4,Km.bind(null,s,o),u)}function tf(){}function Qm(o,s){var u=In();s=s===void 0?null:s;var g=u.memoizedState;return g!==null&&s!==null&&Yd(s,g[1])?g[0]:(u.memoizedState=[o,s],o)}function Xm(o,s){var u=In();s=s===void 0?null:s;var g=u.memoizedState;return g!==null&&s!==null&&Yd(s,g[1])?g[0]:(o=o(),u.memoizedState=[o,s],o)}function Zm(o,s,u){return(lo&21)===0?(o.baseState&&(o.baseState=!1,en=!0),o.memoizedState=u):(xn(u,s)||(u=ca(),st.lanes|=u,uo|=u,o.baseState=!0),s)}function fS(o,s){var u=Ve;Ve=u!==0&&4>u?u:4,o(!0);var g=Kd.transition;Kd.transition={};try{o(!1),s()}finally{Ve=u,Kd.transition=g}}function jm(){return In().memoizedState}function hS(o,s,u){var g=Ii(o);if(u={lane:g,action:u,hasEagerState:!1,eagerState:null,next:null},eg(o))tg(s,u);else if(u=xm(o,s,u,g),u!==null){var v=Yt();bn(u,o,g,v),ng(u,s,g)}}function pS(o,s,u){var g=Ii(o),v={lane:g,action:u,hasEagerState:!1,eagerState:null,next:null};if(eg(o))tg(s,v);else{var E=o.alternate;if(o.lanes===0&&(E===null||E.lanes===0)&&(E=s.lastRenderedReducer,E!==null))try{var w=s.lastRenderedState,x=E(w,u);if(v.hasEagerState=!0,v.eagerState=x,xn(x,w)){var U=s.interleaved;U===null?(v.next=v,Hd(s)):(v.next=U.next,U.next=v),s.interleaved=v;return}}catch{}u=xm(o,s,v,g),u!==null&&(v=Yt(),bn(u,o,g,v),ng(u,s,g))}}function eg(o){var s=o.alternate;return o===st||s!==null&&s===st}function tg(o,s){Va=Eu=!0;var u=o.pending;u===null?s.next=s:(s.next=u.next,u.next=s),o.pending=s}function ng(o,s,u){if((u&4194240)!==0){var g=s.lanes;g&=o.pendingLanes,u|=g,s.lanes=u,fa(o,u)}}var Su={readContext:Tn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},mS={readContext:Tn,useCallback:function(o,s){return ur().memoizedState=[o,s===void 0?null:s],o},useContext:Tn,useEffect:$m,useImperativeHandle:function(o,s,u){return u=u!=null?u.concat([o]):null,Tu(4194308,4,Km.bind(null,s,o),u)},useLayoutEffect:function(o,s){return Tu(4194308,4,o,s)},useInsertionEffect:function(o,s){return Tu(4,2,o,s)},useMemo:function(o,s){var u=ur();return s=s===void 0?null:s,o=o(),u.memoizedState=[o,s],o},useReducer:function(o,s,u){var g=ur();return s=u!==void 0?u(s):s,g.memoizedState=g.baseState=s,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:s},g.queue=o,o=o.dispatch=hS.bind(null,st,o),[g.memoizedState,o]},useRef:function(o){var s=ur();return o={current:o},s.memoizedState=o},useState:qm,useDebugValue:tf,useDeferredValue:function(o){return ur().memoizedState=o},useTransition:function(){var o=qm(!1),s=o[0];return o=fS.bind(null,o[1]),ur().memoizedState=o,[s,o]},useMutableSource:function(){},useSyncExternalStore:function(o,s,u){var g=st,v=ur();if(nt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=s(),St===null)throw Error(t(349));(lo&30)!==0||Fm(g,s,u)}v.memoizedState=u;var E={value:u,getSnapshot:s};return v.queue=E,$m(Gm.bind(null,g,E,o),[o]),g.flags|=2048,Fa(9,Om.bind(null,g,E,u,s),void 0,null),u},useId:function(){var o=ur(),s=St.identifierPrefix;if(nt){var u=kr,g=Nr;u=(g&~(1<<32-ln(g)-1)).toString(32)+u,s=":"+s+"R"+u,u=ba++,0<u&&(s+="H"+u.toString(32)),s+=":"}else u=dS++,s=":"+s+"r"+u.toString(32)+":";return o.memoizedState=s},unstable_isNewReconciler:!1},gS={readContext:Tn,useCallback:Qm,useContext:Tn,useEffect:ef,useImperativeHandle:Ym,useInsertionEffect:Wm,useLayoutEffect:Jm,useMemo:Xm,useReducer:Zd,useRef:zm,useState:function(){return Zd(Ua)},useDebugValue:tf,useDeferredValue:function(o){var s=In();return Zm(s,_t.memoizedState,o)},useTransition:function(){var o=Zd(Ua)[0],s=In().memoizedState;return[o,s]},useMutableSource:bm,useSyncExternalStore:Um,useId:jm,unstable_isNewReconciler:!1},yS={readContext:Tn,useCallback:Qm,useContext:Tn,useEffect:ef,useImperativeHandle:Ym,useInsertionEffect:Wm,useLayoutEffect:Jm,useMemo:Xm,useReducer:jd,useRef:zm,useState:function(){return jd(Ua)},useDebugValue:tf,useDeferredValue:function(o){var s=In();return _t===null?s.memoizedState=o:Zm(s,_t.memoizedState,o)},useTransition:function(){var o=jd(Ua)[0],s=In().memoizedState;return[o,s]},useMutableSource:bm,useSyncExternalStore:Um,useId:jm,unstable_isNewReconciler:!1};function Dn(o,s){if(o&&o.defaultProps){s=ce({},s),o=o.defaultProps;for(var u in o)s[u]===void 0&&(s[u]=o[u]);return s}return s}function nf(o,s,u,g){s=o.memoizedState,u=u(g,s),u=u==null?s:ce({},s,u),o.memoizedState=u,o.lanes===0&&(o.updateQueue.baseState=u)}var wu={isMounted:function(o){return(o=o._reactInternals)?Nn(o)===o:!1},enqueueSetState:function(o,s,u){o=o._reactInternals;var g=Yt(),v=Ii(o),E=Mr(g,v);E.payload=s,u!=null&&(E.callback=u),s=vi(o,E,v),s!==null&&(bn(s,o,v,g),gu(s,o,v))},enqueueReplaceState:function(o,s,u){o=o._reactInternals;var g=Yt(),v=Ii(o),E=Mr(g,v);E.tag=1,E.payload=s,u!=null&&(E.callback=u),s=vi(o,E,v),s!==null&&(bn(s,o,v,g),gu(s,o,v))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var u=Yt(),g=Ii(o),v=Mr(u,g);v.tag=2,s!=null&&(v.callback=s),s=vi(o,v,g),s!==null&&(bn(s,o,g,u),gu(s,o,g))}};function rg(o,s,u,g,v,E,w){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,E,w):s.prototype&&s.prototype.isPureReactComponent?!wa(u,g)||!wa(v,E):!0}function ig(o,s,u){var g=!1,v=mi,E=s.contextType;return typeof E=="object"&&E!==null?E=Tn(E):(v=jt(s)?ro:Ft.current,g=s.contextTypes,E=(g=g!=null)?as(o,v):mi),s=new s(u,E),o.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=wu,o.stateNode=s,s._reactInternals=o,g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=v,o.__reactInternalMemoizedMaskedChildContext=E),s}function og(o,s,u,g){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,g),s.state!==o&&wu.enqueueReplaceState(s,s.state,null)}function rf(o,s,u,g){var v=o.stateNode;v.props=u,v.state=o.memoizedState,v.refs={},qd(o);var E=s.contextType;typeof E=="object"&&E!==null?v.context=Tn(E):(E=jt(s)?ro:Ft.current,v.context=as(o,E)),v.state=o.memoizedState,E=s.getDerivedStateFromProps,typeof E=="function"&&(nf(o,s,E,u),v.state=o.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(s=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),s!==v.state&&wu.enqueueReplaceState(v,v.state,null),yu(o,u,v,g),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308)}function ms(o,s){try{var u="",g=s;do u+=Me(g),g=g.return;while(g);var v=u}catch(E){v=`
Error generating stack: `+E.message+`
`+E.stack}return{value:o,source:s,stack:v,digest:null}}function of(o,s,u){return{value:o,source:null,stack:u??null,digest:s??null}}function sf(o,s){try{console.error(s.value)}catch(u){setTimeout(function(){throw u})}}var vS=typeof WeakMap=="function"?WeakMap:Map;function sg(o,s,u){u=Mr(-1,u),u.tag=3,u.payload={element:null};var g=s.value;return u.callback=function(){xu||(xu=!0,Tf=g),sf(o,s)},u}function ag(o,s,u){u=Mr(-1,u),u.tag=3;var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var v=s.value;u.payload=function(){return g(v)},u.callback=function(){sf(o,s)}}var E=o.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(u.callback=function(){sf(o,s),typeof g!="function"&&(Ei===null?Ei=new Set([this]):Ei.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),u}function lg(o,s,u){var g=o.pingCache;if(g===null){g=o.pingCache=new vS;var v=new Set;g.set(s,v)}else v=g.get(s),v===void 0&&(v=new Set,g.set(s,v));v.has(u)||(v.add(u),o=MS.bind(null,o,s,u),s.then(o,o))}function ug(o){do{var s;if((s=o.tag===13)&&(s=o.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return o;o=o.return}while(o!==null);return null}function cg(o,s,u,g,v){return(o.mode&1)===0?(o===s?o.flags|=65536:(o.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(s=Mr(-1,1),s.tag=2,vi(u,s,1))),u.lanes|=1),o):(o.flags|=65536,o.lanes=v,o)}var _S=Q.ReactCurrentOwner,en=!1;function Kt(o,s,u,g){s.child=o===null?km(s,null,u,g):ds(s,o.child,u,g)}function dg(o,s,u,g,v){u=u.render;var E=s.ref;return hs(s,v),g=Qd(o,s,u,g,E,v),u=Xd(),o!==null&&!en?(s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~v,Dr(o,s,v)):(nt&&u&&Dd(s),s.flags|=1,Kt(o,s,g,v),s.child)}function fg(o,s,u,g,v){if(o===null){var E=u.type;return typeof E=="function"&&!Pf(E)&&E.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(s.tag=15,s.type=E,hg(o,s,E,g,v)):(o=Uu(u.type,null,g,s,s.mode,v),o.ref=s.ref,o.return=s,s.child=o)}if(E=o.child,(o.lanes&v)===0){var w=E.memoizedProps;if(u=u.compare,u=u!==null?u:wa,u(w,g)&&o.ref===s.ref)return Dr(o,s,v)}return s.flags|=1,o=wi(E,g),o.ref=s.ref,o.return=s,s.child=o}function hg(o,s,u,g,v){if(o!==null){var E=o.memoizedProps;if(wa(E,g)&&o.ref===s.ref)if(en=!1,s.pendingProps=g=E,(o.lanes&v)!==0)(o.flags&131072)!==0&&(en=!0);else return s.lanes=o.lanes,Dr(o,s,v)}return af(o,s,u,g,v)}function pg(o,s,u){var g=s.pendingProps,v=g.children,E=o!==null?o.memoizedState:null;if(g.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(ys,mn),mn|=u;else{if((u&1073741824)===0)return o=E!==null?E.baseLanes|u:u,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:o,cachePool:null,transitions:null},s.updateQueue=null,Qe(ys,mn),mn|=o,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=E!==null?E.baseLanes:u,Qe(ys,mn),mn|=g}else E!==null?(g=E.baseLanes|u,s.memoizedState=null):g=u,Qe(ys,mn),mn|=g;return Kt(o,s,v,u),s.child}function mg(o,s){var u=s.ref;(o===null&&u!==null||o!==null&&o.ref!==u)&&(s.flags|=512,s.flags|=2097152)}function af(o,s,u,g,v){var E=jt(u)?ro:Ft.current;return E=as(s,E),hs(s,v),u=Qd(o,s,u,g,E,v),g=Xd(),o!==null&&!en?(s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~v,Dr(o,s,v)):(nt&&g&&Dd(s),s.flags|=1,Kt(o,s,u,v),s.child)}function gg(o,s,u,g,v){if(jt(u)){var E=!0;lu(s)}else E=!1;if(hs(s,v),s.stateNode===null)Au(o,s),ig(s,u,g),rf(s,u,g,v),g=!0;else if(o===null){var w=s.stateNode,x=s.memoizedProps;w.props=x;var U=w.context,$=u.contextType;typeof $=="object"&&$!==null?$=Tn($):($=jt(u)?ro:Ft.current,$=as(s,$));var ee=u.getDerivedStateFromProps,ne=typeof ee=="function"||typeof w.getSnapshotBeforeUpdate=="function";ne||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(x!==g||U!==$)&&og(s,w,g,$),yi=!1;var j=s.memoizedState;w.state=j,yu(s,g,w,v),U=s.memoizedState,x!==g||j!==U||Zt.current||yi?(typeof ee=="function"&&(nf(s,u,ee,g),U=s.memoizedState),(x=yi||rg(s,u,x,g,j,U,$))?(ne||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=U),w.props=g,w.state=U,w.context=$,g=x):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{w=s.stateNode,Mm(o,s),x=s.memoizedProps,$=s.type===s.elementType?x:Dn(s.type,x),w.props=$,ne=s.pendingProps,j=w.context,U=u.contextType,typeof U=="object"&&U!==null?U=Tn(U):(U=jt(u)?ro:Ft.current,U=as(s,U));var de=u.getDerivedStateFromProps;(ee=typeof de=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(x!==ne||j!==U)&&og(s,w,g,U),yi=!1,j=s.memoizedState,w.state=j,yu(s,g,w,v);var pe=s.memoizedState;x!==ne||j!==pe||Zt.current||yi?(typeof de=="function"&&(nf(s,u,de,g),pe=s.memoizedState),($=yi||rg(s,u,$,g,j,pe,U)||!1)?(ee||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(g,pe,U),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(g,pe,U)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||x===o.memoizedProps&&j===o.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===o.memoizedProps&&j===o.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=pe),w.props=g,w.state=pe,w.context=U,g=$):(typeof w.componentDidUpdate!="function"||x===o.memoizedProps&&j===o.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===o.memoizedProps&&j===o.memoizedState||(s.flags|=1024),g=!1)}return lf(o,s,u,g,E,v)}function lf(o,s,u,g,v,E){mg(o,s);var w=(s.flags&128)!==0;if(!g&&!w)return v&&Tm(s,u,!1),Dr(o,s,E);g=s.stateNode,_S.current=s;var x=w&&typeof u.getDerivedStateFromError!="function"?null:g.render();return s.flags|=1,o!==null&&w?(s.child=ds(s,o.child,null,E),s.child=ds(s,null,x,E)):Kt(o,s,x,E),s.memoizedState=g.state,v&&Tm(s,u,!0),s.child}function yg(o){var s=o.stateNode;s.pendingContext?_m(o,s.pendingContext,s.pendingContext!==s.context):s.context&&_m(o,s.context,!1),zd(o,s.containerInfo)}function vg(o,s,u,g,v){return cs(),Ud(v),s.flags|=256,Kt(o,s,u,g),s.child}var uf={dehydrated:null,treeContext:null,retryLane:0};function cf(o){return{baseLanes:o,cachePool:null,transitions:null}}function _g(o,s,u){var g=s.pendingProps,v=ot.current,E=!1,w=(s.flags&128)!==0,x;if((x=w)||(x=o!==null&&o.memoizedState===null?!1:(v&2)!==0),x?(E=!0,s.flags&=-129):(o===null||o.memoizedState!==null)&&(v|=1),Qe(ot,v&1),o===null)return bd(s),o=s.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((s.mode&1)===0?s.lanes=1:o.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=g.children,o=g.fallback,E?(g=s.mode,E=s.child,w={mode:"hidden",children:w},(g&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=w):E=Fu(w,g,0,null),o=po(o,g,u,null),E.return=s,o.return=s,E.sibling=o,s.child=E,s.child.memoizedState=cf(u),s.memoizedState=uf,o):df(s,w));if(v=o.memoizedState,v!==null&&(x=v.dehydrated,x!==null))return ES(o,s,w,g,x,v,u);if(E){E=g.fallback,w=s.mode,v=o.child,x=v.sibling;var U={mode:"hidden",children:g.children};return(w&1)===0&&s.child!==v?(g=s.child,g.childLanes=0,g.pendingProps=U,s.deletions=null):(g=wi(v,U),g.subtreeFlags=v.subtreeFlags&14680064),x!==null?E=wi(x,E):(E=po(E,w,u,null),E.flags|=2),E.return=s,g.return=s,g.sibling=E,s.child=g,g=E,E=s.child,w=o.child.memoizedState,w=w===null?cf(u):{baseLanes:w.baseLanes|u,cachePool:null,transitions:w.transitions},E.memoizedState=w,E.childLanes=o.childLanes&~u,s.memoizedState=uf,g}return E=o.child,o=E.sibling,g=wi(E,{mode:"visible",children:g.children}),(s.mode&1)===0&&(g.lanes=u),g.return=s,g.sibling=null,o!==null&&(u=s.deletions,u===null?(s.deletions=[o],s.flags|=16):u.push(o)),s.child=g,s.memoizedState=null,g}function df(o,s){return s=Fu({mode:"visible",children:s},o.mode,0,null),s.return=o,o.child=s}function Cu(o,s,u,g){return g!==null&&Ud(g),ds(s,o.child,null,u),o=df(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function ES(o,s,u,g,v,E,w){if(u)return s.flags&256?(s.flags&=-257,g=of(Error(t(422))),Cu(o,s,w,g)):s.memoizedState!==null?(s.child=o.child,s.flags|=128,null):(E=g.fallback,v=s.mode,g=Fu({mode:"visible",children:g.children},v,0,null),E=po(E,v,w,null),E.flags|=2,g.return=s,E.return=s,g.sibling=E,s.child=g,(s.mode&1)!==0&&ds(s,o.child,null,w),s.child.memoizedState=cf(w),s.memoizedState=uf,E);if((s.mode&1)===0)return Cu(o,s,w,null);if(v.data==="$!"){if(g=v.nextSibling&&v.nextSibling.dataset,g)var x=g.dgst;return g=x,E=Error(t(419)),g=of(E,g,void 0),Cu(o,s,w,g)}if(x=(w&o.childLanes)!==0,en||x){if(g=St,g!==null){switch(w&-w){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(g.suspendedLanes|w))!==0?0:v,v!==0&&v!==E.retryLane&&(E.retryLane=v,xr(o,v),bn(g,o,v,-1))}return Rf(),g=of(Error(t(421))),Cu(o,s,w,g)}return v.data==="$?"?(s.flags|=128,s.child=o.child,s=DS.bind(null,o),v._reactRetry=s,null):(o=E.treeContext,pn=hi(v.nextSibling),hn=s,nt=!0,Mn=null,o!==null&&(_n[En++]=Nr,_n[En++]=kr,_n[En++]=io,Nr=o.id,kr=o.overflow,io=s),s=df(s,g.children),s.flags|=4096,s)}function Eg(o,s,u){o.lanes|=s;var g=o.alternate;g!==null&&(g.lanes|=s),Bd(o.return,s,u)}function ff(o,s,u,g,v){var E=o.memoizedState;E===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:v}:(E.isBackwards=s,E.rendering=null,E.renderingStartTime=0,E.last=g,E.tail=u,E.tailMode=v)}function Tg(o,s,u){var g=s.pendingProps,v=g.revealOrder,E=g.tail;if(Kt(o,s,g.children,u),g=ot.current,(g&2)!==0)g=g&1|2,s.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Eg(o,u,s);else if(o.tag===19)Eg(o,u,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}if(Qe(ot,g),(s.mode&1)===0)s.memoizedState=null;else switch(v){case"forwards":for(u=s.child,v=null;u!==null;)o=u.alternate,o!==null&&vu(o)===null&&(v=u),u=u.sibling;u=v,u===null?(v=s.child,s.child=null):(v=u.sibling,u.sibling=null),ff(s,!1,v,u,E);break;case"backwards":for(u=null,v=s.child,s.child=null;v!==null;){if(o=v.alternate,o!==null&&vu(o)===null){s.child=v;break}o=v.sibling,v.sibling=u,u=v,v=o}ff(s,!0,u,null,E);break;case"together":ff(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Au(o,s){(s.mode&1)===0&&o!==null&&(o.alternate=null,s.alternate=null,s.flags|=2)}function Dr(o,s,u){if(o!==null&&(s.dependencies=o.dependencies),uo|=s.lanes,(u&s.childLanes)===0)return null;if(o!==null&&s.child!==o.child)throw Error(t(153));if(s.child!==null){for(o=s.child,u=wi(o,o.pendingProps),s.child=u,u.return=s;o.sibling!==null;)o=o.sibling,u=u.sibling=wi(o,o.pendingProps),u.return=s;u.sibling=null}return s.child}function TS(o,s,u){switch(s.tag){case 3:yg(s),cs();break;case 5:Vm(s);break;case 1:jt(s.type)&&lu(s);break;case 4:zd(s,s.stateNode.containerInfo);break;case 10:var g=s.type._context,v=s.memoizedProps.value;Qe(pu,g._currentValue),g._currentValue=v;break;case 13:if(g=s.memoizedState,g!==null)return g.dehydrated!==null?(Qe(ot,ot.current&1),s.flags|=128,null):(u&s.child.childLanes)!==0?_g(o,s,u):(Qe(ot,ot.current&1),o=Dr(o,s,u),o!==null?o.sibling:null);Qe(ot,ot.current&1);break;case 19:if(g=(u&s.childLanes)!==0,(o.flags&128)!==0){if(g)return Tg(o,s,u);s.flags|=128}if(v=s.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Qe(ot,ot.current),g)break;return null;case 22:case 23:return s.lanes=0,pg(o,s,u)}return Dr(o,s,u)}var Ig,hf,Sg,wg;Ig=function(o,s){for(var u=s.child;u!==null;){if(u.tag===5||u.tag===6)o.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},hf=function(){},Sg=function(o,s,u,g){var v=o.memoizedProps;if(v!==g){o=s.stateNode,ao(lr.current);var E=null;switch(u){case"input":v=Do(o,v),g=Do(o,g),E=[];break;case"select":v=ce({},v,{value:void 0}),g=ce({},g,{value:void 0}),E=[];break;case"textarea":v=js(o,v),g=js(o,g),E=[];break;default:typeof v.onClick!="function"&&typeof g.onClick=="function"&&(o.onclick=ou)}Pn(u,g);var w;u=null;for($ in v)if(!g.hasOwnProperty($)&&v.hasOwnProperty($)&&v[$]!=null)if($==="style"){var x=v[$];for(w in x)x.hasOwnProperty(w)&&(u||(u={}),u[w]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(i.hasOwnProperty($)?E||(E=[]):(E=E||[]).push($,null));for($ in g){var U=g[$];if(x=v?.[$],g.hasOwnProperty($)&&U!==x&&(U!=null||x!=null))if($==="style")if(x){for(w in x)!x.hasOwnProperty(w)||U&&U.hasOwnProperty(w)||(u||(u={}),u[w]="");for(w in U)U.hasOwnProperty(w)&&x[w]!==U[w]&&(u||(u={}),u[w]=U[w])}else u||(E||(E=[]),E.push($,u)),u=U;else $==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,x=x?x.__html:void 0,U!=null&&x!==U&&(E=E||[]).push($,U)):$==="children"?typeof U!="string"&&typeof U!="number"||(E=E||[]).push($,""+U):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(i.hasOwnProperty($)?(U!=null&&$==="onScroll"&&je("scroll",o),E||x===U||(E=[])):(E=E||[]).push($,U))}u&&(E=E||[]).push("style",u);var $=E;(s.updateQueue=$)&&(s.flags|=4)}},wg=function(o,s,u,g){u!==g&&(s.flags|=4)};function Oa(o,s){if(!nt)switch(o.tailMode){case"hidden":s=o.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?o.tail=null:u.sibling=null;break;case"collapsed":u=o.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function Gt(o){var s=o.alternate!==null&&o.alternate.child===o.child,u=0,g=0;if(s)for(var v=o.child;v!==null;)u|=v.lanes|v.childLanes,g|=v.subtreeFlags&14680064,g|=v.flags&14680064,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)u|=v.lanes|v.childLanes,g|=v.subtreeFlags,g|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=g,o.childLanes=u,s}function IS(o,s,u){var g=s.pendingProps;switch(Ld(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(s),null;case 1:return jt(s.type)&&au(),Gt(s),null;case 3:return g=s.stateNode,ps(),et(Zt),et(Ft),Jd(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(fu(s)?s.flags|=4:o===null||o.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Mn!==null&&(wf(Mn),Mn=null))),hf(o,s),Gt(s),null;case 5:$d(s);var v=ao(La.current);if(u=s.type,o!==null&&s.stateNode!=null)Sg(o,s,u,g,v),o.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!g){if(s.stateNode===null)throw Error(t(166));return Gt(s),null}if(o=ao(lr.current),fu(s)){g=s.stateNode,u=s.type;var E=s.memoizedProps;switch(g[ar]=s,g[Na]=E,o=(s.mode&1)!==0,u){case"dialog":je("cancel",g),je("close",g);break;case"iframe":case"object":case"embed":je("load",g);break;case"video":case"audio":for(v=0;v<Aa.length;v++)je(Aa[v],g);break;case"source":je("error",g);break;case"img":case"image":case"link":je("error",g),je("load",g);break;case"details":je("toggle",g);break;case"input":kl(g,E),je("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!E.multiple},je("invalid",g);break;case"textarea":ea(g,E),je("invalid",g)}Pn(u,E),v=null;for(var w in E)if(E.hasOwnProperty(w)){var x=E[w];w==="children"?typeof x=="string"?g.textContent!==x&&(E.suppressHydrationWarning!==!0&&iu(g.textContent,x,o),v=["children",x]):typeof x=="number"&&g.textContent!==""+x&&(E.suppressHydrationWarning!==!0&&iu(g.textContent,x,o),v=["children",""+x]):i.hasOwnProperty(w)&&x!=null&&w==="onScroll"&&je("scroll",g)}switch(u){case"input":Mo(g),Zs(g,E,!0);break;case"textarea":Mo(g),Xr(g);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(g.onclick=ou)}g=v,s.updateQueue=g,g!==null&&(s.flags|=4)}else{w=v.nodeType===9?v:v.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=ta(u)),o==="http://www.w3.org/1999/xhtml"?u==="script"?(o=w.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof g.is=="string"?o=w.createElement(u,{is:g.is}):(o=w.createElement(u),u==="select"&&(w=o,g.multiple?w.multiple=!0:g.size&&(w.size=g.size))):o=w.createElementNS(o,u),o[ar]=s,o[Na]=g,Ig(o,s,!1,!1),s.stateNode=o;e:{switch(w=Uo(u,g),u){case"dialog":je("cancel",o),je("close",o),v=g;break;case"iframe":case"object":case"embed":je("load",o),v=g;break;case"video":case"audio":for(v=0;v<Aa.length;v++)je(Aa[v],o);v=g;break;case"source":je("error",o),v=g;break;case"img":case"image":case"link":je("error",o),je("load",o),v=g;break;case"details":je("toggle",o),v=g;break;case"input":kl(o,g),v=Do(o,g),je("invalid",o);break;case"option":v=g;break;case"select":o._wrapperState={wasMultiple:!!g.multiple},v=ce({},g,{value:void 0}),je("invalid",o);break;case"textarea":ea(o,g),v=js(o,g),je("invalid",o);break;default:v=g}Pn(u,v),x=v;for(E in x)if(x.hasOwnProperty(E)){var U=x[E];E==="style"?bo(o,U):E==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&Ml(o,U)):E==="children"?typeof U=="string"?(u!=="textarea"||U!=="")&&Hi(o,U):typeof U=="number"&&Hi(o,""+U):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(i.hasOwnProperty(E)?U!=null&&E==="onScroll"&&je("scroll",o):U!=null&&Y(o,E,U,w))}switch(u){case"input":Mo(o),Zs(o,g,!1);break;case"textarea":Mo(o),Xr(o);break;case"option":g.value!=null&&o.setAttribute("value",""+Ue(g.value));break;case"select":o.multiple=!!g.multiple,E=g.value,E!=null?Rn(o,!!g.multiple,E,!1):g.defaultValue!=null&&Rn(o,!!g.multiple,g.defaultValue,!0);break;default:typeof v.onClick=="function"&&(o.onclick=ou)}switch(u){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Gt(s),null;case 6:if(o&&s.stateNode!=null)wg(o,s,o.memoizedProps,g);else{if(typeof g!="string"&&s.stateNode===null)throw Error(t(166));if(u=ao(La.current),ao(lr.current),fu(s)){if(g=s.stateNode,u=s.memoizedProps,g[ar]=s,(E=g.nodeValue!==u)&&(o=hn,o!==null))switch(o.tag){case 3:iu(g.nodeValue,u,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&iu(g.nodeValue,u,(o.mode&1)!==0)}E&&(s.flags|=4)}else g=(u.nodeType===9?u:u.ownerDocument).createTextNode(g),g[ar]=s,s.stateNode=g}return Gt(s),null;case 13:if(et(ot),g=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(nt&&pn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Rm(),cs(),s.flags|=98560,E=!1;else if(E=fu(s),g!==null&&g.dehydrated!==null){if(o===null){if(!E)throw Error(t(318));if(E=s.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(t(317));E[ar]=s}else cs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Gt(s),E=!1}else Mn!==null&&(wf(Mn),Mn=null),E=!0;if(!E)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=u,s):(g=g!==null,g!==(o!==null&&o.memoizedState!==null)&&g&&(s.child.flags|=8192,(s.mode&1)!==0&&(o===null||(ot.current&1)!==0?Et===0&&(Et=3):Rf())),s.updateQueue!==null&&(s.flags|=4),Gt(s),null);case 4:return ps(),hf(o,s),o===null&&Ra(s.stateNode.containerInfo),Gt(s),null;case 10:return Gd(s.type._context),Gt(s),null;case 17:return jt(s.type)&&au(),Gt(s),null;case 19:if(et(ot),E=s.memoizedState,E===null)return Gt(s),null;if(g=(s.flags&128)!==0,w=E.rendering,w===null)if(g)Oa(E,!1);else{if(Et!==0||o!==null&&(o.flags&128)!==0)for(o=s.child;o!==null;){if(w=vu(o),w!==null){for(s.flags|=128,Oa(E,!1),g=w.updateQueue,g!==null&&(s.updateQueue=g,s.flags|=4),s.subtreeFlags=0,g=u,u=s.child;u!==null;)E=u,o=g,E.flags&=14680066,w=E.alternate,w===null?(E.childLanes=0,E.lanes=o,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=w.childLanes,E.lanes=w.lanes,E.child=w.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=w.memoizedProps,E.memoizedState=w.memoizedState,E.updateQueue=w.updateQueue,E.type=w.type,o=w.dependencies,E.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),u=u.sibling;return Qe(ot,ot.current&1|2),s.child}o=o.sibling}E.tail!==null&&Ze()>vs&&(s.flags|=128,g=!0,Oa(E,!1),s.lanes=4194304)}else{if(!g)if(o=vu(w),o!==null){if(s.flags|=128,g=!0,u=o.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),Oa(E,!0),E.tail===null&&E.tailMode==="hidden"&&!w.alternate&&!nt)return Gt(s),null}else 2*Ze()-E.renderingStartTime>vs&&u!==1073741824&&(s.flags|=128,g=!0,Oa(E,!1),s.lanes=4194304);E.isBackwards?(w.sibling=s.child,s.child=w):(u=E.last,u!==null?u.sibling=w:s.child=w,E.last=w)}return E.tail!==null?(s=E.tail,E.rendering=s,E.tail=s.sibling,E.renderingStartTime=Ze(),s.sibling=null,u=ot.current,Qe(ot,g?u&1|2:u&1),s):(Gt(s),null);case 22:case 23:return Af(),g=s.memoizedState!==null,o!==null&&o.memoizedState!==null!==g&&(s.flags|=8192),g&&(s.mode&1)!==0?(mn&1073741824)!==0&&(Gt(s),s.subtreeFlags&6&&(s.flags|=8192)):Gt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function SS(o,s){switch(Ld(s),s.tag){case 1:return jt(s.type)&&au(),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return ps(),et(Zt),et(Ft),Jd(),o=s.flags,(o&65536)!==0&&(o&128)===0?(s.flags=o&-65537|128,s):null;case 5:return $d(s),null;case 13:if(et(ot),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(t(340));cs()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return et(ot),null;case 4:return ps(),null;case 10:return Gd(s.type._context),null;case 22:case 23:return Af(),null;case 24:return null;default:return null}}var Ru=!1,Bt=!1,wS=typeof WeakSet=="function"?WeakSet:Set,fe=null;function gs(o,s){var u=o.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(g){ut(o,s,g)}else u.current=null}function pf(o,s,u){try{u()}catch(g){ut(o,s,g)}}var Cg=!1;function CS(o,s){if(Cd=wr,o=rm(),yd(o)){if("selectionStart"in o)var u={start:o.selectionStart,end:o.selectionEnd};else e:{u=(u=o.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var v=g.anchorOffset,E=g.focusNode;g=g.focusOffset;try{u.nodeType,E.nodeType}catch{u=null;break e}var w=0,x=-1,U=-1,$=0,ee=0,ne=o,j=null;t:for(;;){for(var de;ne!==u||v!==0&&ne.nodeType!==3||(x=w+v),ne!==E||g!==0&&ne.nodeType!==3||(U=w+g),ne.nodeType===3&&(w+=ne.nodeValue.length),(de=ne.firstChild)!==null;)j=ne,ne=de;for(;;){if(ne===o)break t;if(j===u&&++$===v&&(x=w),j===E&&++ee===g&&(U=w),(de=ne.nextSibling)!==null)break;ne=j,j=ne.parentNode}ne=de}u=x===-1||U===-1?null:{start:x,end:U}}else u=null}u=u||{start:0,end:0}}else u=null;for(Ad={focusedElem:o,selectionRange:u},wr=!1,fe=s;fe!==null;)if(s=fe,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,fe=o;else for(;fe!==null;){s=fe;try{var pe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var me=pe.memoizedProps,ht=pe.memoizedState,H=s.stateNode,O=H.getSnapshotBeforeUpdate(s.elementType===s.type?me:Dn(s.type,me),ht);H.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ie){ut(s,s.return,ie)}if(o=s.sibling,o!==null){o.return=s.return,fe=o;break}fe=s.return}return pe=Cg,Cg=!1,pe}function Ga(o,s,u){var g=s.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var v=g=g.next;do{if((v.tag&o)===o){var E=v.destroy;v.destroy=void 0,E!==void 0&&pf(s,u,E)}v=v.next}while(v!==g)}}function Pu(o,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&o)===o){var g=u.create;u.destroy=g()}u=u.next}while(u!==s)}}function mf(o){var s=o.ref;if(s!==null){var u=o.stateNode;o.tag,o=u,typeof s=="function"?s(o):s.current=o}}function Ag(o){var s=o.alternate;s!==null&&(o.alternate=null,Ag(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&(delete s[ar],delete s[Na],delete s[kd],delete s[aS],delete s[lS])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Rg(o){return o.tag===5||o.tag===3||o.tag===4}function Pg(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Rg(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function gf(o,s,u){var g=o.tag;if(g===5||g===6)o=o.stateNode,s?u.nodeType===8?u.parentNode.insertBefore(o,s):u.insertBefore(o,s):(u.nodeType===8?(s=u.parentNode,s.insertBefore(o,u)):(s=u,s.appendChild(o)),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=ou));else if(g!==4&&(o=o.child,o!==null))for(gf(o,s,u),o=o.sibling;o!==null;)gf(o,s,u),o=o.sibling}function yf(o,s,u){var g=o.tag;if(g===5||g===6)o=o.stateNode,s?u.insertBefore(o,s):u.appendChild(o);else if(g!==4&&(o=o.child,o!==null))for(yf(o,s,u),o=o.sibling;o!==null;)yf(o,s,u),o=o.sibling}var xt=null,Ln=!1;function _i(o,s,u){for(u=u.child;u!==null;)Ng(o,s,u),u=u.sibling}function Ng(o,s,u){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Ji,u)}catch{}switch(u.tag){case 5:Bt||gs(u,s);case 6:var g=xt,v=Ln;xt=null,_i(o,s,u),xt=g,Ln=v,xt!==null&&(Ln?(o=xt,u=u.stateNode,o.nodeType===8?o.parentNode.removeChild(u):o.removeChild(u)):xt.removeChild(u.stateNode));break;case 18:xt!==null&&(Ln?(o=xt,u=u.stateNode,o.nodeType===8?Nd(o.parentNode,u):o.nodeType===1&&Nd(o,u),ui(o)):Nd(xt,u.stateNode));break;case 4:g=xt,v=Ln,xt=u.stateNode.containerInfo,Ln=!0,_i(o,s,u),xt=g,Ln=v;break;case 0:case 11:case 14:case 15:if(!Bt&&(g=u.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){v=g=g.next;do{var E=v,w=E.destroy;E=E.tag,w!==void 0&&((E&2)!==0||(E&4)!==0)&&pf(u,s,w),v=v.next}while(v!==g)}_i(o,s,u);break;case 1:if(!Bt&&(gs(u,s),g=u.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=u.memoizedProps,g.state=u.memoizedState,g.componentWillUnmount()}catch(x){ut(u,s,x)}_i(o,s,u);break;case 21:_i(o,s,u);break;case 22:u.mode&1?(Bt=(g=Bt)||u.memoizedState!==null,_i(o,s,u),Bt=g):_i(o,s,u);break;default:_i(o,s,u)}}function kg(o){var s=o.updateQueue;if(s!==null){o.updateQueue=null;var u=o.stateNode;u===null&&(u=o.stateNode=new wS),s.forEach(function(g){var v=LS.bind(null,o,g);u.has(g)||(u.add(g),g.then(v,v))})}}function Vn(o,s){var u=s.deletions;if(u!==null)for(var g=0;g<u.length;g++){var v=u[g];try{var E=o,w=s,x=w;e:for(;x!==null;){switch(x.tag){case 5:xt=x.stateNode,Ln=!1;break e;case 3:xt=x.stateNode.containerInfo,Ln=!0;break e;case 4:xt=x.stateNode.containerInfo,Ln=!0;break e}x=x.return}if(xt===null)throw Error(t(160));Ng(E,w,v),xt=null,Ln=!1;var U=v.alternate;U!==null&&(U.return=null),v.return=null}catch($){ut(v,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)xg(s,o),s=s.sibling}function xg(o,s){var u=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Vn(s,o),cr(o),g&4){try{Ga(3,o,o.return),Pu(3,o)}catch(me){ut(o,o.return,me)}try{Ga(5,o,o.return)}catch(me){ut(o,o.return,me)}}break;case 1:Vn(s,o),cr(o),g&512&&u!==null&&gs(u,u.return);break;case 5:if(Vn(s,o),cr(o),g&512&&u!==null&&gs(u,u.return),o.flags&32){var v=o.stateNode;try{Hi(v,"")}catch(me){ut(o,o.return,me)}}if(g&4&&(v=o.stateNode,v!=null)){var E=o.memoizedProps,w=u!==null?u.memoizedProps:E,x=o.type,U=o.updateQueue;if(o.updateQueue=null,U!==null)try{x==="input"&&E.type==="radio"&&E.name!=null&&Lo(v,E),Uo(x,w);var $=Uo(x,E);for(w=0;w<U.length;w+=2){var ee=U[w],ne=U[w+1];ee==="style"?bo(v,ne):ee==="dangerouslySetInnerHTML"?Ml(v,ne):ee==="children"?Hi(v,ne):Y(v,ee,ne,$)}switch(x){case"input":Bi(v,E);break;case"textarea":xl(v,E);break;case"select":var j=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!E.multiple;var de=E.value;de!=null?Rn(v,!!E.multiple,de,!1):j!==!!E.multiple&&(E.defaultValue!=null?Rn(v,!!E.multiple,E.defaultValue,!0):Rn(v,!!E.multiple,E.multiple?[]:"",!1))}v[Na]=E}catch(me){ut(o,o.return,me)}}break;case 6:if(Vn(s,o),cr(o),g&4){if(o.stateNode===null)throw Error(t(162));v=o.stateNode,E=o.memoizedProps;try{v.nodeValue=E}catch(me){ut(o,o.return,me)}}break;case 3:if(Vn(s,o),cr(o),g&4&&u!==null&&u.memoizedState.isDehydrated)try{ui(s.containerInfo)}catch(me){ut(o,o.return,me)}break;case 4:Vn(s,o),cr(o);break;case 13:Vn(s,o),cr(o),v=o.child,v.flags&8192&&(E=v.memoizedState!==null,v.stateNode.isHidden=E,!E||v.alternate!==null&&v.alternate.memoizedState!==null||(Ef=Ze())),g&4&&kg(o);break;case 22:if(ee=u!==null&&u.memoizedState!==null,o.mode&1?(Bt=($=Bt)||ee,Vn(s,o),Bt=$):Vn(s,o),cr(o),g&8192){if($=o.memoizedState!==null,(o.stateNode.isHidden=$)&&!ee&&(o.mode&1)!==0)for(fe=o,ee=o.child;ee!==null;){for(ne=fe=ee;fe!==null;){switch(j=fe,de=j.child,j.tag){case 0:case 11:case 14:case 15:Ga(4,j,j.return);break;case 1:gs(j,j.return);var pe=j.stateNode;if(typeof pe.componentWillUnmount=="function"){g=j,u=j.return;try{s=g,pe.props=s.memoizedProps,pe.state=s.memoizedState,pe.componentWillUnmount()}catch(me){ut(g,u,me)}}break;case 5:gs(j,j.return);break;case 22:if(j.memoizedState!==null){Lg(ne);continue}}de!==null?(de.return=j,fe=de):Lg(ne)}ee=ee.sibling}e:for(ee=null,ne=o;;){if(ne.tag===5){if(ee===null){ee=ne;try{v=ne.stateNode,$?(E=v.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(x=ne.stateNode,U=ne.memoizedProps.style,w=U!=null&&U.hasOwnProperty("display")?U.display:null,x.style.display=ei("display",w))}catch(me){ut(o,o.return,me)}}}else if(ne.tag===6){if(ee===null)try{ne.stateNode.nodeValue=$?"":ne.memoizedProps}catch(me){ut(o,o.return,me)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===o)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===o)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===o)break e;ee===ne&&(ee=null),ne=ne.return}ee===ne&&(ee=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:Vn(s,o),cr(o),g&4&&kg(o);break;case 21:break;default:Vn(s,o),cr(o)}}function cr(o){var s=o.flags;if(s&2){try{e:{for(var u=o.return;u!==null;){if(Rg(u)){var g=u;break e}u=u.return}throw Error(t(160))}switch(g.tag){case 5:var v=g.stateNode;g.flags&32&&(Hi(v,""),g.flags&=-33);var E=Pg(o);yf(o,E,v);break;case 3:case 4:var w=g.stateNode.containerInfo,x=Pg(o);gf(o,x,w);break;default:throw Error(t(161))}}catch(U){ut(o,o.return,U)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function AS(o,s,u){fe=o,Mg(o)}function Mg(o,s,u){for(var g=(o.mode&1)!==0;fe!==null;){var v=fe,E=v.child;if(v.tag===22&&g){var w=v.memoizedState!==null||Ru;if(!w){var x=v.alternate,U=x!==null&&x.memoizedState!==null||Bt;x=Ru;var $=Bt;if(Ru=w,(Bt=U)&&!$)for(fe=v;fe!==null;)w=fe,U=w.child,w.tag===22&&w.memoizedState!==null?Vg(v):U!==null?(U.return=w,fe=U):Vg(v);for(;E!==null;)fe=E,Mg(E),E=E.sibling;fe=v,Ru=x,Bt=$}Dg(o)}else(v.subtreeFlags&8772)!==0&&E!==null?(E.return=v,fe=E):Dg(o)}}function Dg(o){for(;fe!==null;){var s=fe;if((s.flags&8772)!==0){var u=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Bt||Pu(5,s);break;case 1:var g=s.stateNode;if(s.flags&4&&!Bt)if(u===null)g.componentDidMount();else{var v=s.elementType===s.type?u.memoizedProps:Dn(s.type,u.memoizedProps);g.componentDidUpdate(v,u.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var E=s.updateQueue;E!==null&&Lm(s,E,g);break;case 3:var w=s.updateQueue;if(w!==null){if(u=null,s.child!==null)switch(s.child.tag){case 5:u=s.child.stateNode;break;case 1:u=s.child.stateNode}Lm(s,w,u)}break;case 5:var x=s.stateNode;if(u===null&&s.flags&4){u=x;var U=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&u.focus();break;case"img":U.src&&(u.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var ee=$.memoizedState;if(ee!==null){var ne=ee.dehydrated;ne!==null&&ui(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Bt||s.flags&512&&mf(s)}catch(j){ut(s,s.return,j)}}if(s===o){fe=null;break}if(u=s.sibling,u!==null){u.return=s.return,fe=u;break}fe=s.return}}function Lg(o){for(;fe!==null;){var s=fe;if(s===o){fe=null;break}var u=s.sibling;if(u!==null){u.return=s.return,fe=u;break}fe=s.return}}function Vg(o){for(;fe!==null;){var s=fe;try{switch(s.tag){case 0:case 11:case 15:var u=s.return;try{Pu(4,s)}catch(U){ut(s,u,U)}break;case 1:var g=s.stateNode;if(typeof g.componentDidMount=="function"){var v=s.return;try{g.componentDidMount()}catch(U){ut(s,v,U)}}var E=s.return;try{mf(s)}catch(U){ut(s,E,U)}break;case 5:var w=s.return;try{mf(s)}catch(U){ut(s,w,U)}}}catch(U){ut(s,s.return,U)}if(s===o){fe=null;break}var x=s.sibling;if(x!==null){x.return=s.return,fe=x;break}fe=s.return}}var RS=Math.ceil,Nu=Q.ReactCurrentDispatcher,vf=Q.ReactCurrentOwner,Sn=Q.ReactCurrentBatchConfig,Fe=0,St=null,gt=null,Mt=0,mn=0,ys=pi(0),Et=0,Ba=null,uo=0,ku=0,_f=0,Ha=null,tn=null,Ef=0,vs=1/0,Lr=null,xu=!1,Tf=null,Ei=null,Mu=!1,Ti=null,Du=0,qa=0,If=null,Lu=-1,Vu=0;function Yt(){return(Fe&6)!==0?Ze():Lu!==-1?Lu:Lu=Ze()}function Ii(o){return(o.mode&1)===0?1:(Fe&2)!==0&&Mt!==0?Mt&-Mt:cS.transition!==null?(Vu===0&&(Vu=ca()),Vu):(o=Ve,o!==0||(o=window.event,o=o===void 0?16:Jo(o.type)),o)}function bn(o,s,u,g){if(50<qa)throw qa=0,If=null,Error(t(185));Xi(o,u,g),((Fe&2)===0||o!==St)&&(o===St&&((Fe&2)===0&&(ku|=u),Et===4&&Si(o,Mt)),nn(o,g),u===1&&Fe===0&&(s.mode&1)===0&&(vs=Ze()+500,uu&&gi()))}function nn(o,s){var u=o.callbackNode;Qi(o,s);var g=Tr(o,o===St?Mt:0);if(g===0)u!==null&&Go(u),o.callbackNode=null,o.callbackPriority=0;else if(s=g&-g,o.callbackPriority!==s){if(u!=null&&Go(u),s===1)o.tag===0?uS(Ug.bind(null,o)):Im(Ug.bind(null,o)),oS(function(){(Fe&6)===0&&gi()}),u=null;else{switch(Xn(g)){case 1:u=Bo;break;case 4:u=aa;break;case 16:u=Wi;break;case 536870912:u=Ho;break;default:u=Wi}u=$g(u,bg.bind(null,o))}o.callbackPriority=s,o.callbackNode=u}}function bg(o,s){if(Lu=-1,Vu=0,(Fe&6)!==0)throw Error(t(327));var u=o.callbackNode;if(_s()&&o.callbackNode!==u)return null;var g=Tr(o,o===St?Mt:0);if(g===0)return null;if((g&30)!==0||(g&o.expiredLanes)!==0||s)s=bu(o,g);else{s=g;var v=Fe;Fe|=2;var E=Og();(St!==o||Mt!==s)&&(Lr=null,vs=Ze()+500,fo(o,s));do try{kS();break}catch(x){Fg(o,x)}while(!0);Od(),Nu.current=E,Fe=v,gt!==null?s=0:(St=null,Mt=0,s=Et)}if(s!==0){if(s===2&&(v=ua(o),v!==0&&(g=v,s=Sf(o,v))),s===1)throw u=Ba,fo(o,0),Si(o,g),nn(o,Ze()),u;if(s===6)Si(o,g);else{if(v=o.current.alternate,(g&30)===0&&!PS(v)&&(s=bu(o,g),s===2&&(E=ua(o),E!==0&&(g=E,s=Sf(o,E))),s===1))throw u=Ba,fo(o,0),Si(o,g),nn(o,Ze()),u;switch(o.finishedWork=v,o.finishedLanes=g,s){case 0:case 1:throw Error(t(345));case 2:ho(o,tn,Lr);break;case 3:if(Si(o,g),(g&130023424)===g&&(s=Ef+500-Ze(),10<s)){if(Tr(o,0)!==0)break;if(v=o.suspendedLanes,(v&g)!==g){Yt(),o.pingedLanes|=o.suspendedLanes&v;break}o.timeoutHandle=Pd(ho.bind(null,o,tn,Lr),s);break}ho(o,tn,Lr);break;case 4:if(Si(o,g),(g&4194240)===g)break;for(s=o.eventTimes,v=-1;0<g;){var w=31-ln(g);E=1<<w,w=s[w],w>v&&(v=w),g&=~E}if(g=v,g=Ze()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*RS(g/1960))-g,10<g){o.timeoutHandle=Pd(ho.bind(null,o,tn,Lr),g);break}ho(o,tn,Lr);break;case 5:ho(o,tn,Lr);break;default:throw Error(t(329))}}}return nn(o,Ze()),o.callbackNode===u?bg.bind(null,o):null}function Sf(o,s){var u=Ha;return o.current.memoizedState.isDehydrated&&(fo(o,s).flags|=256),o=bu(o,s),o!==2&&(s=tn,tn=u,s!==null&&wf(s)),o}function wf(o){tn===null?tn=o:tn.push.apply(tn,o)}function PS(o){for(var s=o;;){if(s.flags&16384){var u=s.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var g=0;g<u.length;g++){var v=u[g],E=v.getSnapshot;v=v.value;try{if(!xn(E(),v))return!1}catch{return!1}}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Si(o,s){for(s&=~_f,s&=~ku,o.suspendedLanes|=s,o.pingedLanes&=~s,o=o.expirationTimes;0<s;){var u=31-ln(s),g=1<<u;o[u]=-1,s&=~g}}function Ug(o){if((Fe&6)!==0)throw Error(t(327));_s();var s=Tr(o,0);if((s&1)===0)return nn(o,Ze()),null;var u=bu(o,s);if(o.tag!==0&&u===2){var g=ua(o);g!==0&&(s=g,u=Sf(o,g))}if(u===1)throw u=Ba,fo(o,0),Si(o,s),nn(o,Ze()),u;if(u===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=s,ho(o,tn,Lr),nn(o,Ze()),null}function Cf(o,s){var u=Fe;Fe|=1;try{return o(s)}finally{Fe=u,Fe===0&&(vs=Ze()+500,uu&&gi())}}function co(o){Ti!==null&&Ti.tag===0&&(Fe&6)===0&&_s();var s=Fe;Fe|=1;var u=Sn.transition,g=Ve;try{if(Sn.transition=null,Ve=1,o)return o()}finally{Ve=g,Sn.transition=u,Fe=s,(Fe&6)===0&&gi()}}function Af(){mn=ys.current,et(ys)}function fo(o,s){o.finishedWork=null,o.finishedLanes=0;var u=o.timeoutHandle;if(u!==-1&&(o.timeoutHandle=-1,iS(u)),gt!==null)for(u=gt.return;u!==null;){var g=u;switch(Ld(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&au();break;case 3:ps(),et(Zt),et(Ft),Jd();break;case 5:$d(g);break;case 4:ps();break;case 13:et(ot);break;case 19:et(ot);break;case 10:Gd(g.type._context);break;case 22:case 23:Af()}u=u.return}if(St=o,gt=o=wi(o.current,null),Mt=mn=s,Et=0,Ba=null,_f=ku=uo=0,tn=Ha=null,so!==null){for(s=0;s<so.length;s++)if(u=so[s],g=u.interleaved,g!==null){u.interleaved=null;var v=g.next,E=u.pending;if(E!==null){var w=E.next;E.next=v,g.next=w}u.pending=g}so=null}return o}function Fg(o,s){do{var u=gt;try{if(Od(),_u.current=Su,Eu){for(var g=st.memoizedState;g!==null;){var v=g.queue;v!==null&&(v.pending=null),g=g.next}Eu=!1}if(lo=0,It=_t=st=null,Va=!1,ba=0,vf.current=null,u===null||u.return===null){Et=1,Ba=s,gt=null;break}e:{var E=o,w=u.return,x=u,U=s;if(s=Mt,x.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var $=U,ee=x,ne=ee.tag;if((ee.mode&1)===0&&(ne===0||ne===11||ne===15)){var j=ee.alternate;j?(ee.updateQueue=j.updateQueue,ee.memoizedState=j.memoizedState,ee.lanes=j.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var de=ug(w);if(de!==null){de.flags&=-257,cg(de,w,x,E,s),de.mode&1&&lg(E,$,s),s=de,U=$;var pe=s.updateQueue;if(pe===null){var me=new Set;me.add(U),s.updateQueue=me}else pe.add(U);break e}else{if((s&1)===0){lg(E,$,s),Rf();break e}U=Error(t(426))}}else if(nt&&x.mode&1){var ht=ug(w);if(ht!==null){(ht.flags&65536)===0&&(ht.flags|=256),cg(ht,w,x,E,s),Ud(ms(U,x));break e}}E=U=ms(U,x),Et!==4&&(Et=2),Ha===null?Ha=[E]:Ha.push(E),E=w;do{switch(E.tag){case 3:E.flags|=65536,s&=-s,E.lanes|=s;var H=sg(E,U,s);Dm(E,H);break e;case 1:x=U;var O=E.type,z=E.stateNode;if((E.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Ei===null||!Ei.has(z)))){E.flags|=65536,s&=-s,E.lanes|=s;var ie=ag(E,x,s);Dm(E,ie);break e}}E=E.return}while(E!==null)}Bg(u)}catch(ye){s=ye,gt===u&&u!==null&&(gt=u=u.return);continue}break}while(!0)}function Og(){var o=Nu.current;return Nu.current=Su,o===null?Su:o}function Rf(){(Et===0||Et===3||Et===2)&&(Et=4),St===null||(uo&268435455)===0&&(ku&268435455)===0||Si(St,Mt)}function bu(o,s){var u=Fe;Fe|=2;var g=Og();(St!==o||Mt!==s)&&(Lr=null,fo(o,s));do try{NS();break}catch(v){Fg(o,v)}while(!0);if(Od(),Fe=u,Nu.current=g,gt!==null)throw Error(t(261));return St=null,Mt=0,Et}function NS(){for(;gt!==null;)Gg(gt)}function kS(){for(;gt!==null&&!$i();)Gg(gt)}function Gg(o){var s=zg(o.alternate,o,mn);o.memoizedProps=o.pendingProps,s===null?Bg(o):gt=s,vf.current=null}function Bg(o){var s=o;do{var u=s.alternate;if(o=s.return,(s.flags&32768)===0){if(u=IS(u,s,mn),u!==null){gt=u;return}}else{if(u=SS(u,s),u!==null){u.flags&=32767,gt=u;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Et=6,gt=null;return}}if(s=s.sibling,s!==null){gt=s;return}gt=s=o}while(s!==null);Et===0&&(Et=5)}function ho(o,s,u){var g=Ve,v=Sn.transition;try{Sn.transition=null,Ve=1,xS(o,s,u,g)}finally{Sn.transition=v,Ve=g}return null}function xS(o,s,u,g){do _s();while(Ti!==null);if((Fe&6)!==0)throw Error(t(327));u=o.finishedWork;var v=o.finishedLanes;if(u===null)return null;if(o.finishedWork=null,o.finishedLanes=0,u===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var E=u.lanes|u.childLanes;if(fd(o,E),o===St&&(gt=St=null,Mt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Mu||(Mu=!0,$g(Wi,function(){return _s(),null})),E=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||E){E=Sn.transition,Sn.transition=null;var w=Ve;Ve=1;var x=Fe;Fe|=4,vf.current=null,CS(o,u),xg(u,o),XI(Ad),wr=!!Cd,Ad=Cd=null,o.current=u,AS(u),Er(),Fe=x,Ve=w,Sn.transition=E}else o.current=u;if(Mu&&(Mu=!1,Ti=o,Du=v),E=o.pendingLanes,E===0&&(Ei=null),ql(u.stateNode),nn(o,Ze()),s!==null)for(g=o.onRecoverableError,u=0;u<s.length;u++)v=s[u],g(v.value,{componentStack:v.stack,digest:v.digest});if(xu)throw xu=!1,o=Tf,Tf=null,o;return(Du&1)!==0&&o.tag!==0&&_s(),E=o.pendingLanes,(E&1)!==0?o===If?qa++:(qa=0,If=o):qa=0,gi(),null}function _s(){if(Ti!==null){var o=Xn(Du),s=Sn.transition,u=Ve;try{if(Sn.transition=null,Ve=16>o?16:o,Ti===null)var g=!1;else{if(o=Ti,Ti=null,Du=0,(Fe&6)!==0)throw Error(t(331));var v=Fe;for(Fe|=4,fe=o.current;fe!==null;){var E=fe,w=E.child;if((fe.flags&16)!==0){var x=E.deletions;if(x!==null){for(var U=0;U<x.length;U++){var $=x[U];for(fe=$;fe!==null;){var ee=fe;switch(ee.tag){case 0:case 11:case 15:Ga(8,ee,E)}var ne=ee.child;if(ne!==null)ne.return=ee,fe=ne;else for(;fe!==null;){ee=fe;var j=ee.sibling,de=ee.return;if(Ag(ee),ee===$){fe=null;break}if(j!==null){j.return=de,fe=j;break}fe=de}}}var pe=E.alternate;if(pe!==null){var me=pe.child;if(me!==null){pe.child=null;do{var ht=me.sibling;me.sibling=null,me=ht}while(me!==null)}}fe=E}}if((E.subtreeFlags&2064)!==0&&w!==null)w.return=E,fe=w;else e:for(;fe!==null;){if(E=fe,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:Ga(9,E,E.return)}var H=E.sibling;if(H!==null){H.return=E.return,fe=H;break e}fe=E.return}}var O=o.current;for(fe=O;fe!==null;){w=fe;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,fe=z;else e:for(w=O;fe!==null;){if(x=fe,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:Pu(9,x)}}catch(ye){ut(x,x.return,ye)}if(x===w){fe=null;break e}var ie=x.sibling;if(ie!==null){ie.return=x.return,fe=ie;break e}fe=x.return}}if(Fe=v,gi(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Ji,o)}catch{}g=!0}return g}finally{Ve=u,Sn.transition=s}}return!1}function Hg(o,s,u){s=ms(u,s),s=sg(o,s,1),o=vi(o,s,1),s=Yt(),o!==null&&(Xi(o,1,s),nn(o,s))}function ut(o,s,u){if(o.tag===3)Hg(o,o,u);else for(;s!==null;){if(s.tag===3){Hg(s,o,u);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ei===null||!Ei.has(g))){o=ms(u,o),o=ag(s,o,1),s=vi(s,o,1),o=Yt(),s!==null&&(Xi(s,1,o),nn(s,o));break}}s=s.return}}function MS(o,s,u){var g=o.pingCache;g!==null&&g.delete(s),s=Yt(),o.pingedLanes|=o.suspendedLanes&u,St===o&&(Mt&u)===u&&(Et===4||Et===3&&(Mt&130023424)===Mt&&500>Ze()-Ef?fo(o,0):_f|=u),nn(o,s)}function qg(o,s){s===0&&((o.mode&1)===0?s=1:(s=si,si<<=1,(si&130023424)===0&&(si=4194304)));var u=Yt();o=xr(o,s),o!==null&&(Xi(o,s,u),nn(o,u))}function DS(o){var s=o.memoizedState,u=0;s!==null&&(u=s.retryLane),qg(o,u)}function LS(o,s){var u=0;switch(o.tag){case 13:var g=o.stateNode,v=o.memoizedState;v!==null&&(u=v.retryLane);break;case 19:g=o.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(s),qg(o,u)}var zg;zg=function(o,s,u){if(o!==null)if(o.memoizedProps!==s.pendingProps||Zt.current)en=!0;else{if((o.lanes&u)===0&&(s.flags&128)===0)return en=!1,TS(o,s,u);en=(o.flags&131072)!==0}else en=!1,nt&&(s.flags&1048576)!==0&&Sm(s,du,s.index);switch(s.lanes=0,s.tag){case 2:var g=s.type;Au(o,s),o=s.pendingProps;var v=as(s,Ft.current);hs(s,u),v=Qd(null,s,g,o,v,u);var E=Xd();return s.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,jt(g)?(E=!0,lu(s)):E=!1,s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,qd(s),v.updater=wu,s.stateNode=v,v._reactInternals=s,rf(s,g,o,u),s=lf(null,s,g,!0,E,u)):(s.tag=0,nt&&E&&Dd(s),Kt(null,s,v,u),s=s.child),s;case 16:g=s.elementType;e:{switch(Au(o,s),o=s.pendingProps,v=g._init,g=v(g._payload),s.type=g,v=s.tag=bS(g),o=Dn(g,o),v){case 0:s=af(null,s,g,o,u);break e;case 1:s=gg(null,s,g,o,u);break e;case 11:s=dg(null,s,g,o,u);break e;case 14:s=fg(null,s,g,Dn(g.type,o),u);break e}throw Error(t(306,g,""))}return s;case 0:return g=s.type,v=s.pendingProps,v=s.elementType===g?v:Dn(g,v),af(o,s,g,v,u);case 1:return g=s.type,v=s.pendingProps,v=s.elementType===g?v:Dn(g,v),gg(o,s,g,v,u);case 3:e:{if(yg(s),o===null)throw Error(t(387));g=s.pendingProps,E=s.memoizedState,v=E.element,Mm(o,s),yu(s,g,null,u);var w=s.memoizedState;if(g=w.element,E.isDehydrated)if(E={element:g,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=E,s.memoizedState=E,s.flags&256){v=ms(Error(t(423)),s),s=vg(o,s,g,u,v);break e}else if(g!==v){v=ms(Error(t(424)),s),s=vg(o,s,g,u,v);break e}else for(pn=hi(s.stateNode.containerInfo.firstChild),hn=s,nt=!0,Mn=null,u=km(s,null,g,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(cs(),g===v){s=Dr(o,s,u);break e}Kt(o,s,g,u)}s=s.child}return s;case 5:return Vm(s),o===null&&bd(s),g=s.type,v=s.pendingProps,E=o!==null?o.memoizedProps:null,w=v.children,Rd(g,v)?w=null:E!==null&&Rd(g,E)&&(s.flags|=32),mg(o,s),Kt(o,s,w,u),s.child;case 6:return o===null&&bd(s),null;case 13:return _g(o,s,u);case 4:return zd(s,s.stateNode.containerInfo),g=s.pendingProps,o===null?s.child=ds(s,null,g,u):Kt(o,s,g,u),s.child;case 11:return g=s.type,v=s.pendingProps,v=s.elementType===g?v:Dn(g,v),dg(o,s,g,v,u);case 7:return Kt(o,s,s.pendingProps,u),s.child;case 8:return Kt(o,s,s.pendingProps.children,u),s.child;case 12:return Kt(o,s,s.pendingProps.children,u),s.child;case 10:e:{if(g=s.type._context,v=s.pendingProps,E=s.memoizedProps,w=v.value,Qe(pu,g._currentValue),g._currentValue=w,E!==null)if(xn(E.value,w)){if(E.children===v.children&&!Zt.current){s=Dr(o,s,u);break e}}else for(E=s.child,E!==null&&(E.return=s);E!==null;){var x=E.dependencies;if(x!==null){w=E.child;for(var U=x.firstContext;U!==null;){if(U.context===g){if(E.tag===1){U=Mr(-1,u&-u),U.tag=2;var $=E.updateQueue;if($!==null){$=$.shared;var ee=$.pending;ee===null?U.next=U:(U.next=ee.next,ee.next=U),$.pending=U}}E.lanes|=u,U=E.alternate,U!==null&&(U.lanes|=u),Bd(E.return,u,s),x.lanes|=u;break}U=U.next}}else if(E.tag===10)w=E.type===s.type?null:E.child;else if(E.tag===18){if(w=E.return,w===null)throw Error(t(341));w.lanes|=u,x=w.alternate,x!==null&&(x.lanes|=u),Bd(w,u,s),w=E.sibling}else w=E.child;if(w!==null)w.return=E;else for(w=E;w!==null;){if(w===s){w=null;break}if(E=w.sibling,E!==null){E.return=w.return,w=E;break}w=w.return}E=w}Kt(o,s,v.children,u),s=s.child}return s;case 9:return v=s.type,g=s.pendingProps.children,hs(s,u),v=Tn(v),g=g(v),s.flags|=1,Kt(o,s,g,u),s.child;case 14:return g=s.type,v=Dn(g,s.pendingProps),v=Dn(g.type,v),fg(o,s,g,v,u);case 15:return hg(o,s,s.type,s.pendingProps,u);case 17:return g=s.type,v=s.pendingProps,v=s.elementType===g?v:Dn(g,v),Au(o,s),s.tag=1,jt(g)?(o=!0,lu(s)):o=!1,hs(s,u),ig(s,g,v),rf(s,g,v,u),lf(null,s,g,!0,o,u);case 19:return Tg(o,s,u);case 22:return pg(o,s,u)}throw Error(t(156,s.tag))};function $g(o,s){return sa(o,s)}function VS(o,s,u,g){this.tag=o,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(o,s,u,g){return new VS(o,s,u,g)}function Pf(o){return o=o.prototype,!(!o||!o.isReactComponent)}function bS(o){if(typeof o=="function")return Pf(o)?1:0;if(o!=null){if(o=o.$$typeof,o===F)return 11;if(o===qe)return 14}return 2}function wi(o,s){var u=o.alternate;return u===null?(u=wn(o.tag,s,o.key,o.mode),u.elementType=o.elementType,u.type=o.type,u.stateNode=o.stateNode,u.alternate=o,o.alternate=u):(u.pendingProps=s,u.type=o.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=o.flags&14680064,u.childLanes=o.childLanes,u.lanes=o.lanes,u.child=o.child,u.memoizedProps=o.memoizedProps,u.memoizedState=o.memoizedState,u.updateQueue=o.updateQueue,s=o.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=o.sibling,u.index=o.index,u.ref=o.ref,u}function Uu(o,s,u,g,v,E){var w=2;if(g=o,typeof o=="function")Pf(o)&&(w=1);else if(typeof o=="string")w=5;else e:switch(o){case M:return po(u.children,v,E,s);case R:w=8,v|=8;break;case P:return o=wn(12,u,s,v|2),o.elementType=P,o.lanes=E,o;case k:return o=wn(13,u,s,v),o.elementType=k,o.lanes=E,o;case Te:return o=wn(19,u,s,v),o.elementType=Te,o.lanes=E,o;case ze:return Fu(u,v,E,s);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case L:w=10;break e;case V:w=9;break e;case F:w=11;break e;case qe:w=14;break e;case Oe:w=16,g=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return s=wn(w,u,s,v),s.elementType=o,s.type=g,s.lanes=E,s}function po(o,s,u,g){return o=wn(7,o,g,s),o.lanes=u,o}function Fu(o,s,u,g){return o=wn(22,o,g,s),o.elementType=ze,o.lanes=u,o.stateNode={isHidden:!1},o}function Nf(o,s,u){return o=wn(6,o,null,s),o.lanes=u,o}function kf(o,s,u){return s=wn(4,o.children!==null?o.children:[],o.key,s),s.lanes=u,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}function US(o,s,u,g,v){this.tag=s,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=da(0),this.expirationTimes=da(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=da(0),this.identifierPrefix=g,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function xf(o,s,u,g,v,E,w,x,U){return o=new US(o,s,u,x,U),s===1?(s=1,E===!0&&(s|=8)):s=0,E=wn(3,null,null,s),o.current=E,E.stateNode=o,E.memoizedState={element:g,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},qd(E),o}function FS(o,s,u){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:g==null?null:""+g,children:o,containerInfo:s,implementation:u}}function Wg(o){if(!o)return mi;o=o._reactInternals;e:{if(Nn(o)!==o||o.tag!==1)throw Error(t(170));var s=o;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(jt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(o.tag===1){var u=o.type;if(jt(u))return Em(o,u,s)}return s}function Jg(o,s,u,g,v,E,w,x,U){return o=xf(u,g,!0,o,v,E,w,x,U),o.context=Wg(null),u=o.current,g=Yt(),v=Ii(u),E=Mr(g,v),E.callback=s??null,vi(u,E,v),o.current.lanes=v,Xi(o,v,g),nn(o,g),o}function Ou(o,s,u,g){var v=s.current,E=Yt(),w=Ii(v);return u=Wg(u),s.context===null?s.context=u:s.pendingContext=u,s=Mr(E,w),s.payload={element:o},g=g===void 0?null:g,g!==null&&(s.callback=g),o=vi(v,s,w),o!==null&&(bn(o,v,w,E),gu(o,v,w)),w}function Gu(o){return o=o.current,o.child?(o.child.tag===5,o.child.stateNode):null}function Kg(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var u=o.retryLane;o.retryLane=u!==0&&u<s?u:s}}function Mf(o,s){Kg(o,s),(o=o.alternate)&&Kg(o,s)}function OS(){return null}var Yg=typeof reportError=="function"?reportError:function(o){console.error(o)};function Df(o){this._internalRoot=o}Bu.prototype.render=Df.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(t(409));Ou(o,s,null,null)},Bu.prototype.unmount=Df.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;co(function(){Ou(null,o,null,null)}),s[Rr]=null}};function Bu(o){this._internalRoot=o}Bu.prototype.unstable_scheduleHydration=function(o){if(o){var s=ma();o={blockedOn:null,target:o,priority:s};for(var u=0;u<un.length&&s!==0&&s<un[u].priority;u++);un.splice(u,0,o),u===0&&$o(o)}};function Lf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Hu(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Qg(){}function GS(o,s,u,g,v){if(v){if(typeof g=="function"){var E=g;g=function(){var $=Gu(w);E.call($)}}var w=Jg(s,g,o,0,null,!1,!1,"",Qg);return o._reactRootContainer=w,o[Rr]=w.current,Ra(o.nodeType===8?o.parentNode:o),co(),w}for(;v=o.lastChild;)o.removeChild(v);if(typeof g=="function"){var x=g;g=function(){var $=Gu(U);x.call($)}}var U=xf(o,0,!1,null,null,!1,!1,"",Qg);return o._reactRootContainer=U,o[Rr]=U.current,Ra(o.nodeType===8?o.parentNode:o),co(function(){Ou(s,U,u,g)}),U}function qu(o,s,u,g,v){var E=u._reactRootContainer;if(E){var w=E;if(typeof v=="function"){var x=v;v=function(){var U=Gu(w);x.call(U)}}Ou(s,w,o,v)}else w=GS(u,s,o,v,g);return Gu(w)}ha=function(o){switch(o.tag){case 3:var s=o.stateNode;if(s.current.memoizedState.isDehydrated){var u=He(s.pendingLanes);u!==0&&(fa(s,u|1),nn(s,Ze()),(Fe&6)===0&&(vs=Ze()+500,gi()))}break;case 13:co(function(){var g=xr(o,1);if(g!==null){var v=Yt();bn(g,o,1,v)}}),Mf(o,1)}},qo=function(o){if(o.tag===13){var s=xr(o,134217728);if(s!==null){var u=Yt();bn(s,o,134217728,u)}Mf(o,134217728)}},pa=function(o){if(o.tag===13){var s=Ii(o),u=xr(o,s);if(u!==null){var g=Yt();bn(u,o,s,g)}Mf(o,s)}},ma=function(){return Ve},ga=function(o,s){var u=Ve;try{return Ve=o,s()}finally{Ve=u}},yr=function(o,s,u){switch(s){case"input":if(Bi(o,u),s=u.name,u.type==="radio"&&s!=null){for(u=o;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<u.length;s++){var g=u[s];if(g!==o&&g.form===o.form){var v=su(g);if(!v)throw Error(t(90));Xs(g),Bi(g,v)}}}break;case"textarea":xl(o,u);break;case"select":s=u.value,s!=null&&Rn(o,!!u.multiple,s,!1)}},Ll=Cf,Vl=co;var BS={usingClientEntryPoint:!1,Events:[ka,os,su,ni,ri,Cf]},za={findFiberByHostInstance:no,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HS={bundleType:za.bundleType,version:za.version,rendererPackageName:za.rendererPackageName,rendererConfig:za.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Hl(o),o===null?null:o.stateNode},findFiberByHostInstance:za.findFiberByHostInstance||OS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zu.isDisabled&&zu.supportsFiber)try{Ji=zu.inject(HS),an=zu}catch{}}return rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BS,rn.createPortal=function(o,s){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lf(s))throw Error(t(200));return FS(o,s,null,u)},rn.createRoot=function(o,s){if(!Lf(o))throw Error(t(299));var u=!1,g="",v=Yg;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=xf(o,1,!1,null,null,u,!1,g,v),o[Rr]=s.current,Ra(o.nodeType===8?o.parentNode:o),new Df(s)},rn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Hl(s),o=o===null?null:o.stateNode,o},rn.flushSync=function(o){return co(o)},rn.hydrate=function(o,s,u){if(!Hu(s))throw Error(t(200));return qu(null,o,s,!0,u)},rn.hydrateRoot=function(o,s,u){if(!Lf(o))throw Error(t(405));var g=u!=null&&u.hydratedSources||null,v=!1,E="",w=Yg;if(u!=null&&(u.unstable_strictMode===!0&&(v=!0),u.identifierPrefix!==void 0&&(E=u.identifierPrefix),u.onRecoverableError!==void 0&&(w=u.onRecoverableError)),s=Jg(s,null,o,1,u??null,v,!1,E,w),o[Rr]=s.current,Ra(o),g)for(o=0;o<g.length;o++)u=g[o],v=u._getVersion,v=v(u._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[u,v]:s.mutableSourceEagerHydrationData.push(u,v);return new Bu(s)},rn.render=function(o,s,u){if(!Hu(s))throw Error(t(200));return qu(null,o,s,!1,u)},rn.unmountComponentAtNode=function(o){if(!Hu(o))throw Error(t(40));return o._reactRootContainer?(co(function(){qu(null,null,o,!1,function(){o._reactRootContainer=null,o[Rr]=null})}),!0):!1},rn.unstable_batchedUpdates=Cf,rn.unstable_renderSubtreeIntoContainer=function(o,s,u,g){if(!Hu(u))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return qu(o,s,u,!1,g)},rn.version="18.3.1-next-f1338f8080-20240426",rn}var iy;function uE(){if(iy)return Uf.exports;iy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Uf.exports=QS(),Uf.exports}var oy;function XS(){if(oy)return $u;oy=1;var n=uE();return $u.createRoot=n.createRoot,$u.hydrateRoot=n.hydrateRoot,$u}var ZS=XS();const jS=zh(ZS);function cE(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=cE(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function ew(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=cE(n))&&(r&&(r+=" "),r+=e);return r}const Wh="-",tw=n=>{const e=rw(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:l=>{const d=l.split(Wh);return d[0]===""&&d.length!==1&&d.shift(),dE(d,e)||nw(l)},getConflictingClassGroupIds:(l,d)=>{const m=t[l]||[];return d&&r[l]?[...m,...r[l]]:m}}},dE=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?dE(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=n.join(Wh);return e.validators.find(({validator:l})=>l(a))?.classGroupId},sy=/^\[(.+)\]$/,nw=n=>{if(sy.test(n)){const e=sy.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},rw=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return ow(Object.entries(n.classGroups),t).forEach(([a,l])=>{oh(l,r,a,e)}),r},oh=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const a=i===""?e:ay(e,i);a.classGroupId=t;return}if(typeof i=="function"){if(iw(i)){oh(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([a,l])=>{oh(l,ay(e,a),t,r)})})},ay=(n,e)=>{let t=n;return e.split(Wh).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},iw=n=>n.isThemeGetter,ow=(n,e)=>e?n.map(([t,r])=>{const i=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([l,d])=>[e+l,d])):a);return[t,i]}):n,sw=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(a,l)=>{t.set(a,l),e++,e>n&&(e=0,r=t,t=new Map)};return{get(a){let l=t.get(a);if(l!==void 0)return l;if((l=r.get(a))!==void 0)return i(a,l),l},set(a,l){t.has(a)?t.set(a,l):i(a,l)}}},fE="!",aw=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,i=e[0],a=e.length,l=d=>{const m=[];let p=0,y=0,_;for(let N=0;N<d.length;N++){let B=d[N];if(p===0){if(B===i&&(r||d.slice(N,N+a)===e)){m.push(d.slice(y,N)),y=N+a;continue}if(B==="/"){_=N;continue}}B==="["?p++:B==="]"&&p--}const I=m.length===0?d:d.substring(y),C=I.startsWith(fE),D=C?I.substring(1):I,b=_&&_>y?_-y:void 0;return{modifiers:m,hasImportantModifier:C,baseClassName:D,maybePostfixModifierPosition:b}};return t?d=>t({className:d,parseClassName:l}):l},lw=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},uw=n=>({cache:sw(n.cacheSize),parseClassName:aw(n),...tw(n)}),cw=/\s+/,dw=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i}=e,a=[],l=n.trim().split(cw);let d="";for(let m=l.length-1;m>=0;m-=1){const p=l[m],{modifiers:y,hasImportantModifier:_,baseClassName:I,maybePostfixModifierPosition:C}=t(p);let D=!!C,b=r(D?I.substring(0,C):I);if(!b){if(!D){d=p+(d.length>0?" "+d:d);continue}if(b=r(I),!b){d=p+(d.length>0?" "+d:d);continue}D=!1}const N=lw(y).join(":"),B=_?N+fE:N,K=B+b;if(a.includes(K))continue;a.push(K);const Y=i(b,D);for(let Q=0;Q<Y.length;++Q){const le=Y[Q];a.push(B+le)}d=p+(d.length>0?" "+d:d)}return d};function fw(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=hE(e))&&(r&&(r+=" "),r+=t);return r}const hE=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=hE(n[r]))&&(t&&(t+=" "),t+=e);return t};function hw(n,...e){let t,r,i,a=l;function l(m){const p=e.reduce((y,_)=>_(y),n());return t=uw(p),r=t.cache.get,i=t.cache.set,a=d,d(m)}function d(m){const p=r(m);if(p)return p;const y=dw(m,t);return i(m,y),y}return function(){return a(fw.apply(null,arguments))}}const tt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},pE=/^\[(?:([a-z-]+):)?(.+)\]$/i,pw=/^\d+\/\d+$/,mw=new Set(["px","full","screen"]),gw=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,yw=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,vw=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,_w=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ew=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Vr=n=>Cs(n)||mw.has(n)||pw.test(n),Ai=n=>Bs(n,"length",Pw),Cs=n=>!!n&&!Number.isNaN(Number(n)),Gf=n=>Bs(n,"number",Cs),Wa=n=>!!n&&Number.isInteger(Number(n)),Tw=n=>n.endsWith("%")&&Cs(n.slice(0,-1)),Pe=n=>pE.test(n),Ri=n=>gw.test(n),Iw=new Set(["length","size","percentage"]),Sw=n=>Bs(n,Iw,mE),ww=n=>Bs(n,"position",mE),Cw=new Set(["image","url"]),Aw=n=>Bs(n,Cw,kw),Rw=n=>Bs(n,"",Nw),Ja=()=>!0,Bs=(n,e,t)=>{const r=pE.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},Pw=n=>yw.test(n)&&!vw.test(n),mE=()=>!1,Nw=n=>_w.test(n),kw=n=>Ew.test(n),xw=()=>{const n=tt("colors"),e=tt("spacing"),t=tt("blur"),r=tt("brightness"),i=tt("borderColor"),a=tt("borderRadius"),l=tt("borderSpacing"),d=tt("borderWidth"),m=tt("contrast"),p=tt("grayscale"),y=tt("hueRotate"),_=tt("invert"),I=tt("gap"),C=tt("gradientColorStops"),D=tt("gradientColorStopPositions"),b=tt("inset"),N=tt("margin"),B=tt("opacity"),K=tt("padding"),Y=tt("saturate"),Q=tt("scale"),le=tt("sepia"),J=tt("skew"),M=tt("space"),R=tt("translate"),P=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto",Pe,e],F=()=>[Pe,e],k=()=>["",Vr,Ai],Te=()=>["auto",Cs,Pe],qe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Oe=()=>["solid","dashed","dotted","double","none"],ze=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],re=()=>["start","end","center","between","around","evenly","stretch"],he=()=>["","0",Pe],ce=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>[Cs,Pe];return{cacheSize:500,separator:":",theme:{colors:[Ja],spacing:[Vr,Ai],blur:["none","",Ri,Pe],brightness:G(),borderColor:[n],borderRadius:["none","","full",Ri,Pe],borderSpacing:F(),borderWidth:k(),contrast:G(),grayscale:he(),hueRotate:G(),invert:he(),gap:F(),gradientColorStops:[n],gradientColorStopPositions:[Tw,Ai],inset:V(),margin:V(),opacity:G(),padding:F(),saturate:G(),scale:G(),sepia:he(),skew:G(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",Pe]}],container:["container"],columns:[{columns:[Ri]}],"break-after":[{"break-after":ce()}],"break-before":[{"break-before":ce()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...qe(),Pe]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Wa,Pe]}],basis:[{basis:V()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Pe]}],grow:[{grow:he()}],shrink:[{shrink:he()}],order:[{order:["first","last","none",Wa,Pe]}],"grid-cols":[{"grid-cols":[Ja]}],"col-start-end":[{col:["auto",{span:["full",Wa,Pe]},Pe]}],"col-start":[{"col-start":Te()}],"col-end":[{"col-end":Te()}],"grid-rows":[{"grid-rows":[Ja]}],"row-start-end":[{row:["auto",{span:[Wa,Pe]},Pe]}],"row-start":[{"row-start":Te()}],"row-end":[{"row-end":Te()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Pe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Pe]}],gap:[{gap:[I]}],"gap-x":[{"gap-x":[I]}],"gap-y":[{"gap-y":[I]}],"justify-content":[{justify:["normal",...re()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...re(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...re(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[K]}],px:[{px:[K]}],py:[{py:[K]}],ps:[{ps:[K]}],pe:[{pe:[K]}],pt:[{pt:[K]}],pr:[{pr:[K]}],pb:[{pb:[K]}],pl:[{pl:[K]}],m:[{m:[N]}],mx:[{mx:[N]}],my:[{my:[N]}],ms:[{ms:[N]}],me:[{me:[N]}],mt:[{mt:[N]}],mr:[{mr:[N]}],mb:[{mb:[N]}],ml:[{ml:[N]}],"space-x":[{"space-x":[M]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[M]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Pe,e]}],"min-w":[{"min-w":[Pe,e,"min","max","fit"]}],"max-w":[{"max-w":[Pe,e,"none","full","min","max","fit","prose",{screen:[Ri]},Ri]}],h:[{h:[Pe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Pe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Pe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Pe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ri,Ai]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Gf]}],"font-family":[{font:[Ja]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Pe]}],"line-clamp":[{"line-clamp":["none",Cs,Gf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Vr,Pe]}],"list-image":[{"list-image":["none",Pe]}],"list-style-type":[{list:["none","disc","decimal",Pe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[B]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[B]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Oe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Vr,Ai]}],"underline-offset":[{"underline-offset":["auto",Vr,Pe]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[B]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...qe(),ww]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Sw]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Aw]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[D]}],"gradient-via-pos":[{via:[D]}],"gradient-to-pos":[{to:[D]}],"gradient-from":[{from:[C]}],"gradient-via":[{via:[C]}],"gradient-to":[{to:[C]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[d]}],"border-w-x":[{"border-x":[d]}],"border-w-y":[{"border-y":[d]}],"border-w-s":[{"border-s":[d]}],"border-w-e":[{"border-e":[d]}],"border-w-t":[{"border-t":[d]}],"border-w-r":[{"border-r":[d]}],"border-w-b":[{"border-b":[d]}],"border-w-l":[{"border-l":[d]}],"border-opacity":[{"border-opacity":[B]}],"border-style":[{border:[...Oe(),"hidden"]}],"divide-x":[{"divide-x":[d]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[d]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[B]}],"divide-style":[{divide:Oe()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Oe()]}],"outline-offset":[{"outline-offset":[Vr,Pe]}],"outline-w":[{outline:[Vr,Ai]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[B]}],"ring-offset-w":[{"ring-offset":[Vr,Ai]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Ri,Rw]}],"shadow-color":[{shadow:[Ja]}],opacity:[{opacity:[B]}],"mix-blend":[{"mix-blend":[...ze(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ze()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[m]}],"drop-shadow":[{"drop-shadow":["","none",Ri,Pe]}],grayscale:[{grayscale:[p]}],"hue-rotate":[{"hue-rotate":[y]}],invert:[{invert:[_]}],saturate:[{saturate:[Y]}],sepia:[{sepia:[le]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[m]}],"backdrop-grayscale":[{"backdrop-grayscale":[p]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[y]}],"backdrop-invert":[{"backdrop-invert":[_]}],"backdrop-opacity":[{"backdrop-opacity":[B]}],"backdrop-saturate":[{"backdrop-saturate":[Y]}],"backdrop-sepia":[{"backdrop-sepia":[le]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Pe]}],duration:[{duration:G()}],ease:[{ease:["linear","in","out","in-out",Pe]}],delay:[{delay:G()}],animate:[{animate:["none","spin","ping","pulse","bounce",Pe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[Q]}],"scale-x":[{"scale-x":[Q]}],"scale-y":[{"scale-y":[Q]}],rotate:[{rotate:[Wa,Pe]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[J]}],"skew-y":[{"skew-y":[J]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Pe]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Pe]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Pe]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Vr,Ai,Gf]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Mw=hw(xw);function Wr(...n){return Mw(ew(n))}const sh=oe.forwardRef(({className:n,...e},t)=>ae.jsx("div",{ref:t,className:Wr("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));sh.displayName="Card";const gE=oe.forwardRef(({className:n,...e},t)=>ae.jsx("div",{ref:t,className:Wr("flex flex-col space-y-1.5 p-6",n),...e}));gE.displayName="CardHeader";const yE=oe.forwardRef(({className:n,...e},t)=>ae.jsx("h3",{ref:t,className:Wr("text-2xl font-semibold leading-none tracking-tight",n),...e}));yE.displayName="CardTitle";const vE=oe.forwardRef(({className:n,...e},t)=>ae.jsx("div",{ref:t,className:Wr("p-6 pt-0",n),...e}));vE.displayName="CardContent";function Dw({className:n,variant:e="default",...t}){const r={default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"};return ae.jsx("div",{className:Wr("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",r[e],n),...t})}const _E=oe.forwardRef(({className:n,value:e,...t},r)=>ae.jsx("div",{ref:r,className:Wr("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:ae.jsx("div",{className:"h-full w-full flex-1 bg-primary transition-all duration-300 ease-in-out",style:{transform:`translateX(-${100-(e||0)}%)`}})}));_E.displayName="Progress";function Gr(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function Jh(n,e=[]){let t=[];function r(a,l){const d=oe.createContext(l),m=t.length;t=[...t,l];const p=_=>{const{scope:I,children:C,...D}=_,b=I?.[n]?.[m]||d,N=oe.useMemo(()=>D,Object.values(D));return ae.jsx(b.Provider,{value:N,children:C})};p.displayName=a+"Provider";function y(_,I){const C=I?.[n]?.[m]||d,D=oe.useContext(C);if(D)return D;if(l!==void 0)return l;throw new Error(`\`${_}\` must be used within \`${a}\``)}return[p,y]}const i=()=>{const a=t.map(l=>oe.createContext(l));return function(d){const m=d?.[n]||a;return oe.useMemo(()=>({[`__scope${n}`]:{...d,[n]:m}}),[d,m])}};return i.scopeName=n,[r,Lw(i,...e)]}function Lw(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const l=r.reduce((d,{useScope:m,scopeName:p})=>{const _=m(a)[`__scope${p}`];return{...d,..._}},{});return oe.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}function ly(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function EE(...n){return e=>{let t=!1;const r=n.map(i=>{const a=ly(i,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():ly(n[i],null)}}}}function vc(...n){return oe.useCallback(EE(...n),n)}function ah(n){const e=Vw(n),t=oe.forwardRef((r,i)=>{const{children:a,...l}=r,d=oe.Children.toArray(a),m=d.find(Uw);if(m){const p=m.props.children,y=d.map(_=>_===m?oe.Children.count(p)>1?oe.Children.only(null):oe.isValidElement(p)?p.props.children:null:_);return ae.jsx(e,{...l,ref:i,children:oe.isValidElement(p)?oe.cloneElement(p,void 0,y):null})}return ae.jsx(e,{...l,ref:i,children:a})});return t.displayName=`${n}.Slot`,t}function Vw(n){const e=oe.forwardRef((t,r)=>{const{children:i,...a}=t;if(oe.isValidElement(i)){const l=Ow(i),d=Fw(a,i.props);return i.type!==oe.Fragment&&(d.ref=r?EE(r,l):l),oe.cloneElement(i,d)}return oe.Children.count(i)>1?oe.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var bw=Symbol("radix.slottable");function Uw(n){return oe.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===bw}function Fw(n,e){const t={...e};for(const r in e){const i=n[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?t[r]=(...d)=>{const m=a(...d);return i(...d),m}:i&&(t[r]=i):r==="style"?t[r]={...i,...a}:r==="className"&&(t[r]=[i,a].filter(Boolean).join(" "))}return{...n,...t}}function Ow(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Gw(n){const e=n+"CollectionProvider",[t,r]=Jh(e),[i,a]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=b=>{const{scope:N,children:B}=b,K=br.useRef(null),Y=br.useRef(new Map).current;return ae.jsx(i,{scope:N,itemMap:Y,collectionRef:K,children:B})};l.displayName=e;const d=n+"CollectionSlot",m=ah(d),p=br.forwardRef((b,N)=>{const{scope:B,children:K}=b,Y=a(d,B),Q=vc(N,Y.collectionRef);return ae.jsx(m,{ref:Q,children:K})});p.displayName=d;const y=n+"CollectionItemSlot",_="data-radix-collection-item",I=ah(y),C=br.forwardRef((b,N)=>{const{scope:B,children:K,...Y}=b,Q=br.useRef(null),le=vc(N,Q),J=a(y,B);return br.useEffect(()=>(J.itemMap.set(Q,{ref:Q,...Y}),()=>{J.itemMap.delete(Q)})),ae.jsx(I,{[_]:"",ref:le,children:K})});C.displayName=y;function D(b){const N=a(n+"CollectionConsumer",b);return br.useCallback(()=>{const K=N.collectionRef.current;if(!K)return[];const Y=Array.from(K.querySelectorAll(`[${_}]`));return Array.from(N.itemMap.values()).sort((J,M)=>Y.indexOf(J.ref.current)-Y.indexOf(M.ref.current))},[N.collectionRef,N.itemMap])}return[{Provider:l,Slot:p,ItemSlot:C},D,r]}var _c=globalThis?.document?oe.useLayoutEffect:()=>{},Bw=lE[" useId ".trim().toString()]||(()=>{}),Hw=0;function TE(n){const[e,t]=oe.useState(Bw());return _c(()=>{t(r=>r??String(Hw++))},[n]),e?`radix-${e}`:""}uE();var qw=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Hs=qw.reduce((n,e)=>{const t=ah(`Primitive.${e}`),r=oe.forwardRef((i,a)=>{const{asChild:l,...d}=i,m=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),ae.jsx(m,{...d,ref:a})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function zw(n){const e=oe.useRef(n);return oe.useEffect(()=>{e.current=n}),oe.useMemo(()=>(...t)=>e.current?.(...t),[])}var $w=lE[" useInsertionEffect ".trim().toString()]||_c;function IE({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,a,l]=Ww({defaultProp:e,onChange:t}),d=n!==void 0,m=d?n:i;{const y=oe.useRef(n!==void 0);oe.useEffect(()=>{const _=y.current;_!==d&&console.warn(`${r} is changing from ${_?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),y.current=d},[d,r])}const p=oe.useCallback(y=>{if(d){const _=Jw(y)?y(n):y;_!==n&&l.current?.(_)}else a(y)},[d,n,a,l]);return[m,p]}function Ww({defaultProp:n,onChange:e}){const[t,r]=oe.useState(n),i=oe.useRef(t),a=oe.useRef(e);return $w(()=>{a.current=e},[e]),oe.useEffect(()=>{i.current!==t&&(a.current?.(t),i.current=t)},[t,i]),[t,r,a]}function Jw(n){return typeof n=="function"}var Kw=oe.createContext(void 0);function SE(n){const e=oe.useContext(Kw);return n||e||"ltr"}var Bf="rovingFocusGroup.onEntryFocus",Yw={bubbles:!1,cancelable:!0},yl="RovingFocusGroup",[lh,wE,Qw]=Gw(yl),[Xw,CE]=Jh(yl,[Qw]),[Zw,jw]=Xw(yl),AE=oe.forwardRef((n,e)=>ae.jsx(lh.Provider,{scope:n.__scopeRovingFocusGroup,children:ae.jsx(lh.Slot,{scope:n.__scopeRovingFocusGroup,children:ae.jsx(eC,{...n,ref:e})})}));AE.displayName=yl;var eC=oe.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:a,currentTabStopId:l,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:m,onEntryFocus:p,preventScrollOnEntryFocus:y=!1,..._}=n,I=oe.useRef(null),C=vc(e,I),D=SE(a),[b,N]=IE({prop:l,defaultProp:d??null,onChange:m,caller:yl}),[B,K]=oe.useState(!1),Y=zw(p),Q=wE(t),le=oe.useRef(!1),[J,M]=oe.useState(0);return oe.useEffect(()=>{const R=I.current;if(R)return R.addEventListener(Bf,Y),()=>R.removeEventListener(Bf,Y)},[Y]),ae.jsx(Zw,{scope:t,orientation:r,dir:D,loop:i,currentTabStopId:b,onItemFocus:oe.useCallback(R=>N(R),[N]),onItemShiftTab:oe.useCallback(()=>K(!0),[]),onFocusableItemAdd:oe.useCallback(()=>M(R=>R+1),[]),onFocusableItemRemove:oe.useCallback(()=>M(R=>R-1),[]),children:ae.jsx(Hs.div,{tabIndex:B||J===0?-1:0,"data-orientation":r,..._,ref:C,style:{outline:"none",...n.style},onMouseDown:Gr(n.onMouseDown,()=>{le.current=!0}),onFocus:Gr(n.onFocus,R=>{const P=!le.current;if(R.target===R.currentTarget&&P&&!B){const L=new CustomEvent(Bf,Yw);if(R.currentTarget.dispatchEvent(L),!L.defaultPrevented){const V=Q().filter(Oe=>Oe.focusable),F=V.find(Oe=>Oe.active),k=V.find(Oe=>Oe.id===b),qe=[F,k,...V].filter(Boolean).map(Oe=>Oe.ref.current);NE(qe,y)}}le.current=!1}),onBlur:Gr(n.onBlur,()=>K(!1))})})}),RE="RovingFocusGroupItem",PE=oe.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:a,children:l,...d}=n,m=TE(),p=a||m,y=jw(RE,t),_=y.currentTabStopId===p,I=wE(t),{onFocusableItemAdd:C,onFocusableItemRemove:D,currentTabStopId:b}=y;return oe.useEffect(()=>{if(r)return C(),()=>D()},[r,C,D]),ae.jsx(lh.ItemSlot,{scope:t,id:p,focusable:r,active:i,children:ae.jsx(Hs.span,{tabIndex:_?0:-1,"data-orientation":y.orientation,...d,ref:e,onMouseDown:Gr(n.onMouseDown,N=>{r?y.onItemFocus(p):N.preventDefault()}),onFocus:Gr(n.onFocus,()=>y.onItemFocus(p)),onKeyDown:Gr(n.onKeyDown,N=>{if(N.key==="Tab"&&N.shiftKey){y.onItemShiftTab();return}if(N.target!==N.currentTarget)return;const B=rC(N,y.orientation,y.dir);if(B!==void 0){if(N.metaKey||N.ctrlKey||N.altKey||N.shiftKey)return;N.preventDefault();let Y=I().filter(Q=>Q.focusable).map(Q=>Q.ref.current);if(B==="last")Y.reverse();else if(B==="prev"||B==="next"){B==="prev"&&Y.reverse();const Q=Y.indexOf(N.currentTarget);Y=y.loop?iC(Y,Q+1):Y.slice(Q+1)}setTimeout(()=>NE(Y))}}),children:typeof l=="function"?l({isCurrentTabStop:_,hasTabStop:b!=null}):l})})});PE.displayName=RE;var tC={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function nC(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function rC(n,e,t){const r=nC(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return tC[r]}function NE(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function iC(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var oC=AE,sC=PE;function aC(n,e){return oe.useReducer((t,r)=>e[t][r]??t,n)}var kE=n=>{const{present:e,children:t}=n,r=lC(e),i=typeof t=="function"?t({present:r.isPresent}):oe.Children.only(t),a=vc(r.ref,uC(i));return typeof t=="function"||r.isPresent?oe.cloneElement(i,{ref:a}):null};kE.displayName="Presence";function lC(n){const[e,t]=oe.useState(),r=oe.useRef(null),i=oe.useRef(n),a=oe.useRef("none"),l=n?"mounted":"unmounted",[d,m]=aC(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return oe.useEffect(()=>{const p=Wu(r.current);a.current=d==="mounted"?p:"none"},[d]),_c(()=>{const p=r.current,y=i.current;if(y!==n){const I=a.current,C=Wu(p);n?m("MOUNT"):C==="none"||p?.display==="none"?m("UNMOUNT"):m(y&&I!==C?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,m]),_c(()=>{if(e){let p;const y=e.ownerDocument.defaultView??window,_=C=>{const b=Wu(r.current).includes(CSS.escape(C.animationName));if(C.target===e&&b&&(m("ANIMATION_END"),!i.current)){const N=e.style.animationFillMode;e.style.animationFillMode="forwards",p=y.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=N)})}},I=C=>{C.target===e&&(a.current=Wu(r.current))};return e.addEventListener("animationstart",I),e.addEventListener("animationcancel",_),e.addEventListener("animationend",_),()=>{y.clearTimeout(p),e.removeEventListener("animationstart",I),e.removeEventListener("animationcancel",_),e.removeEventListener("animationend",_)}}else m("ANIMATION_END")},[e,m]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:oe.useCallback(p=>{r.current=p?getComputedStyle(p):null,t(p)},[])}}function Wu(n){return n?.animationName||"none"}function uC(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Wc="Tabs",[cC]=Jh(Wc,[CE]),xE=CE(),[dC,Kh]=cC(Wc),ME=oe.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:i,defaultValue:a,orientation:l="horizontal",dir:d,activationMode:m="automatic",...p}=n,y=SE(d),[_,I]=IE({prop:r,onChange:i,defaultProp:a??"",caller:Wc});return ae.jsx(dC,{scope:t,baseId:TE(),value:_,onValueChange:I,orientation:l,dir:y,activationMode:m,children:ae.jsx(Hs.div,{dir:y,"data-orientation":l,...p,ref:e})})});ME.displayName=Wc;var DE="TabsList",LE=oe.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...i}=n,a=Kh(DE,t),l=xE(t);return ae.jsx(oC,{asChild:!0,...l,orientation:a.orientation,dir:a.dir,loop:r,children:ae.jsx(Hs.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});LE.displayName=DE;var VE="TabsTrigger",bE=oe.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:i=!1,...a}=n,l=Kh(VE,t),d=xE(t),m=OE(l.baseId,r),p=GE(l.baseId,r),y=r===l.value;return ae.jsx(sC,{asChild:!0,...d,focusable:!i,active:y,children:ae.jsx(Hs.button,{type:"button",role:"tab","aria-selected":y,"aria-controls":p,"data-state":y?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:m,...a,ref:e,onMouseDown:Gr(n.onMouseDown,_=>{!i&&_.button===0&&_.ctrlKey===!1?l.onValueChange(r):_.preventDefault()}),onKeyDown:Gr(n.onKeyDown,_=>{[" ","Enter"].includes(_.key)&&l.onValueChange(r)}),onFocus:Gr(n.onFocus,()=>{const _=l.activationMode!=="manual";!y&&!i&&_&&l.onValueChange(r)})})})});bE.displayName=VE;var UE="TabsContent",FE=oe.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:i,children:a,...l}=n,d=Kh(UE,t),m=OE(d.baseId,r),p=GE(d.baseId,r),y=r===d.value,_=oe.useRef(y);return oe.useEffect(()=>{const I=requestAnimationFrame(()=>_.current=!1);return()=>cancelAnimationFrame(I)},[]),ae.jsx(kE,{present:i||y,children:({present:I})=>ae.jsx(Hs.div,{"data-state":y?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":m,hidden:!I,id:p,tabIndex:0,...l,ref:e,style:{...n.style,animationDuration:_.current?"0s":void 0},children:I&&a})})});FE.displayName=UE;function OE(n,e){return`${n}-trigger-${e}`}function GE(n,e){return`${n}-content-${e}`}var fC=ME,BE=LE,HE=bE,qE=FE;const hC=fC,zE=oe.forwardRef(({className:n,...e},t)=>ae.jsx(BE,{ref:t,className:Wr("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));zE.displayName=BE.displayName;const oc=oe.forwardRef(({className:n,...e},t)=>ae.jsx(HE,{ref:t,className:Wr("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));oc.displayName=HE.displayName;const sc=oe.forwardRef(({className:n,...e},t)=>ae.jsx(qE,{ref:t,className:Wr("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));sc.displayName=qE.displayName;var Ka={exports:{}},Hf={},qf,uy;function pC(){if(uy)return qf;uy=1;function n(e,t){typeof t=="boolean"&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return qf=n,n.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var i=this;return this._timer=setTimeout(function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout(function(){i._operationTimeoutCb(i._attempts)},i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)},r),this._options.unref&&this._timer.unref(),!0},n.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},n.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},n.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},t=null,r=0,i=0;i<this._errors.length;i++){var a=this._errors[i],l=a.message,d=(e[l]||0)+1;e[l]=d,d>=r&&(t=a,r=d)}return t},qf}var cy;function mC(){return cy||(cy=1,(function(n){var e=pC();n.operation=function(t){var r=n.timeouts(t);return new e(r,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},n.timeouts=function(t){if(t instanceof Array)return[].concat(t);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in t)r[i]=t[i];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var a=[],l=0;l<r.retries;l++)a.push(this.createTimeout(l,r));return t&&t.forever&&!a.length&&a.push(this.createTimeout(l,r)),a.sort(function(d,m){return d-m}),a},n.createTimeout=function(t,r){var i=r.randomize?Math.random()+1:1,a=Math.round(i*Math.max(r.minTimeout,1)*Math.pow(r.factor,t));return a=Math.min(a,r.maxTimeout),a},n.wrap=function(t,r,i){if(r instanceof Array&&(i=r,r=null),!i){i=[];for(var a in t)typeof t[a]=="function"&&i.push(a)}for(var l=0;l<i.length;l++){var d=i[l],m=t[d];t[d]=(function(y){var _=n.operation(r),I=Array.prototype.slice.call(arguments,1),C=I.pop();I.push(function(D){_.retry(D)||(D&&(arguments[0]=_.mainError()),C.apply(this,arguments))}),_.attempt(function(){y.apply(t,I)})}).bind(t,m),t[d].options=r}}})(Hf)),Hf}var zf,dy;function gC(){return dy||(dy=1,zf=mC()),zf}var fy;function yC(){if(fy)return Ka.exports;fy=1;const n=gC(),e=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class t extends Error{constructor(d){super(),d instanceof Error?(this.originalError=d,{message:d}=d):(this.originalError=new Error(d),this.originalError.stack=this.stack),this.name="AbortError",this.message=d}}const r=(l,d,m)=>{const p=m.retries-(d-1);return l.attemptNumber=d,l.retriesLeft=p,l},i=l=>e.includes(l),a=(l,d)=>new Promise((m,p)=>{d={onFailedAttempt:()=>{},retries:10,...d};const y=n.operation(d);y.attempt(async _=>{try{m(await l(_))}catch(I){if(!(I instanceof Error)){p(new TypeError(`Non-error was thrown: "${I}". You should only throw errors.`));return}if(I instanceof t)y.stop(),p(I.originalError);else if(I instanceof TypeError&&!i(I.message))y.stop(),p(I);else{r(I,_,d);try{await d.onFailedAttempt(I)}catch(C){p(C);return}y.retry(I)||p(y.mainError())}}})});return Ka.exports=a,Ka.exports.default=a,Ka.exports.AbortError=t,Ka.exports}var $E=yC();const vC=zh($E);var _C={};let EC,TC;function IC(){return{geminiUrl:EC,vertexUrl:TC}}function SC(n,e,t,r){var i,a;if(!n?.baseUrl){const l=IC();return e?(i=l.vertexUrl)!==null&&i!==void 0?i:t:(a=l.geminiUrl)!==null&&a!==void 0?a:r}return n.baseUrl}class Jr{}function ue(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const a=e[i];return a!=null?String(a):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function f(n,e,t){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const d=l.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(n[d])){const m=n[d];if(Array.isArray(t))for(let p=0;p<m.length;p++){const y=m[p];f(y,e.slice(a+1),t[p])}else for(const p of m)f(p,e.slice(a+1),t)}return}else if(l.endsWith("[0]")){const d=l.slice(0,-3);d in n||(n[d]=[{}]);const m=n[d];f(m[0],e.slice(a+1),t);return}(!n[l]||typeof n[l]!="object")&&(n[l]={}),n=n[l]}const r=e[e.length-1],i=n[r];if(i!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===i)return;if(typeof i=="object"&&typeof t=="object"&&i!==null&&t!==null)Object.assign(i,t);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[r]=t}function c(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let r=0;r<e.length;r++){if(typeof n!="object"||n===null)return t;const i=e[r];if(i.endsWith("[]")){const a=i.slice(0,-2);if(a in n){const l=n[a];return Array.isArray(l)?l.map(d=>c(d,e.slice(r+1),t)):t}else return t}else n=n[i]}return n}catch(r){if(r instanceof TypeError)return t;throw r}}function wC(n,e){for(const[t,r]of Object.entries(e)){const i=t.split("."),a=r.split("."),l=new Set;let d=-1;for(let m=0;m<i.length;m++)if(i[m]==="*"){d=m;break}if(d!==-1&&a.length>d)for(let m=d;m<a.length;m++){const p=a[m];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&l.add(p)}uh(n,i,a,0,l)}}function uh(n,e,t,r,i){if(r>=e.length||typeof n!="object"||n===null)return;const a=e[r];if(a.endsWith("[]")){const l=a.slice(0,-2),d=n;if(l in d&&Array.isArray(d[l]))for(const m of d[l])uh(m,e,t,r+1,i)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const l=n,d=Object.keys(l).filter(p=>!p.startsWith("_")&&!i.has(p)),m={};for(const p of d)m[p]=l[p];for(const[p,y]of Object.entries(m)){const _=[];for(const I of t.slice(r))I==="*"?_.push(p):_.push(I);f(l,_,y)}for(const p of d)delete l[p]}}else{const l=n;a in l&&uh(l[a],e,t,r+1,i)}}function Yh(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function CC(n){const e={},t=c(n,["operationName"]);t!=null&&f(e,["operationName"],t);const r=c(n,["resourceName"]);return r!=null&&f(e,["_url","resourceName"],r),e}function AC(n){const e={},t=c(n,["name"]);t!=null&&f(e,["name"],t);const r=c(n,["metadata"]);r!=null&&f(e,["metadata"],r);const i=c(n,["done"]);i!=null&&f(e,["done"],i);const a=c(n,["error"]);a!=null&&f(e,["error"],a);const l=c(n,["response","generateVideoResponse"]);return l!=null&&f(e,["response"],PC(l)),e}function RC(n){const e={},t=c(n,["name"]);t!=null&&f(e,["name"],t);const r=c(n,["metadata"]);r!=null&&f(e,["metadata"],r);const i=c(n,["done"]);i!=null&&f(e,["done"],i);const a=c(n,["error"]);a!=null&&f(e,["error"],a);const l=c(n,["response"]);return l!=null&&f(e,["response"],NC(l)),e}function PC(n){const e={},t=c(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>kC(l))),f(e,["generatedVideos"],a)}const r=c(n,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=c(n,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function NC(n){const e={},t=c(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>xC(l))),f(e,["generatedVideos"],a)}const r=c(n,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=c(n,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function kC(n){const e={},t=c(n,["video"]);return t!=null&&f(e,["video"],UC(t)),e}function xC(n){const e={},t=c(n,["_self"]);return t!=null&&f(e,["video"],FC(t)),e}function MC(n){const e={},t=c(n,["operationName"]);return t!=null&&f(e,["_url","operationName"],t),e}function DC(n){const e={},t=c(n,["operationName"]);return t!=null&&f(e,["_url","operationName"],t),e}function LC(n){const e={},t=c(n,["name"]);t!=null&&f(e,["name"],t);const r=c(n,["metadata"]);r!=null&&f(e,["metadata"],r);const i=c(n,["done"]);i!=null&&f(e,["done"],i);const a=c(n,["error"]);a!=null&&f(e,["error"],a);const l=c(n,["response"]);return l!=null&&f(e,["response"],VC(l)),e}function VC(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["parent"]);r!=null&&f(e,["parent"],r);const i=c(n,["documentName"]);return i!=null&&f(e,["documentName"],i),e}function WE(n){const e={},t=c(n,["name"]);t!=null&&f(e,["name"],t);const r=c(n,["metadata"]);r!=null&&f(e,["metadata"],r);const i=c(n,["done"]);i!=null&&f(e,["done"],i);const a=c(n,["error"]);a!=null&&f(e,["error"],a);const l=c(n,["response"]);return l!=null&&f(e,["response"],bC(l)),e}function bC(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["parent"]);r!=null&&f(e,["parent"],r);const i=c(n,["documentName"]);return i!=null&&f(e,["documentName"],i),e}function UC(n){const e={},t=c(n,["uri"]);t!=null&&f(e,["uri"],t);const r=c(n,["encodedVideo"]);r!=null&&f(e,["videoBytes"],Yh(r));const i=c(n,["encoding"]);return i!=null&&f(e,["mimeType"],i),e}function FC(n){const e={},t=c(n,["gcsUri"]);t!=null&&f(e,["uri"],t);const r=c(n,["bytesBase64Encoded"]);r!=null&&f(e,["videoBytes"],Yh(r));const i=c(n,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}var hy;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(hy||(hy={}));var py;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(py||(py={}));var my;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(my||(my={}));var Tt;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Tt||(Tt={}));var gy;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(gy||(gy={}));var yy;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(yy||(yy={}));var vy;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(vy||(vy={}));var _y;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(_y||(_y={}));var Ey;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Ey||(Ey={}));var Ty;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Ty||(Ty={}));var Iy;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Iy||(Iy={}));var Sy;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(Sy||(Sy={}));var wy;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(wy||(wy={}));var Cy;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Cy||(Cy={}));var Ay;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Ay||(Ay={}));var Ry;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(Ry||(Ry={}));var Py;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Py||(Py={}));var Ny;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Ny||(Ny={}));var ky;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(ky||(ky={}));var xy;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(xy||(xy={}));var My;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(My||(My={}));var Ec;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Ec||(Ec={}));var Dy;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Dy||(Dy={}));var Ly;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Ly||(Ly={}));var Vy;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Vy||(Vy={}));var ch;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ch||(ch={}));var by;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(by||(by={}));var Uy;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Uy||(Uy={}));var dh;(function(n){n.COLLECTION="COLLECTION"})(dh||(dh={}));var Fy;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Fy||(Fy={}));var Oy;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Oy||(Oy={}));var Tc;(function(n){n.PREDICT="PREDICT",n.EMBED_CONTENT="EMBED_CONTENT"})(Tc||(Tc={}));var Gy;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Gy||(Gy={}));var By;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(By||(By={}));var Hy;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Hy||(Hy={}));var qy;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(qy||(qy={}));var zy;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(zy||(zy={}));var $y;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})($y||($y={}));var Wy;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Wy||(Wy={}));var Jy;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Jy||(Jy={}));var Ky;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Ky||(Ky={}));var Yy;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Yy||(Yy={}));var Qy;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Qy||(Qy={}));var Xy;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(Xy||(Xy={}));var Zy;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(Zy||(Zy={}));var jy;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(jy||(jy={}));var ev;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(ev||(ev={}));var tv;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(tv||(tv={}));var nv;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(nv||(nv={}));var rv;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(rv||(rv={}));var iv;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(iv||(iv={}));var ov;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ov||(ov={}));var sv;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(sv||(sv={}));var av;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(av||(av={}));var lv;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(lv||(lv={}));var uv;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(uv||(uv={}));var cv;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(cv||(cv={}));var Ss;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Ss||(Ss={}));class fh{constructor(e){const t={};for(const r of e.headers.entries())t[r[0]]=r[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ya{get text(){var e,t,r,i,a,l,d,m;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",y=!1;const _=[];for(const I of(m=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[C,D]of Object.entries(I))C!=="text"&&C!=="thought"&&C!=="thoughtSignature"&&(D!==null||D!==void 0)&&_.push(C);if(typeof I.text=="string"){if(typeof I.thought=="boolean"&&I.thought)continue;y=!0,p+=I.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?p:void 0}get data(){var e,t,r,i,a,l,d,m;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const y=[];for(const _ of(m=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[I,C]of Object.entries(_))I!=="inlineData"&&(C!==null||C!==void 0)&&y.push(I);_.inlineData&&typeof _.inlineData.data=="string"&&(p+=atob(_.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,r,i,a,l,d,m;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(m=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if(p?.length!==0)return p}get executableCode(){var e,t,r,i,a,l,d,m,p;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(m=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if(y?.length!==0)return(p=y?.[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,r,i,a,l,d,m,p;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(m=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if(y?.length!==0)return(p=y?.[0])===null||p===void 0?void 0:p.output}}class dv{}class fv{}class OC{}class GC{}class BC{}class HC{}class hv{}class pv{}class mv{}class qC{}class Ic{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new Ic;let i;const a=e;return t?i=RC(a):i=AC(a),Object.assign(r,i),r}}class gv{}class yv{}class vv{}class _v{}class zC{}class $C{}class WC{}class Qh{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new Qh,a=LC(e);return Object.assign(r,a),r}}class JC{}class KC{}class YC{}class QC{}class Ev{}class XC{get text(){var e,t,r;let i="",a=!1;const l=[];for(const d of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[m,p]of Object.entries(d))m!=="text"&&m!=="thought"&&p!==null&&l.push(m);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,i+=d.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?i:void 0}get data(){var e,t,r;let i="";const a=[];for(const l of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[d,m]of Object.entries(l))d!=="inlineData"&&m!==null&&a.push(d);l.inlineData&&typeof l.inlineData.data=="string"&&(i+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class ZC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Xh{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new Xh,a=WE(e);return Object.assign(r,a),r}}function Be(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function JE(n,e){const t=Be(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function KE(n){return Array.isArray(n)?n.map(e=>Sc(e)):[Sc(n)]}function Sc(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function YE(n){const e=Sc(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function QE(n){const e=Sc(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Tv(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function XE(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Tv(e)):[Tv(n)]}function hh(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Iv(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Sv(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Rt(n){if(n==null)throw new Error("ContentUnion is required");return hh(n)?n:{role:"user",parts:XE(n)}}function Zh(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const r=Rt(t);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){const t=Rt(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Rt(t)):[Rt(e)]}function gn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Iv(n)||Sv(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Rt(n)]}const e=[],t=[],r=hh(n[0]);for(const i of n){const a=hh(i);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(i);else{if(Iv(i)||Sv(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(i)}}return r||e.push({role:"user",parts:XE(t)}),e}function jC(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(r=>r!=="null");if(t.length===1)e.type=Object.values(Tt).includes(t[0].toUpperCase())?t[0].toUpperCase():Tt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of t)e.anyOf.push({type:Object.values(Tt).includes(r.toUpperCase())?r.toUpperCase():Tt.TYPE_UNSPECIFIED})}}function As(n){const e={},t=["items"],r=["anyOf"],i=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&jC(n.type,e);for(const[l,d]of Object.entries(n))if(d!=null)if(l=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Tt).includes(d.toUpperCase())?d.toUpperCase():Tt.TYPE_UNSPECIFIED}else if(t.includes(l))e[l]=As(d);else if(r.includes(l)){const m=[];for(const p of d){if(p.type=="null"){e.nullable=!0;continue}m.push(As(p))}e[l]=m}else if(i.includes(l)){const m={};for(const[p,y]of Object.entries(d))m[p]=As(y);e[l]=m}else{if(l==="additionalProperties")continue;e[l]=d}return e}function jh(n){return As(n)}function ep(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function tp(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function qs(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=As(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=As(e.response));return n}function zs(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function eA(n,e,t,r=1){const i=!e.startsWith(`${t}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:i?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:i?`${t}/${e}`:e}function Kr(n,e){if(typeof e!="string")throw new Error("name must be a string");return eA(n,e,"cachedContents")}function ZE(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Gi(n){return Yh(n)}function tA(n){return n!=null&&typeof n=="object"&&"name"in n}function nA(n){return n!=null&&typeof n=="object"&&"video"in n}function rA(n){return n!=null&&typeof n=="object"&&"uri"in n}function jE(n){var e;let t;if(tA(n)&&(t=n.name),!(rA(n)&&(t=n.uri,t===void 0))&&!(nA(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const i=t.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${t}`);t=i[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function eT(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function tT(n){for(const e of["models","tunedModels","publisherModels"])if(iA(n,e))return n[e];return[]}function iA(n,e){return n!==null&&typeof n=="object"&&e in n}function oA(n,e={}){const t=n,r={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(r.responseJsonSchema=t.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function sA(n,e={}){const t=[],r=new Set;for(const i of n){const a=i.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const l=oA(i,e);l.functionDeclarations&&t.push(...l.functionDeclarations)}return{functionDeclarations:t}}function nT(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const r=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,i=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function aA(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function rT(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const i=t.inlinedResponses;if(!Array.isArray(i)||i.length===0)return n;let a=!1;for(const l of i){if(typeof l!="object"||l===null)continue;const m=l.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function $s(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function iT(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function lA(n){return n.includes("gemini")&&n!=="gemini-embedding-001"||n.includes("maas")}function uA(n){const e={},t=c(n,["responsesFile"]);t!=null&&f(e,["fileName"],t);const r=c(n,["inlinedResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>qA(l))),f(e,["inlinedResponses"],a)}const i=c(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["inlinedEmbedContentResponses"],a)}return e}function cA(n){const e={},t=c(n,["predictionsFormat"]);t!=null&&f(e,["format"],t);const r=c(n,["gcsDestination","outputUriPrefix"]);r!=null&&f(e,["gcsUri"],r);const i=c(n,["bigqueryDestination","outputUri"]);return i!=null&&f(e,["bigqueryUri"],i),e}function dA(n){const e={},t=c(n,["format"]);t!=null&&f(e,["predictionsFormat"],t);const r=c(n,["gcsUri"]);r!=null&&f(e,["gcsDestination","outputUriPrefix"],r);const i=c(n,["bigqueryUri"]);if(i!=null&&f(e,["bigqueryDestination","outputUri"],i),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ac(n){const e={},t=c(n,["name"]);t!=null&&f(e,["name"],t);const r=c(n,["metadata","displayName"]);r!=null&&f(e,["displayName"],r);const i=c(n,["metadata","state"]);i!=null&&f(e,["state"],iT(i));const a=c(n,["metadata","createTime"]);a!=null&&f(e,["createTime"],a);const l=c(n,["metadata","endTime"]);l!=null&&f(e,["endTime"],l);const d=c(n,["metadata","updateTime"]);d!=null&&f(e,["updateTime"],d);const m=c(n,["metadata","model"]);m!=null&&f(e,["model"],m);const p=c(n,["metadata","output"]);return p!=null&&f(e,["dest"],uA(rT(p))),e}function ph(n){const e={},t=c(n,["name"]);t!=null&&f(e,["name"],t);const r=c(n,["displayName"]);r!=null&&f(e,["displayName"],r);const i=c(n,["state"]);i!=null&&f(e,["state"],iT(i));const a=c(n,["error"]);a!=null&&f(e,["error"],a);const l=c(n,["createTime"]);l!=null&&f(e,["createTime"],l);const d=c(n,["startTime"]);d!=null&&f(e,["startTime"],d);const m=c(n,["endTime"]);m!=null&&f(e,["endTime"],m);const p=c(n,["updateTime"]);p!=null&&f(e,["updateTime"],p);const y=c(n,["model"]);y!=null&&f(e,["model"],y);const _=c(n,["inputConfig"]);_!=null&&f(e,["src"],fA(_));const I=c(n,["outputConfig"]);I!=null&&f(e,["dest"],cA(rT(I)));const C=c(n,["completionStats"]);return C!=null&&f(e,["completionStats"],C),e}function fA(n){const e={},t=c(n,["instancesFormat"]);t!=null&&f(e,["format"],t);const r=c(n,["gcsSource","uris"]);r!=null&&f(e,["gcsUri"],r);const i=c(n,["bigquerySource","inputUri"]);return i!=null&&f(e,["bigqueryUri"],i),e}function hA(n,e){const t={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=c(e,["fileName"]);r!=null&&f(t,["fileName"],r);const i=c(e,["inlinedRequests"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>HA(n,l))),f(t,["requests","requests"],a)}return t}function pA(n){const e={},t=c(n,["format"]);t!=null&&f(e,["instancesFormat"],t);const r=c(n,["gcsUri"]);r!=null&&f(e,["gcsSource","uris"],r);const i=c(n,["bigqueryUri"]);if(i!=null&&f(e,["bigquerySource","inputUri"],i),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function mA(n){const e={},t=c(n,["data"]);if(t!=null&&f(e,["data"],t),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function gA(n,e){const t={},r=c(e,["name"]);return r!=null&&f(t,["_url","name"],$s(n,r)),t}function yA(n,e){const t={},r=c(e,["name"]);return r!=null&&f(t,["_url","name"],$s(n,r)),t}function vA(n){const e={},t=c(n,["content"]);t!=null&&f(e,["content"],t);const r=c(n,["citationMetadata"]);r!=null&&f(e,["citationMetadata"],_A(r));const i=c(n,["tokenCount"]);i!=null&&f(e,["tokenCount"],i);const a=c(n,["finishReason"]);a!=null&&f(e,["finishReason"],a);const l=c(n,["avgLogprobs"]);l!=null&&f(e,["avgLogprobs"],l);const d=c(n,["groundingMetadata"]);d!=null&&f(e,["groundingMetadata"],d);const m=c(n,["index"]);m!=null&&f(e,["index"],m);const p=c(n,["logprobsResult"]);p!=null&&f(e,["logprobsResult"],p);const y=c(n,["safetyRatings"]);if(y!=null){let I=y;Array.isArray(I)&&(I=I.map(C=>C)),f(e,["safetyRatings"],I)}const _=c(n,["urlContextMetadata"]);return _!=null&&f(e,["urlContextMetadata"],_),e}function _A(n){const e={},t=c(n,["citationSources"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["citations"],r)}return e}function oT(n){const e={},t=c(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(a=>QA(a))),f(e,["parts"],i)}const r=c(n,["role"]);return r!=null&&f(e,["role"],r),e}function EA(n,e){const t={},r=c(n,["displayName"]);if(e!==void 0&&r!=null&&f(e,["batch","displayName"],r),c(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function TA(n,e){const t={},r=c(n,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const i=c(n,["dest"]);return e!==void 0&&i!=null&&f(e,["outputConfig"],dA(aA(i))),t}function wv(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["_url","model"],Be(n,r));const i=c(e,["src"]);i!=null&&f(t,["batch","inputConfig"],hA(n,nT(n,i)));const a=c(e,["config"]);return a!=null&&EA(a,t),t}function IA(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["model"],Be(n,r));const i=c(e,["src"]);i!=null&&f(t,["inputConfig"],pA(nT(n,i)));const a=c(e,["config"]);return a!=null&&TA(a,t),t}function SA(n,e){const t={},r=c(n,["displayName"]);return e!==void 0&&r!=null&&f(e,["batch","displayName"],r),t}function wA(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["_url","model"],Be(n,r));const i=c(e,["src"]);i!=null&&f(t,["batch","inputConfig"],xA(n,i));const a=c(e,["config"]);return a!=null&&SA(a,t),t}function CA(n,e){const t={},r=c(e,["name"]);return r!=null&&f(t,["_url","name"],$s(n,r)),t}function AA(n,e){const t={},r=c(e,["name"]);return r!=null&&f(t,["_url","name"],$s(n,r)),t}function RA(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["name"]);r!=null&&f(e,["name"],r);const i=c(n,["done"]);i!=null&&f(e,["done"],i);const a=c(n,["error"]);return a!=null&&f(e,["error"],a),e}function PA(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["name"]);r!=null&&f(e,["name"],r);const i=c(n,["done"]);i!=null&&f(e,["done"],i);const a=c(n,["error"]);return a!=null&&f(e,["error"],a),e}function NA(n,e){const t={},r=c(e,["contents"]);if(r!=null){let a=Zh(n,r);Array.isArray(a)&&(a=a.map(l=>l)),f(t,["requests[]","request","content"],a)}const i=c(e,["config"]);return i!=null&&(f(t,["_self"],kA(i,t)),wC(t,{"requests[].*":"requests[].request.*"})),t}function kA(n,e){const t={},r=c(n,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);const i=c(n,["title"]);e!==void 0&&i!=null&&f(e,["requests[]","title"],i);const a=c(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&f(e,["requests[]","outputDimensionality"],a),c(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function xA(n,e){const t={},r=c(e,["fileName"]);r!=null&&f(t,["file_name"],r);const i=c(e,["inlinedRequests"]);return i!=null&&f(t,["requests"],NA(n,i)),t}function MA(n){const e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=c(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);const r=c(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function DA(n){const e={},t=c(n,["id"]);t!=null&&f(e,["id"],t);const r=c(n,["args"]);r!=null&&f(e,["args"],r);const i=c(n,["name"]);if(i!=null&&f(e,["name"],i),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function LA(n){const e={},t=c(n,["allowedFunctionNames"]);t!=null&&f(e,["allowedFunctionNames"],t);const r=c(n,["mode"]);if(r!=null&&f(e,["mode"],r),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function VA(n,e,t){const r={},i=c(e,["systemInstruction"]);t!==void 0&&i!=null&&f(t,["systemInstruction"],oT(Rt(i)));const a=c(e,["temperature"]);a!=null&&f(r,["temperature"],a);const l=c(e,["topP"]);l!=null&&f(r,["topP"],l);const d=c(e,["topK"]);d!=null&&f(r,["topK"],d);const m=c(e,["candidateCount"]);m!=null&&f(r,["candidateCount"],m);const p=c(e,["maxOutputTokens"]);p!=null&&f(r,["maxOutputTokens"],p);const y=c(e,["stopSequences"]);y!=null&&f(r,["stopSequences"],y);const _=c(e,["responseLogprobs"]);_!=null&&f(r,["responseLogprobs"],_);const I=c(e,["logprobs"]);I!=null&&f(r,["logprobs"],I);const C=c(e,["presencePenalty"]);C!=null&&f(r,["presencePenalty"],C);const D=c(e,["frequencyPenalty"]);D!=null&&f(r,["frequencyPenalty"],D);const b=c(e,["seed"]);b!=null&&f(r,["seed"],b);const N=c(e,["responseMimeType"]);N!=null&&f(r,["responseMimeType"],N);const B=c(e,["responseSchema"]);B!=null&&f(r,["responseSchema"],jh(B));const K=c(e,["responseJsonSchema"]);if(K!=null&&f(r,["responseJsonSchema"],K),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Y=c(e,["safetySettings"]);if(t!==void 0&&Y!=null){let k=Y;Array.isArray(k)&&(k=k.map(Te=>XA(Te))),f(t,["safetySettings"],k)}const Q=c(e,["tools"]);if(t!==void 0&&Q!=null){let k=zs(Q);Array.isArray(k)&&(k=k.map(Te=>jA(qs(Te)))),f(t,["tools"],k)}const le=c(e,["toolConfig"]);if(t!==void 0&&le!=null&&f(t,["toolConfig"],ZA(le)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const J=c(e,["cachedContent"]);t!==void 0&&J!=null&&f(t,["cachedContent"],Kr(n,J));const M=c(e,["responseModalities"]);M!=null&&f(r,["responseModalities"],M);const R=c(e,["mediaResolution"]);R!=null&&f(r,["mediaResolution"],R);const P=c(e,["speechConfig"]);if(P!=null&&f(r,["speechConfig"],ep(P)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=c(e,["thinkingConfig"]);L!=null&&f(r,["thinkingConfig"],L);const V=c(e,["imageConfig"]);V!=null&&f(r,["imageConfig"],BA(V));const F=c(e,["enableEnhancedCivicAnswers"]);if(F!=null&&f(r,["enableEnhancedCivicAnswers"],F),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function bA(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["candidates"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(p=>vA(p))),f(e,["candidates"],m)}const i=c(n,["modelVersion"]);i!=null&&f(e,["modelVersion"],i);const a=c(n,["promptFeedback"]);a!=null&&f(e,["promptFeedback"],a);const l=c(n,["responseId"]);l!=null&&f(e,["responseId"],l);const d=c(n,["usageMetadata"]);return d!=null&&f(e,["usageMetadata"],d),e}function UA(n,e){const t={},r=c(e,["name"]);return r!=null&&f(t,["_url","name"],$s(n,r)),t}function FA(n,e){const t={},r=c(e,["name"]);return r!=null&&f(t,["_url","name"],$s(n,r)),t}function OA(n){const e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=c(n,["enableWidget"]);return t!=null&&f(e,["enableWidget"],t),e}function GA(n){const e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=c(n,["timeRangeFilter"]);return t!=null&&f(e,["timeRangeFilter"],t),e}function BA(n){const e={},t=c(n,["aspectRatio"]);t!=null&&f(e,["aspectRatio"],t);const r=c(n,["imageSize"]);if(r!=null&&f(e,["imageSize"],r),c(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function HA(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["request","model"],Be(n,r));const i=c(e,["contents"]);if(i!=null){let d=gn(i);Array.isArray(d)&&(d=d.map(m=>oT(m))),f(t,["request","contents"],d)}const a=c(e,["metadata"]);a!=null&&f(t,["metadata"],a);const l=c(e,["config"]);return l!=null&&f(t,["request","generationConfig"],VA(n,l,c(t,["request"],{}))),t}function qA(n){const e={},t=c(n,["response"]);t!=null&&f(e,["response"],bA(t));const r=c(n,["metadata"]);r!=null&&f(e,["metadata"],r);const i=c(n,["error"]);return i!=null&&f(e,["error"],i),e}function zA(n,e){const t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(n,["pageToken"]);if(e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),c(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function $A(n,e){const t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(n,["pageToken"]);e!==void 0&&i!=null&&f(e,["_query","pageToken"],i);const a=c(n,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),t}function WA(n){const e={},t=c(n,["config"]);return t!=null&&zA(t,e),e}function JA(n){const e={},t=c(n,["config"]);return t!=null&&$A(t,e),e}function KA(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(n,["operations"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>ac(l))),f(e,["batchJobs"],a)}return e}function YA(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(n,["batchPredictionJobs"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>ph(l))),f(e,["batchJobs"],a)}return e}function QA(n){const e={},t=c(n,["mediaResolution"]);t!=null&&f(e,["mediaResolution"],t);const r=c(n,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=c(n,["executableCode"]);i!=null&&f(e,["executableCode"],i);const a=c(n,["fileData"]);a!=null&&f(e,["fileData"],MA(a));const l=c(n,["functionCall"]);l!=null&&f(e,["functionCall"],DA(l));const d=c(n,["functionResponse"]);d!=null&&f(e,["functionResponse"],d);const m=c(n,["inlineData"]);m!=null&&f(e,["inlineData"],mA(m));const p=c(n,["text"]);p!=null&&f(e,["text"],p);const y=c(n,["thought"]);y!=null&&f(e,["thought"],y);const _=c(n,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const I=c(n,["videoMetadata"]);return I!=null&&f(e,["videoMetadata"],I),e}function XA(n){const e={},t=c(n,["category"]);if(t!=null&&f(e,["category"],t),c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=c(n,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function ZA(n){const e={},t=c(n,["retrievalConfig"]);t!=null&&f(e,["retrievalConfig"],t);const r=c(n,["functionCallingConfig"]);return r!=null&&f(e,["functionCallingConfig"],LA(r)),e}function jA(n){const e={};if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=c(n,["computerUse"]);t!=null&&f(e,["computerUse"],t);const r=c(n,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);const i=c(n,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(n,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(_=>_)),f(e,["functionDeclarations"],y)}const l=c(n,["googleMaps"]);l!=null&&f(e,["googleMaps"],OA(l));const d=c(n,["googleSearch"]);d!=null&&f(e,["googleSearch"],GA(d));const m=c(n,["googleSearchRetrieval"]);m!=null&&f(e,["googleSearchRetrieval"],m);const p=c(n,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}var qr;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(qr||(qr={}));class No{constructor(e,t,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,r,i)}init(e,t,r){var i,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t?.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!r||Object.keys(r).length===0?l={config:{}}:typeof r=="object"?l=Object.assign({},r):l=r,l.config&&(l.config.pageToken=t.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(i=l.config)===null||i===void 0?void 0:i.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}class eR extends Jr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new No(qr.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=wv(this.apiClient,e),r=t._url,i=ue("{model}:batchGenerateContent",r),d=t.batch.inputConfig.requests,m=d.requests,p=[];for(const y of m){const _=Object.assign({},y);if(_.systemInstruction){const I=_.systemInstruction;delete _.systemInstruction;const C=_.request;C.systemInstruction=I,_.request=C}p.push(_)}return d.requests=p,delete t.config,delete t._url,delete t._query,{path:i,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const r=t?Object.assign({},t):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const a=this.getGcsUri(e),l=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?r.dest=`${a.slice(0,-6)}/dest`:r.dest=`${a}_dest_${i}`;else if(l)r.dest=`${l}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=IA(this.apiClient,e);return d=ue("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>ph(y))}else{const p=wv(this.apiClient,e);return d=ue("{model}:batchGenerateContent",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>ac(y))}}async createEmbeddingsInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=wA(this.apiClient,e);return a=ue("{model}:asyncBatchEmbedContent",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(m=>ac(m))}}async get(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=FA(this.apiClient,e);return d=ue("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>ph(y))}else{const p=UA(this.apiClient,e);return d=ue("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>ac(y))}}async cancel(e){var t,r,i,a;let l="",d={};if(this.apiClient.isVertexAI()){const m=yA(this.apiClient,e);l=ue("batchPredictionJobs/{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const m=gA(this.apiClient,e);l=ue("batches/{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=JA(e);return d=ue("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const _=YA(y),I=new Ev;return Object.assign(I,_),I})}else{const p=WA(e);return d=ue("batches",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const _=KA(y),I=new Ev;return Object.assign(I,_),I})}}async delete(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=AA(this.apiClient,e);return d=ue("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>PA(y))}else{const p=CA(this.apiClient,e);return d=ue("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>RA(y))}}}function tR(n){const e={},t=c(n,["data"]);if(t!=null&&f(e,["data"],t),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Cv(n){const e={},t=c(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(a=>wR(a))),f(e,["parts"],i)}const r=c(n,["role"]);return r!=null&&f(e,["role"],r),e}function nR(n,e){const t={},r=c(n,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=c(n,["expireTime"]);e!==void 0&&i!=null&&f(e,["expireTime"],i);const a=c(n,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const l=c(n,["contents"]);if(e!==void 0&&l!=null){let y=gn(l);Array.isArray(y)&&(y=y.map(_=>Cv(_))),f(e,["contents"],y)}const d=c(n,["systemInstruction"]);e!==void 0&&d!=null&&f(e,["systemInstruction"],Cv(Rt(d)));const m=c(n,["tools"]);if(e!==void 0&&m!=null){let y=m;Array.isArray(y)&&(y=y.map(_=>AR(_))),f(e,["tools"],y)}const p=c(n,["toolConfig"]);if(e!==void 0&&p!=null&&f(e,["toolConfig"],CR(p)),c(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function rR(n,e){const t={},r=c(n,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=c(n,["expireTime"]);e!==void 0&&i!=null&&f(e,["expireTime"],i);const a=c(n,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const l=c(n,["contents"]);if(e!==void 0&&l!=null){let _=gn(l);Array.isArray(_)&&(_=_.map(I=>I)),f(e,["contents"],_)}const d=c(n,["systemInstruction"]);e!==void 0&&d!=null&&f(e,["systemInstruction"],Rt(d));const m=c(n,["tools"]);if(e!==void 0&&m!=null){let _=m;Array.isArray(_)&&(_=_.map(I=>RR(I))),f(e,["tools"],_)}const p=c(n,["toolConfig"]);e!==void 0&&p!=null&&f(e,["toolConfig"],p);const y=c(n,["kmsKeyName"]);return e!==void 0&&y!=null&&f(e,["encryption_spec","kmsKeyName"],y),t}function iR(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["model"],JE(n,r));const i=c(e,["config"]);return i!=null&&nR(i,t),t}function oR(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["model"],JE(n,r));const i=c(e,["config"]);return i!=null&&rR(i,t),t}function sR(n,e){const t={},r=c(e,["name"]);return r!=null&&f(t,["_url","name"],Kr(n,r)),t}function aR(n,e){const t={},r=c(e,["name"]);return r!=null&&f(t,["_url","name"],Kr(n,r)),t}function lR(n){const e={},t=c(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function uR(n){const e={},t=c(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function cR(n){const e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=c(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);const r=c(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function dR(n){const e={},t=c(n,["id"]);t!=null&&f(e,["id"],t);const r=c(n,["args"]);r!=null&&f(e,["args"],r);const i=c(n,["name"]);if(i!=null&&f(e,["name"],i),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function fR(n){const e={},t=c(n,["allowedFunctionNames"]);t!=null&&f(e,["allowedFunctionNames"],t);const r=c(n,["mode"]);if(r!=null&&f(e,["mode"],r),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function hR(n){const e={},t=c(n,["description"]);t!=null&&f(e,["description"],t);const r=c(n,["name"]);r!=null&&f(e,["name"],r);const i=c(n,["parameters"]);i!=null&&f(e,["parameters"],i);const a=c(n,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const l=c(n,["response"]);l!=null&&f(e,["response"],l);const d=c(n,["responseJsonSchema"]);if(d!=null&&f(e,["responseJsonSchema"],d),c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function pR(n,e){const t={},r=c(e,["name"]);return r!=null&&f(t,["_url","name"],Kr(n,r)),t}function mR(n,e){const t={},r=c(e,["name"]);return r!=null&&f(t,["_url","name"],Kr(n,r)),t}function gR(n){const e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=c(n,["enableWidget"]);return t!=null&&f(e,["enableWidget"],t),e}function yR(n){const e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=c(n,["timeRangeFilter"]);return t!=null&&f(e,["timeRangeFilter"],t),e}function vR(n,e){const t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(n,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),t}function _R(n,e){const t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(n,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),t}function ER(n){const e={},t=c(n,["config"]);return t!=null&&vR(t,e),e}function TR(n){const e={},t=c(n,["config"]);return t!=null&&_R(t,e),e}function IR(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(n,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["cachedContents"],a)}return e}function SR(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(n,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["cachedContents"],a)}return e}function wR(n){const e={},t=c(n,["mediaResolution"]);t!=null&&f(e,["mediaResolution"],t);const r=c(n,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=c(n,["executableCode"]);i!=null&&f(e,["executableCode"],i);const a=c(n,["fileData"]);a!=null&&f(e,["fileData"],cR(a));const l=c(n,["functionCall"]);l!=null&&f(e,["functionCall"],dR(l));const d=c(n,["functionResponse"]);d!=null&&f(e,["functionResponse"],d);const m=c(n,["inlineData"]);m!=null&&f(e,["inlineData"],tR(m));const p=c(n,["text"]);p!=null&&f(e,["text"],p);const y=c(n,["thought"]);y!=null&&f(e,["thought"],y);const _=c(n,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const I=c(n,["videoMetadata"]);return I!=null&&f(e,["videoMetadata"],I),e}function CR(n){const e={},t=c(n,["retrievalConfig"]);t!=null&&f(e,["retrievalConfig"],t);const r=c(n,["functionCallingConfig"]);return r!=null&&f(e,["functionCallingConfig"],fR(r)),e}function AR(n){const e={};if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=c(n,["computerUse"]);t!=null&&f(e,["computerUse"],t);const r=c(n,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);const i=c(n,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(n,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(_=>_)),f(e,["functionDeclarations"],y)}const l=c(n,["googleMaps"]);l!=null&&f(e,["googleMaps"],gR(l));const d=c(n,["googleSearch"]);d!=null&&f(e,["googleSearch"],yR(d));const m=c(n,["googleSearchRetrieval"]);m!=null&&f(e,["googleSearchRetrieval"],m);const p=c(n,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function RR(n){const e={},t=c(n,["retrieval"]);t!=null&&f(e,["retrieval"],t);const r=c(n,["computerUse"]);if(r!=null&&f(e,["computerUse"],r),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=c(n,["codeExecution"]);i!=null&&f(e,["codeExecution"],i);const a=c(n,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const l=c(n,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(I=>hR(I))),f(e,["functionDeclarations"],_)}const d=c(n,["googleMaps"]);d!=null&&f(e,["googleMaps"],d);const m=c(n,["googleSearch"]);m!=null&&f(e,["googleSearch"],m);const p=c(n,["googleSearchRetrieval"]);p!=null&&f(e,["googleSearchRetrieval"],p);const y=c(n,["urlContext"]);return y!=null&&f(e,["urlContext"],y),e}function PR(n,e){const t={},r=c(n,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=c(n,["expireTime"]);return e!==void 0&&i!=null&&f(e,["expireTime"],i),t}function NR(n,e){const t={},r=c(n,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=c(n,["expireTime"]);return e!==void 0&&i!=null&&f(e,["expireTime"],i),t}function kR(n,e){const t={},r=c(e,["name"]);r!=null&&f(t,["_url","name"],Kr(n,r));const i=c(e,["config"]);return i!=null&&PR(i,t),t}function xR(n,e){const t={},r=c(e,["name"]);r!=null&&f(t,["_url","name"],Kr(n,r));const i=c(e,["config"]);return i!=null&&NR(i,t),t}class MR extends Jr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new No(qr.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(t),t)}async create(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=oR(this.apiClient,e);return d=ue("cachedContents",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const p=iR(this.apiClient,e);return d=ue("cachedContents",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async get(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=mR(this.apiClient,e);return d=ue("{name}",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const p=pR(this.apiClient,e);return d=ue("{name}",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async delete(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=aR(this.apiClient,e);return d=ue("{name}",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const _=uR(y),I=new vv;return Object.assign(I,_),I})}else{const p=sR(this.apiClient,e);return d=ue("{name}",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const _=lR(y),I=new vv;return Object.assign(I,_),I})}}async update(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=xR(this.apiClient,e);return d=ue("{name}",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const p=kR(this.apiClient,e);return d=ue("{name}",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async listInternal(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=TR(e);return d=ue("cachedContents",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const _=SR(y),I=new _v;return Object.assign(I,_),I})}else{const p=ER(e);return d=ue("cachedContents",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const _=IR(y),I=new _v;return Object.assign(I,_),I})}}}function wc(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Av(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function we(n){return this instanceof we?(this.v=n,this):new we(n)}function qn(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",l),i[Symbol.asyncIterator]=function(){return this},i;function l(C){return function(D){return Promise.resolve(D).then(C,_)}}function d(C,D){r[C]&&(i[C]=function(b){return new Promise(function(N,B){a.push([C,b,N,B])>1||m(C,b)})},D&&(i[C]=D(i[C])))}function m(C,D){try{p(r[C](D))}catch(b){I(a[0][3],b)}}function p(C){C.value instanceof we?Promise.resolve(C.value.v).then(y,_):I(a[0][2],C)}function y(C){m("next",C)}function _(C){m("throw",C)}function I(C,D){C(D),a.shift(),a.length&&m(a[0][0],a[0][1])}}function zn(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Av=="function"?Av(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(a){t[a]=n[a]&&function(l){return new Promise(function(d,m){l=n[a](l),i(d,m,l.done,l.value)})}}function i(a,l,d,m){Promise.resolve(m).then(function(p){a({value:p,done:d})},l)}}function DR(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:sT(t)}function sT(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function LR(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Rv(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let r=0;for(;r<t;)if(n[r].role==="user")e.push(n[r]),r++;else{const i=[];let a=!0;for(;r<t&&n[r].role==="model";)i.push(n[r]),a&&!sT(n[r])&&(a=!1),r++;a?e.push(...i):e.pop()}return e}class VR{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new bR(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class bR{constructor(e,t,r,i={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=r,this.config=i,this.history=a,this.sendPromise=Promise.resolve(),LR(a)}async sendMessage(e){var t;await this.sendPromise;const r=Rt(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,l,d;const m=await i,p=(l=(a=m.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,y=m.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let I=[];y!=null&&(I=(d=y.slice(_))!==null&&d!==void 0?d:[]);const C=p?[p]:[];this.recordHistory(r,C,I)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var t;await this.sendPromise;const r=Rt(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const a=await i;return this.processStreamResponse(a,r)}getHistory(e=!1){const t=e?Rv(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return qn(this,arguments,function*(){var i,a,l,d,m,p;const y=[];try{for(var _=!0,I=zn(e),C;C=yield we(I.next()),i=C.done,!i;_=!0){d=C.value,_=!1;const D=d;if(DR(D)){const b=(p=(m=D.candidates)===null||m===void 0?void 0:m[0])===null||p===void 0?void 0:p.content;b!==void 0&&y.push(b)}yield yield we(D)}}catch(D){a={error:D}}finally{try{!_&&!i&&(l=I.return)&&(yield we(l.call(I)))}finally{if(a)throw a.error}}this.recordHistory(t,y)})}recordHistory(e,t,r){let i=[];t.length>0&&t.every(a=>a.role!==void 0)?i=t:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Rv(r)):this.history.push(e),this.history.push(...i)}}class ll extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ll.prototype)}}function UR(n){const e={},t=c(n,["file"]);return t!=null&&f(e,["file"],t),e}function FR(n){const e={},t=c(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function OR(n){const e={},t=c(n,["name"]);return t!=null&&f(e,["_url","file"],jE(t)),e}function GR(n){const e={},t=c(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}function BR(n){const e={},t=c(n,["name"]);return t!=null&&f(e,["_url","file"],jE(t)),e}function HR(n){const e={},t=c(n,["uris"]);return t!=null&&f(e,["uris"],t),e}function qR(n,e){const t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(n,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),t}function zR(n){const e={},t=c(n,["config"]);return t!=null&&qR(t,e),e}function $R(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(n,["files"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["files"],a)}return e}function WR(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),f(e,["files"],i)}return e}class JR extends Jr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new No(qr.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=zR(e);return a=ue("files",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),i.then(m=>{const p=$R(m),y=new JC;return Object.assign(y,p),y})}}async createInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=UR(e);return a=ue("upload/v1beta/files",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(m=>{const p=FR(m),y=new KC;return Object.assign(y,p),y})}}async get(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=BR(e);return a=ue("files/{file}",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(m=>m)}}async delete(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=OR(e);return a=ue("files/{file}",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),i.then(m=>{const p=GR(m),y=new YC;return Object.assign(y,p),y})}}async registerFilesInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=HR(e);return a=ue("files:register",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(m=>{const p=WR(m),y=new QC;return Object.assign(y,p),y})}}}function lc(n){const e={},t=c(n,["data"]);if(t!=null&&f(e,["data"],t),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function KR(n){const e={},t=c(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(a=>cP(a))),f(e,["parts"],i)}const r=c(n,["role"]);return r!=null&&f(e,["role"],r),e}function YR(n){const e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=c(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);const r=c(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function QR(n){const e={},t=c(n,["id"]);t!=null&&f(e,["id"],t);const r=c(n,["args"]);r!=null&&f(e,["args"],r);const i=c(n,["name"]);if(i!=null&&f(e,["name"],i),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function XR(n){const e={},t=c(n,["description"]);t!=null&&f(e,["description"],t);const r=c(n,["name"]);r!=null&&f(e,["name"],r);const i=c(n,["parameters"]);i!=null&&f(e,["parameters"],i);const a=c(n,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const l=c(n,["response"]);l!=null&&f(e,["response"],l);const d=c(n,["responseJsonSchema"]);if(d!=null&&f(e,["responseJsonSchema"],d),c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function ZR(n){const e={},t=c(n,["modelSelectionConfig"]);t!=null&&f(e,["modelConfig"],t);const r=c(n,["responseJsonSchema"]);r!=null&&f(e,["responseJsonSchema"],r);const i=c(n,["audioTimestamp"]);i!=null&&f(e,["audioTimestamp"],i);const a=c(n,["candidateCount"]);a!=null&&f(e,["candidateCount"],a);const l=c(n,["enableAffectiveDialog"]);l!=null&&f(e,["enableAffectiveDialog"],l);const d=c(n,["frequencyPenalty"]);d!=null&&f(e,["frequencyPenalty"],d);const m=c(n,["logprobs"]);m!=null&&f(e,["logprobs"],m);const p=c(n,["maxOutputTokens"]);p!=null&&f(e,["maxOutputTokens"],p);const y=c(n,["mediaResolution"]);y!=null&&f(e,["mediaResolution"],y);const _=c(n,["presencePenalty"]);_!=null&&f(e,["presencePenalty"],_);const I=c(n,["responseLogprobs"]);I!=null&&f(e,["responseLogprobs"],I);const C=c(n,["responseMimeType"]);C!=null&&f(e,["responseMimeType"],C);const D=c(n,["responseModalities"]);D!=null&&f(e,["responseModalities"],D);const b=c(n,["responseSchema"]);b!=null&&f(e,["responseSchema"],b);const N=c(n,["routingConfig"]);N!=null&&f(e,["routingConfig"],N);const B=c(n,["seed"]);B!=null&&f(e,["seed"],B);const K=c(n,["speechConfig"]);K!=null&&f(e,["speechConfig"],K);const Y=c(n,["stopSequences"]);Y!=null&&f(e,["stopSequences"],Y);const Q=c(n,["temperature"]);Q!=null&&f(e,["temperature"],Q);const le=c(n,["thinkingConfig"]);le!=null&&f(e,["thinkingConfig"],le);const J=c(n,["topK"]);J!=null&&f(e,["topK"],J);const M=c(n,["topP"]);if(M!=null&&f(e,["topP"],M),c(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function jR(n){const e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=c(n,["enableWidget"]);return t!=null&&f(e,["enableWidget"],t),e}function eP(n){const e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=c(n,["timeRangeFilter"]);return t!=null&&f(e,["timeRangeFilter"],t),e}function tP(n,e){const t={},r=c(n,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);const i=c(n,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const a=c(n,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const l=c(n,["topP"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","topP"],l);const d=c(n,["topK"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","topK"],d);const m=c(n,["maxOutputTokens"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","maxOutputTokens"],m);const p=c(n,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const y=c(n,["seed"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","seed"],y);const _=c(n,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],tp(_));const I=c(n,["thinkingConfig"]);e!==void 0&&I!=null&&f(e,["setup","generationConfig","thinkingConfig"],I);const C=c(n,["enableAffectiveDialog"]);e!==void 0&&C!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],C);const D=c(n,["systemInstruction"]);e!==void 0&&D!=null&&f(e,["setup","systemInstruction"],KR(Rt(D)));const b=c(n,["tools"]);if(e!==void 0&&b!=null){let J=zs(b);Array.isArray(J)&&(J=J.map(M=>fP(qs(M)))),f(e,["setup","tools"],J)}const N=c(n,["sessionResumption"]);e!==void 0&&N!=null&&f(e,["setup","sessionResumption"],dP(N));const B=c(n,["inputAudioTranscription"]);e!==void 0&&B!=null&&f(e,["setup","inputAudioTranscription"],B);const K=c(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&f(e,["setup","outputAudioTranscription"],K);const Y=c(n,["realtimeInputConfig"]);e!==void 0&&Y!=null&&f(e,["setup","realtimeInputConfig"],Y);const Q=c(n,["contextWindowCompression"]);e!==void 0&&Q!=null&&f(e,["setup","contextWindowCompression"],Q);const le=c(n,["proactivity"]);if(e!==void 0&&le!=null&&f(e,["setup","proactivity"],le),c(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function nP(n,e){const t={},r=c(n,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],ZR(r));const i=c(n,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const a=c(n,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const l=c(n,["topP"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","topP"],l);const d=c(n,["topK"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","topK"],d);const m=c(n,["maxOutputTokens"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","maxOutputTokens"],m);const p=c(n,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const y=c(n,["seed"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","seed"],y);const _=c(n,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],tp(_));const I=c(n,["thinkingConfig"]);e!==void 0&&I!=null&&f(e,["setup","generationConfig","thinkingConfig"],I);const C=c(n,["enableAffectiveDialog"]);e!==void 0&&C!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],C);const D=c(n,["systemInstruction"]);e!==void 0&&D!=null&&f(e,["setup","systemInstruction"],Rt(D));const b=c(n,["tools"]);if(e!==void 0&&b!=null){let M=zs(b);Array.isArray(M)&&(M=M.map(R=>hP(qs(R)))),f(e,["setup","tools"],M)}const N=c(n,["sessionResumption"]);e!==void 0&&N!=null&&f(e,["setup","sessionResumption"],N);const B=c(n,["inputAudioTranscription"]);e!==void 0&&B!=null&&f(e,["setup","inputAudioTranscription"],B);const K=c(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&f(e,["setup","outputAudioTranscription"],K);const Y=c(n,["realtimeInputConfig"]);e!==void 0&&Y!=null&&f(e,["setup","realtimeInputConfig"],Y);const Q=c(n,["contextWindowCompression"]);e!==void 0&&Q!=null&&f(e,["setup","contextWindowCompression"],Q);const le=c(n,["proactivity"]);e!==void 0&&le!=null&&f(e,["setup","proactivity"],le);const J=c(n,["explicitVadSignal"]);return e!==void 0&&J!=null&&f(e,["setup","explicitVadSignal"],J),t}function rP(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["setup","model"],Be(n,r));const i=c(e,["config"]);return i!=null&&f(t,["config"],tP(i,t)),t}function iP(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["setup","model"],Be(n,r));const i=c(e,["config"]);return i!=null&&f(t,["config"],nP(i,t)),t}function oP(n){const e={},t=c(n,["musicGenerationConfig"]);return t!=null&&f(e,["musicGenerationConfig"],t),e}function sP(n){const e={},t=c(n,["weightedPrompts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["weightedPrompts"],r)}return e}function aP(n){const e={},t=c(n,["media"]);if(t!=null){let p=KE(t);Array.isArray(p)&&(p=p.map(y=>lc(y))),f(e,["mediaChunks"],p)}const r=c(n,["audio"]);r!=null&&f(e,["audio"],lc(QE(r)));const i=c(n,["audioStreamEnd"]);i!=null&&f(e,["audioStreamEnd"],i);const a=c(n,["video"]);a!=null&&f(e,["video"],lc(YE(a)));const l=c(n,["text"]);l!=null&&f(e,["text"],l);const d=c(n,["activityStart"]);d!=null&&f(e,["activityStart"],d);const m=c(n,["activityEnd"]);return m!=null&&f(e,["activityEnd"],m),e}function lP(n){const e={},t=c(n,["media"]);if(t!=null){let p=KE(t);Array.isArray(p)&&(p=p.map(y=>y)),f(e,["mediaChunks"],p)}const r=c(n,["audio"]);r!=null&&f(e,["audio"],QE(r));const i=c(n,["audioStreamEnd"]);i!=null&&f(e,["audioStreamEnd"],i);const a=c(n,["video"]);a!=null&&f(e,["video"],YE(a));const l=c(n,["text"]);l!=null&&f(e,["text"],l);const d=c(n,["activityStart"]);d!=null&&f(e,["activityStart"],d);const m=c(n,["activityEnd"]);return m!=null&&f(e,["activityEnd"],m),e}function uP(n){const e={},t=c(n,["setupComplete"]);t!=null&&f(e,["setupComplete"],t);const r=c(n,["serverContent"]);r!=null&&f(e,["serverContent"],r);const i=c(n,["toolCall"]);i!=null&&f(e,["toolCall"],i);const a=c(n,["toolCallCancellation"]);a!=null&&f(e,["toolCallCancellation"],a);const l=c(n,["usageMetadata"]);l!=null&&f(e,["usageMetadata"],pP(l));const d=c(n,["goAway"]);d!=null&&f(e,["goAway"],d);const m=c(n,["sessionResumptionUpdate"]);m!=null&&f(e,["sessionResumptionUpdate"],m);const p=c(n,["voiceActivityDetectionSignal"]);p!=null&&f(e,["voiceActivityDetectionSignal"],p);const y=c(n,["voiceActivity"]);return y!=null&&f(e,["voiceActivity"],mP(y)),e}function cP(n){const e={},t=c(n,["mediaResolution"]);t!=null&&f(e,["mediaResolution"],t);const r=c(n,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=c(n,["executableCode"]);i!=null&&f(e,["executableCode"],i);const a=c(n,["fileData"]);a!=null&&f(e,["fileData"],YR(a));const l=c(n,["functionCall"]);l!=null&&f(e,["functionCall"],QR(l));const d=c(n,["functionResponse"]);d!=null&&f(e,["functionResponse"],d);const m=c(n,["inlineData"]);m!=null&&f(e,["inlineData"],lc(m));const p=c(n,["text"]);p!=null&&f(e,["text"],p);const y=c(n,["thought"]);y!=null&&f(e,["thought"],y);const _=c(n,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const I=c(n,["videoMetadata"]);return I!=null&&f(e,["videoMetadata"],I),e}function dP(n){const e={},t=c(n,["handle"]);if(t!=null&&f(e,["handle"],t),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function fP(n){const e={};if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=c(n,["computerUse"]);t!=null&&f(e,["computerUse"],t);const r=c(n,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);const i=c(n,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(n,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(_=>_)),f(e,["functionDeclarations"],y)}const l=c(n,["googleMaps"]);l!=null&&f(e,["googleMaps"],jR(l));const d=c(n,["googleSearch"]);d!=null&&f(e,["googleSearch"],eP(d));const m=c(n,["googleSearchRetrieval"]);m!=null&&f(e,["googleSearchRetrieval"],m);const p=c(n,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function hP(n){const e={},t=c(n,["retrieval"]);t!=null&&f(e,["retrieval"],t);const r=c(n,["computerUse"]);if(r!=null&&f(e,["computerUse"],r),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=c(n,["codeExecution"]);i!=null&&f(e,["codeExecution"],i);const a=c(n,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const l=c(n,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(I=>XR(I))),f(e,["functionDeclarations"],_)}const d=c(n,["googleMaps"]);d!=null&&f(e,["googleMaps"],d);const m=c(n,["googleSearch"]);m!=null&&f(e,["googleSearch"],m);const p=c(n,["googleSearchRetrieval"]);p!=null&&f(e,["googleSearchRetrieval"],p);const y=c(n,["urlContext"]);return y!=null&&f(e,["urlContext"],y),e}function pP(n){const e={},t=c(n,["promptTokenCount"]);t!=null&&f(e,["promptTokenCount"],t);const r=c(n,["cachedContentTokenCount"]);r!=null&&f(e,["cachedContentTokenCount"],r);const i=c(n,["candidatesTokenCount"]);i!=null&&f(e,["responseTokenCount"],i);const a=c(n,["toolUsePromptTokenCount"]);a!=null&&f(e,["toolUsePromptTokenCount"],a);const l=c(n,["thoughtsTokenCount"]);l!=null&&f(e,["thoughtsTokenCount"],l);const d=c(n,["totalTokenCount"]);d!=null&&f(e,["totalTokenCount"],d);const m=c(n,["promptTokensDetails"]);if(m!=null){let C=m;Array.isArray(C)&&(C=C.map(D=>D)),f(e,["promptTokensDetails"],C)}const p=c(n,["cacheTokensDetails"]);if(p!=null){let C=p;Array.isArray(C)&&(C=C.map(D=>D)),f(e,["cacheTokensDetails"],C)}const y=c(n,["candidatesTokensDetails"]);if(y!=null){let C=y;Array.isArray(C)&&(C=C.map(D=>D)),f(e,["responseTokensDetails"],C)}const _=c(n,["toolUsePromptTokensDetails"]);if(_!=null){let C=_;Array.isArray(C)&&(C=C.map(D=>D)),f(e,["toolUsePromptTokensDetails"],C)}const I=c(n,["trafficType"]);return I!=null&&f(e,["trafficType"],I),e}function mP(n){const e={},t=c(n,["type"]);return t!=null&&f(e,["voiceActivityType"],t),e}function gP(n,e){const t={},r=c(n,["data"]);if(r!=null&&f(t,["data"],r),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(n,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function yP(n,e){const t={},r=c(n,["content"]);r!=null&&f(t,["content"],r);const i=c(n,["citationMetadata"]);i!=null&&f(t,["citationMetadata"],vP(i));const a=c(n,["tokenCount"]);a!=null&&f(t,["tokenCount"],a);const l=c(n,["finishReason"]);l!=null&&f(t,["finishReason"],l);const d=c(n,["avgLogprobs"]);d!=null&&f(t,["avgLogprobs"],d);const m=c(n,["groundingMetadata"]);m!=null&&f(t,["groundingMetadata"],m);const p=c(n,["index"]);p!=null&&f(t,["index"],p);const y=c(n,["logprobsResult"]);y!=null&&f(t,["logprobsResult"],y);const _=c(n,["safetyRatings"]);if(_!=null){let C=_;Array.isArray(C)&&(C=C.map(D=>D)),f(t,["safetyRatings"],C)}const I=c(n,["urlContextMetadata"]);return I!=null&&f(t,["urlContextMetadata"],I),t}function vP(n,e){const t={},r=c(n,["citationSources"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),f(t,["citations"],i)}return t}function _P(n,e,t){const r={},i=c(e,["model"]);i!=null&&f(r,["_url","model"],Be(n,i));const a=c(e,["contents"]);if(a!=null){let l=gn(a);Array.isArray(l)&&(l=l.map(d=>d)),f(r,["contents"],l)}return r}function EP(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const i=c(n,["tokensInfo"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),f(t,["tokensInfo"],a)}return t}function TP(n,e){const t={},r=c(n,["values"]);r!=null&&f(t,["values"],r);const i=c(n,["statistics"]);return i!=null&&f(t,["statistics"],IP(i)),t}function IP(n,e){const t={},r=c(n,["truncated"]);r!=null&&f(t,["truncated"],r);const i=c(n,["token_count"]);return i!=null&&f(t,["tokenCount"],i),t}function vl(n,e){const t={},r=c(n,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>xN(l))),f(t,["parts"],a)}const i=c(n,["role"]);return i!=null&&f(t,["role"],i),t}function SP(n,e){const t={},r=c(n,["controlType"]);r!=null&&f(t,["controlType"],r);const i=c(n,["enableControlImageComputation"]);return i!=null&&f(t,["computeControl"],i),t}function wP(n,e){const t={};if(c(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function CP(n,e,t){const r={},i=c(n,["systemInstruction"]);e!==void 0&&i!=null&&f(e,["systemInstruction"],Rt(i));const a=c(n,["tools"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(m=>cT(m))),f(e,["tools"],d)}const l=c(n,["generationConfig"]);return e!==void 0&&l!=null&&f(e,["generationConfig"],gN(l)),r}function AP(n,e,t){const r={},i=c(e,["model"]);i!=null&&f(r,["_url","model"],Be(n,i));const a=c(e,["contents"]);if(a!=null){let d=gn(a);Array.isArray(d)&&(d=d.map(m=>vl(m))),f(r,["contents"],d)}const l=c(e,["config"]);return l!=null&&wP(l),r}function RP(n,e,t){const r={},i=c(e,["model"]);i!=null&&f(r,["_url","model"],Be(n,i));const a=c(e,["contents"]);if(a!=null){let d=gn(a);Array.isArray(d)&&(d=d.map(m=>m)),f(r,["contents"],d)}const l=c(e,["config"]);return l!=null&&CP(l,r),r}function PP(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const i=c(n,["totalTokens"]);i!=null&&f(t,["totalTokens"],i);const a=c(n,["cachedContentTokenCount"]);return a!=null&&f(t,["cachedContentTokenCount"],a),t}function NP(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const i=c(n,["totalTokens"]);return i!=null&&f(t,["totalTokens"],i),t}function kP(n,e,t){const r={},i=c(e,["model"]);return i!=null&&f(r,["_url","name"],Be(n,i)),r}function xP(n,e,t){const r={},i=c(e,["model"]);return i!=null&&f(r,["_url","name"],Be(n,i)),r}function MP(n,e){const t={},r=c(n,["sdkHttpResponse"]);return r!=null&&f(t,["sdkHttpResponse"],r),t}function DP(n,e){const t={},r=c(n,["sdkHttpResponse"]);return r!=null&&f(t,["sdkHttpResponse"],r),t}function LP(n,e,t){const r={},i=c(n,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const a=c(n,["negativePrompt"]);e!==void 0&&a!=null&&f(e,["parameters","negativePrompt"],a);const l=c(n,["numberOfImages"]);e!==void 0&&l!=null&&f(e,["parameters","sampleCount"],l);const d=c(n,["aspectRatio"]);e!==void 0&&d!=null&&f(e,["parameters","aspectRatio"],d);const m=c(n,["guidanceScale"]);e!==void 0&&m!=null&&f(e,["parameters","guidanceScale"],m);const p=c(n,["seed"]);e!==void 0&&p!=null&&f(e,["parameters","seed"],p);const y=c(n,["safetyFilterLevel"]);e!==void 0&&y!=null&&f(e,["parameters","safetySetting"],y);const _=c(n,["personGeneration"]);e!==void 0&&_!=null&&f(e,["parameters","personGeneration"],_);const I=c(n,["includeSafetyAttributes"]);e!==void 0&&I!=null&&f(e,["parameters","includeSafetyAttributes"],I);const C=c(n,["includeRaiReason"]);e!==void 0&&C!=null&&f(e,["parameters","includeRaiReason"],C);const D=c(n,["language"]);e!==void 0&&D!=null&&f(e,["parameters","language"],D);const b=c(n,["outputMimeType"]);e!==void 0&&b!=null&&f(e,["parameters","outputOptions","mimeType"],b);const N=c(n,["outputCompressionQuality"]);e!==void 0&&N!=null&&f(e,["parameters","outputOptions","compressionQuality"],N);const B=c(n,["addWatermark"]);e!==void 0&&B!=null&&f(e,["parameters","addWatermark"],B);const K=c(n,["labels"]);e!==void 0&&K!=null&&f(e,["labels"],K);const Y=c(n,["editMode"]);e!==void 0&&Y!=null&&f(e,["parameters","editMode"],Y);const Q=c(n,["baseSteps"]);return e!==void 0&&Q!=null&&f(e,["parameters","editConfig","baseSteps"],Q),r}function VP(n,e,t){const r={},i=c(e,["model"]);i!=null&&f(r,["_url","model"],Be(n,i));const a=c(e,["prompt"]);a!=null&&f(r,["instances[0]","prompt"],a);const l=c(e,["referenceImages"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(p=>UN(p))),f(r,["instances[0]","referenceImages"],m)}const d=c(e,["config"]);return d!=null&&LP(d,r),r}function bP(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const i=c(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Jc(l))),f(t,["generatedImages"],a)}return t}function UP(n,e,t){const r={},i=c(n,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const a=c(n,["title"]);e!==void 0&&a!=null&&f(e,["requests[]","title"],a);const l=c(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&f(e,["requests[]","outputDimensionality"],l),c(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function FP(n,e,t){const r={};let i=c(t,["embeddingApiType"]);if(i===void 0&&(i="PREDICT"),i==="PREDICT"){const p=c(n,["taskType"]);e!==void 0&&p!=null&&f(e,["instances[]","task_type"],p)}else if(i==="EMBED_CONTENT"){const p=c(n,["taskType"]);e!==void 0&&p!=null&&f(e,["taskType"],p)}let a=c(t,["embeddingApiType"]);if(a===void 0&&(a="PREDICT"),a==="PREDICT"){const p=c(n,["title"]);e!==void 0&&p!=null&&f(e,["instances[]","title"],p)}else if(a==="EMBED_CONTENT"){const p=c(n,["title"]);e!==void 0&&p!=null&&f(e,["title"],p)}let l=c(t,["embeddingApiType"]);if(l===void 0&&(l="PREDICT"),l==="PREDICT"){const p=c(n,["outputDimensionality"]);e!==void 0&&p!=null&&f(e,["parameters","outputDimensionality"],p)}else if(l==="EMBED_CONTENT"){const p=c(n,["outputDimensionality"]);e!==void 0&&p!=null&&f(e,["outputDimensionality"],p)}let d=c(t,["embeddingApiType"]);if(d===void 0&&(d="PREDICT"),d==="PREDICT"){const p=c(n,["mimeType"]);e!==void 0&&p!=null&&f(e,["instances[]","mimeType"],p)}let m=c(t,["embeddingApiType"]);if(m===void 0&&(m="PREDICT"),m==="PREDICT"){const p=c(n,["autoTruncate"]);e!==void 0&&p!=null&&f(e,["parameters","autoTruncate"],p)}else if(m==="EMBED_CONTENT"){const p=c(n,["autoTruncate"]);e!==void 0&&p!=null&&f(e,["autoTruncate"],p)}return r}function OP(n,e,t){const r={},i=c(e,["model"]);i!=null&&f(r,["_url","model"],Be(n,i));const a=c(e,["contents"]);if(a!=null){let p=Zh(n,a);Array.isArray(p)&&(p=p.map(y=>y)),f(r,["requests[]","content"],p)}const l=c(e,["content"]);l!=null&&vl(Rt(l));const d=c(e,["config"]);d!=null&&UP(d,r);const m=c(e,["model"]);return m!==void 0&&f(r,["requests[]","model"],Be(n,m)),r}function GP(n,e,t){const r={},i=c(e,["model"]);i!=null&&f(r,["_url","model"],Be(n,i));let a=c(t,["embeddingApiType"]);if(a===void 0&&(a="PREDICT"),a==="PREDICT"){const m=c(e,["contents"]);if(m!=null){let p=Zh(n,m);Array.isArray(p)&&(p=p.map(y=>y)),f(r,["instances[]","content"],p)}}let l=c(t,["embeddingApiType"]);if(l===void 0&&(l="PREDICT"),l==="EMBED_CONTENT"){const m=c(e,["content"]);m!=null&&f(r,["content"],Rt(m))}const d=c(e,["config"]);return d!=null&&FP(d,r,t),r}function BP(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const i=c(n,["embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>d)),f(t,["embeddings"],l)}const a=c(n,["metadata"]);return a!=null&&f(t,["metadata"],a),t}function HP(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const i=c(n,["predictions[]","embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>TP(d))),f(t,["embeddings"],l)}const a=c(n,["metadata"]);if(a!=null&&f(t,["metadata"],a),e&&c(e,["embeddingApiType"])==="EMBED_CONTENT"){const l=c(n,["embedding"]),d=c(n,["usageMetadata"]),m=c(n,["truncated"]);if(l){const p={};d&&d.promptTokenCount&&(p.tokenCount=d.promptTokenCount),m&&(p.truncated=m),l.statistics=p,f(t,["embeddings"],[l])}}return t}function qP(n,e){const t={},r=c(n,["endpoint"]);r!=null&&f(t,["name"],r);const i=c(n,["deployedModelId"]);return i!=null&&f(t,["deployedModelId"],i),t}function zP(n,e){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(n,["fileUri"]);r!=null&&f(t,["fileUri"],r);const i=c(n,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function $P(n,e){const t={},r=c(n,["id"]);r!=null&&f(t,["id"],r);const i=c(n,["args"]);i!=null&&f(t,["args"],i);const a=c(n,["name"]);if(a!=null&&f(t,["name"],a),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function WP(n,e){const t={},r=c(n,["allowedFunctionNames"]);r!=null&&f(t,["allowedFunctionNames"],r);const i=c(n,["mode"]);if(i!=null&&f(t,["mode"],i),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function JP(n,e){const t={},r=c(n,["description"]);r!=null&&f(t,["description"],r);const i=c(n,["name"]);i!=null&&f(t,["name"],i);const a=c(n,["parameters"]);a!=null&&f(t,["parameters"],a);const l=c(n,["parametersJsonSchema"]);l!=null&&f(t,["parametersJsonSchema"],l);const d=c(n,["response"]);d!=null&&f(t,["response"],d);const m=c(n,["responseJsonSchema"]);if(m!=null&&f(t,["responseJsonSchema"],m),c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function KP(n,e,t,r){const i={},a=c(e,["systemInstruction"]);t!==void 0&&a!=null&&f(t,["systemInstruction"],vl(Rt(a)));const l=c(e,["temperature"]);l!=null&&f(i,["temperature"],l);const d=c(e,["topP"]);d!=null&&f(i,["topP"],d);const m=c(e,["topK"]);m!=null&&f(i,["topK"],m);const p=c(e,["candidateCount"]);p!=null&&f(i,["candidateCount"],p);const y=c(e,["maxOutputTokens"]);y!=null&&f(i,["maxOutputTokens"],y);const _=c(e,["stopSequences"]);_!=null&&f(i,["stopSequences"],_);const I=c(e,["responseLogprobs"]);I!=null&&f(i,["responseLogprobs"],I);const C=c(e,["logprobs"]);C!=null&&f(i,["logprobs"],C);const D=c(e,["presencePenalty"]);D!=null&&f(i,["presencePenalty"],D);const b=c(e,["frequencyPenalty"]);b!=null&&f(i,["frequencyPenalty"],b);const N=c(e,["seed"]);N!=null&&f(i,["seed"],N);const B=c(e,["responseMimeType"]);B!=null&&f(i,["responseMimeType"],B);const K=c(e,["responseSchema"]);K!=null&&f(i,["responseSchema"],jh(K));const Y=c(e,["responseJsonSchema"]);if(Y!=null&&f(i,["responseJsonSchema"],Y),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Q=c(e,["safetySettings"]);if(t!==void 0&&Q!=null){let Te=Q;Array.isArray(Te)&&(Te=Te.map(qe=>FN(qe))),f(t,["safetySettings"],Te)}const le=c(e,["tools"]);if(t!==void 0&&le!=null){let Te=zs(le);Array.isArray(Te)&&(Te=Te.map(qe=>$N(qs(qe)))),f(t,["tools"],Te)}const J=c(e,["toolConfig"]);if(t!==void 0&&J!=null&&f(t,["toolConfig"],zN(J)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=c(e,["cachedContent"]);t!==void 0&&M!=null&&f(t,["cachedContent"],Kr(n,M));const R=c(e,["responseModalities"]);R!=null&&f(i,["responseModalities"],R);const P=c(e,["mediaResolution"]);P!=null&&f(i,["mediaResolution"],P);const L=c(e,["speechConfig"]);if(L!=null&&f(i,["speechConfig"],ep(L)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=c(e,["thinkingConfig"]);V!=null&&f(i,["thinkingConfig"],V);const F=c(e,["imageConfig"]);F!=null&&f(i,["imageConfig"],TN(F));const k=c(e,["enableEnhancedCivicAnswers"]);if(k!=null&&f(i,["enableEnhancedCivicAnswers"],k),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function YP(n,e,t,r){const i={},a=c(e,["systemInstruction"]);t!==void 0&&a!=null&&f(t,["systemInstruction"],Rt(a));const l=c(e,["temperature"]);l!=null&&f(i,["temperature"],l);const d=c(e,["topP"]);d!=null&&f(i,["topP"],d);const m=c(e,["topK"]);m!=null&&f(i,["topK"],m);const p=c(e,["candidateCount"]);p!=null&&f(i,["candidateCount"],p);const y=c(e,["maxOutputTokens"]);y!=null&&f(i,["maxOutputTokens"],y);const _=c(e,["stopSequences"]);_!=null&&f(i,["stopSequences"],_);const I=c(e,["responseLogprobs"]);I!=null&&f(i,["responseLogprobs"],I);const C=c(e,["logprobs"]);C!=null&&f(i,["logprobs"],C);const D=c(e,["presencePenalty"]);D!=null&&f(i,["presencePenalty"],D);const b=c(e,["frequencyPenalty"]);b!=null&&f(i,["frequencyPenalty"],b);const N=c(e,["seed"]);N!=null&&f(i,["seed"],N);const B=c(e,["responseMimeType"]);B!=null&&f(i,["responseMimeType"],B);const K=c(e,["responseSchema"]);K!=null&&f(i,["responseSchema"],jh(K));const Y=c(e,["responseJsonSchema"]);Y!=null&&f(i,["responseJsonSchema"],Y);const Q=c(e,["routingConfig"]);Q!=null&&f(i,["routingConfig"],Q);const le=c(e,["modelSelectionConfig"]);le!=null&&f(i,["modelConfig"],le);const J=c(e,["safetySettings"]);if(t!==void 0&&J!=null){let re=J;Array.isArray(re)&&(re=re.map(he=>he)),f(t,["safetySettings"],re)}const M=c(e,["tools"]);if(t!==void 0&&M!=null){let re=zs(M);Array.isArray(re)&&(re=re.map(he=>cT(qs(he)))),f(t,["tools"],re)}const R=c(e,["toolConfig"]);t!==void 0&&R!=null&&f(t,["toolConfig"],R);const P=c(e,["labels"]);t!==void 0&&P!=null&&f(t,["labels"],P);const L=c(e,["cachedContent"]);t!==void 0&&L!=null&&f(t,["cachedContent"],Kr(n,L));const V=c(e,["responseModalities"]);V!=null&&f(i,["responseModalities"],V);const F=c(e,["mediaResolution"]);F!=null&&f(i,["mediaResolution"],F);const k=c(e,["speechConfig"]);k!=null&&f(i,["speechConfig"],ep(k));const Te=c(e,["audioTimestamp"]);Te!=null&&f(i,["audioTimestamp"],Te);const qe=c(e,["thinkingConfig"]);qe!=null&&f(i,["thinkingConfig"],qe);const Oe=c(e,["imageConfig"]);if(Oe!=null&&f(i,["imageConfig"],IN(Oe)),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const ze=c(e,["modelArmorConfig"]);return t!==void 0&&ze!=null&&f(t,["modelArmorConfig"],ze),i}function Pv(n,e,t){const r={},i=c(e,["model"]);i!=null&&f(r,["_url","model"],Be(n,i));const a=c(e,["contents"]);if(a!=null){let d=gn(a);Array.isArray(d)&&(d=d.map(m=>vl(m))),f(r,["contents"],d)}const l=c(e,["config"]);return l!=null&&f(r,["generationConfig"],KP(n,l,r)),r}function Nv(n,e,t){const r={},i=c(e,["model"]);i!=null&&f(r,["_url","model"],Be(n,i));const a=c(e,["contents"]);if(a!=null){let d=gn(a);Array.isArray(d)&&(d=d.map(m=>m)),f(r,["contents"],d)}const l=c(e,["config"]);return l!=null&&f(r,["generationConfig"],YP(n,l,r)),r}function kv(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const i=c(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(y=>yP(y))),f(t,["candidates"],p)}const a=c(n,["modelVersion"]);a!=null&&f(t,["modelVersion"],a);const l=c(n,["promptFeedback"]);l!=null&&f(t,["promptFeedback"],l);const d=c(n,["responseId"]);d!=null&&f(t,["responseId"],d);const m=c(n,["usageMetadata"]);return m!=null&&f(t,["usageMetadata"],m),t}function xv(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const i=c(n,["candidates"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),f(t,["candidates"],y)}const a=c(n,["createTime"]);a!=null&&f(t,["createTime"],a);const l=c(n,["modelVersion"]);l!=null&&f(t,["modelVersion"],l);const d=c(n,["promptFeedback"]);d!=null&&f(t,["promptFeedback"],d);const m=c(n,["responseId"]);m!=null&&f(t,["responseId"],m);const p=c(n,["usageMetadata"]);return p!=null&&f(t,["usageMetadata"],p),t}function QP(n,e,t){const r={};if(c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=c(n,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const a=c(n,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);const l=c(n,["guidanceScale"]);if(e!==void 0&&l!=null&&f(e,["parameters","guidanceScale"],l),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=c(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&f(e,["parameters","safetySetting"],d);const m=c(n,["personGeneration"]);e!==void 0&&m!=null&&f(e,["parameters","personGeneration"],m);const p=c(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);const y=c(n,["includeRaiReason"]);e!==void 0&&y!=null&&f(e,["parameters","includeRaiReason"],y);const _=c(n,["language"]);e!==void 0&&_!=null&&f(e,["parameters","language"],_);const I=c(n,["outputMimeType"]);e!==void 0&&I!=null&&f(e,["parameters","outputOptions","mimeType"],I);const C=c(n,["outputCompressionQuality"]);if(e!==void 0&&C!=null&&f(e,["parameters","outputOptions","compressionQuality"],C),c(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=c(n,["imageSize"]);if(e!==void 0&&D!=null&&f(e,["parameters","sampleImageSize"],D),c(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function XP(n,e,t){const r={},i=c(n,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const a=c(n,["negativePrompt"]);e!==void 0&&a!=null&&f(e,["parameters","negativePrompt"],a);const l=c(n,["numberOfImages"]);e!==void 0&&l!=null&&f(e,["parameters","sampleCount"],l);const d=c(n,["aspectRatio"]);e!==void 0&&d!=null&&f(e,["parameters","aspectRatio"],d);const m=c(n,["guidanceScale"]);e!==void 0&&m!=null&&f(e,["parameters","guidanceScale"],m);const p=c(n,["seed"]);e!==void 0&&p!=null&&f(e,["parameters","seed"],p);const y=c(n,["safetyFilterLevel"]);e!==void 0&&y!=null&&f(e,["parameters","safetySetting"],y);const _=c(n,["personGeneration"]);e!==void 0&&_!=null&&f(e,["parameters","personGeneration"],_);const I=c(n,["includeSafetyAttributes"]);e!==void 0&&I!=null&&f(e,["parameters","includeSafetyAttributes"],I);const C=c(n,["includeRaiReason"]);e!==void 0&&C!=null&&f(e,["parameters","includeRaiReason"],C);const D=c(n,["language"]);e!==void 0&&D!=null&&f(e,["parameters","language"],D);const b=c(n,["outputMimeType"]);e!==void 0&&b!=null&&f(e,["parameters","outputOptions","mimeType"],b);const N=c(n,["outputCompressionQuality"]);e!==void 0&&N!=null&&f(e,["parameters","outputOptions","compressionQuality"],N);const B=c(n,["addWatermark"]);e!==void 0&&B!=null&&f(e,["parameters","addWatermark"],B);const K=c(n,["labels"]);e!==void 0&&K!=null&&f(e,["labels"],K);const Y=c(n,["imageSize"]);e!==void 0&&Y!=null&&f(e,["parameters","sampleImageSize"],Y);const Q=c(n,["enhancePrompt"]);return e!==void 0&&Q!=null&&f(e,["parameters","enhancePrompt"],Q),r}function ZP(n,e,t){const r={},i=c(e,["model"]);i!=null&&f(r,["_url","model"],Be(n,i));const a=c(e,["prompt"]);a!=null&&f(r,["instances[0]","prompt"],a);const l=c(e,["config"]);return l!=null&&QP(l,r),r}function jP(n,e,t){const r={},i=c(e,["model"]);i!=null&&f(r,["_url","model"],Be(n,i));const a=c(e,["prompt"]);a!=null&&f(r,["instances[0]","prompt"],a);const l=c(e,["config"]);return l!=null&&XP(l,r),r}function eN(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const i=c(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>fN(d))),f(t,["generatedImages"],l)}const a=c(n,["positivePromptSafetyAttributes"]);return a!=null&&f(t,["positivePromptSafetyAttributes"],lT(a)),t}function tN(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const i=c(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>Jc(d))),f(t,["generatedImages"],l)}const a=c(n,["positivePromptSafetyAttributes"]);return a!=null&&f(t,["positivePromptSafetyAttributes"],uT(a)),t}function nN(n,e,t){const r={},i=c(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i),c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=c(n,["durationSeconds"]);if(e!==void 0&&a!=null&&f(e,["parameters","durationSeconds"],a),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=c(n,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const d=c(n,["resolution"]);e!==void 0&&d!=null&&f(e,["parameters","resolution"],d);const m=c(n,["personGeneration"]);if(e!==void 0&&m!=null&&f(e,["parameters","personGeneration"],m),c(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=c(n,["negativePrompt"]);e!==void 0&&p!=null&&f(e,["parameters","negativePrompt"],p);const y=c(n,["enhancePrompt"]);if(e!==void 0&&y!=null&&f(e,["parameters","enhancePrompt"],y),c(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=c(n,["lastFrame"]);e!==void 0&&_!=null&&f(e,["instances[0]","lastFrame"],Kc(_));const I=c(n,["referenceImages"]);if(e!==void 0&&I!=null){let C=I;Array.isArray(C)&&(C=C.map(D=>ik(D))),f(e,["instances[0]","referenceImages"],C)}if(c(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function rN(n,e,t){const r={},i=c(n,["numberOfVideos"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const a=c(n,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const l=c(n,["fps"]);e!==void 0&&l!=null&&f(e,["parameters","fps"],l);const d=c(n,["durationSeconds"]);e!==void 0&&d!=null&&f(e,["parameters","durationSeconds"],d);const m=c(n,["seed"]);e!==void 0&&m!=null&&f(e,["parameters","seed"],m);const p=c(n,["aspectRatio"]);e!==void 0&&p!=null&&f(e,["parameters","aspectRatio"],p);const y=c(n,["resolution"]);e!==void 0&&y!=null&&f(e,["parameters","resolution"],y);const _=c(n,["personGeneration"]);e!==void 0&&_!=null&&f(e,["parameters","personGeneration"],_);const I=c(n,["pubsubTopic"]);e!==void 0&&I!=null&&f(e,["parameters","pubsubTopic"],I);const C=c(n,["negativePrompt"]);e!==void 0&&C!=null&&f(e,["parameters","negativePrompt"],C);const D=c(n,["enhancePrompt"]);e!==void 0&&D!=null&&f(e,["parameters","enhancePrompt"],D);const b=c(n,["generateAudio"]);e!==void 0&&b!=null&&f(e,["parameters","generateAudio"],b);const N=c(n,["lastFrame"]);e!==void 0&&N!=null&&f(e,["instances[0]","lastFrame"],Wn(N));const B=c(n,["referenceImages"]);if(e!==void 0&&B!=null){let Q=B;Array.isArray(Q)&&(Q=Q.map(le=>ok(le))),f(e,["instances[0]","referenceImages"],Q)}const K=c(n,["mask"]);e!==void 0&&K!=null&&f(e,["instances[0]","mask"],rk(K));const Y=c(n,["compressionQuality"]);return e!==void 0&&Y!=null&&f(e,["parameters","compressionQuality"],Y),r}function iN(n,e){const t={},r=c(n,["name"]);r!=null&&f(t,["name"],r);const i=c(n,["metadata"]);i!=null&&f(t,["metadata"],i);const a=c(n,["done"]);a!=null&&f(t,["done"],a);const l=c(n,["error"]);l!=null&&f(t,["error"],l);const d=c(n,["response","generateVideoResponse"]);return d!=null&&f(t,["response"],lN(d)),t}function oN(n,e){const t={},r=c(n,["name"]);r!=null&&f(t,["name"],r);const i=c(n,["metadata"]);i!=null&&f(t,["metadata"],i);const a=c(n,["done"]);a!=null&&f(t,["done"],a);const l=c(n,["error"]);l!=null&&f(t,["error"],l);const d=c(n,["response"]);return d!=null&&f(t,["response"],uN(d)),t}function sN(n,e,t){const r={},i=c(e,["model"]);i!=null&&f(r,["_url","model"],Be(n,i));const a=c(e,["prompt"]);a!=null&&f(r,["instances[0]","prompt"],a);const l=c(e,["image"]);l!=null&&f(r,["instances[0]","image"],Kc(l));const d=c(e,["video"]);d!=null&&f(r,["instances[0]","video"],dT(d));const m=c(e,["source"]);m!=null&&cN(m,r);const p=c(e,["config"]);return p!=null&&nN(p,r),r}function aN(n,e,t){const r={},i=c(e,["model"]);i!=null&&f(r,["_url","model"],Be(n,i));const a=c(e,["prompt"]);a!=null&&f(r,["instances[0]","prompt"],a);const l=c(e,["image"]);l!=null&&f(r,["instances[0]","image"],Wn(l));const d=c(e,["video"]);d!=null&&f(r,["instances[0]","video"],fT(d));const m=c(e,["source"]);m!=null&&dN(m,r);const p=c(e,["config"]);return p!=null&&rN(p,r),r}function lN(n,e){const t={},r=c(n,["generatedSamples"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(d=>pN(d))),f(t,["generatedVideos"],l)}const i=c(n,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);const a=c(n,["raiMediaFilteredReasons"]);return a!=null&&f(t,["raiMediaFilteredReasons"],a),t}function uN(n,e){const t={},r=c(n,["videos"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(d=>mN(d))),f(t,["generatedVideos"],l)}const i=c(n,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);const a=c(n,["raiMediaFilteredReasons"]);return a!=null&&f(t,["raiMediaFilteredReasons"],a),t}function cN(n,e,t){const r={},i=c(n,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const a=c(n,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],Kc(a));const l=c(n,["video"]);return e!==void 0&&l!=null&&f(e,["instances[0]","video"],dT(l)),r}function dN(n,e,t){const r={},i=c(n,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const a=c(n,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],Wn(a));const l=c(n,["video"]);return e!==void 0&&l!=null&&f(e,["instances[0]","video"],fT(l)),r}function fN(n,e){const t={},r=c(n,["_self"]);r!=null&&f(t,["image"],SN(r));const i=c(n,["raiFilteredReason"]);i!=null&&f(t,["raiFilteredReason"],i);const a=c(n,["_self"]);return a!=null&&f(t,["safetyAttributes"],lT(a)),t}function Jc(n,e){const t={},r=c(n,["_self"]);r!=null&&f(t,["image"],aT(r));const i=c(n,["raiFilteredReason"]);i!=null&&f(t,["raiFilteredReason"],i);const a=c(n,["_self"]);a!=null&&f(t,["safetyAttributes"],uT(a));const l=c(n,["prompt"]);return l!=null&&f(t,["enhancedPrompt"],l),t}function hN(n,e){const t={},r=c(n,["_self"]);r!=null&&f(t,["mask"],aT(r));const i=c(n,["labels"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),f(t,["labels"],a)}return t}function pN(n,e){const t={},r=c(n,["video"]);return r!=null&&f(t,["video"],tk(r)),t}function mN(n,e){const t={},r=c(n,["_self"]);return r!=null&&f(t,["video"],nk(r)),t}function gN(n,e){const t={},r=c(n,["modelSelectionConfig"]);r!=null&&f(t,["modelConfig"],r);const i=c(n,["responseJsonSchema"]);i!=null&&f(t,["responseJsonSchema"],i);const a=c(n,["audioTimestamp"]);a!=null&&f(t,["audioTimestamp"],a);const l=c(n,["candidateCount"]);l!=null&&f(t,["candidateCount"],l);const d=c(n,["enableAffectiveDialog"]);d!=null&&f(t,["enableAffectiveDialog"],d);const m=c(n,["frequencyPenalty"]);m!=null&&f(t,["frequencyPenalty"],m);const p=c(n,["logprobs"]);p!=null&&f(t,["logprobs"],p);const y=c(n,["maxOutputTokens"]);y!=null&&f(t,["maxOutputTokens"],y);const _=c(n,["mediaResolution"]);_!=null&&f(t,["mediaResolution"],_);const I=c(n,["presencePenalty"]);I!=null&&f(t,["presencePenalty"],I);const C=c(n,["responseLogprobs"]);C!=null&&f(t,["responseLogprobs"],C);const D=c(n,["responseMimeType"]);D!=null&&f(t,["responseMimeType"],D);const b=c(n,["responseModalities"]);b!=null&&f(t,["responseModalities"],b);const N=c(n,["responseSchema"]);N!=null&&f(t,["responseSchema"],N);const B=c(n,["routingConfig"]);B!=null&&f(t,["routingConfig"],B);const K=c(n,["seed"]);K!=null&&f(t,["seed"],K);const Y=c(n,["speechConfig"]);Y!=null&&f(t,["speechConfig"],Y);const Q=c(n,["stopSequences"]);Q!=null&&f(t,["stopSequences"],Q);const le=c(n,["temperature"]);le!=null&&f(t,["temperature"],le);const J=c(n,["thinkingConfig"]);J!=null&&f(t,["thinkingConfig"],J);const M=c(n,["topK"]);M!=null&&f(t,["topK"],M);const R=c(n,["topP"]);if(R!=null&&f(t,["topP"],R),c(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function yN(n,e,t){const r={},i=c(e,["model"]);return i!=null&&f(r,["_url","name"],Be(n,i)),r}function vN(n,e,t){const r={},i=c(e,["model"]);return i!=null&&f(r,["_url","name"],Be(n,i)),r}function _N(n,e){const t={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=c(n,["enableWidget"]);return r!=null&&f(t,["enableWidget"],r),t}function EN(n,e){const t={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=c(n,["timeRangeFilter"]);return r!=null&&f(t,["timeRangeFilter"],r),t}function TN(n,e){const t={},r=c(n,["aspectRatio"]);r!=null&&f(t,["aspectRatio"],r);const i=c(n,["imageSize"]);if(i!=null&&f(t,["imageSize"],i),c(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function IN(n,e){const t={},r=c(n,["aspectRatio"]);r!=null&&f(t,["aspectRatio"],r);const i=c(n,["imageSize"]);i!=null&&f(t,["imageSize"],i);const a=c(n,["personGeneration"]);a!=null&&f(t,["personGeneration"],a);const l=c(n,["outputMimeType"]);l!=null&&f(t,["imageOutputOptions","mimeType"],l);const d=c(n,["outputCompressionQuality"]);return d!=null&&f(t,["imageOutputOptions","compressionQuality"],d),t}function SN(n,e){const t={},r=c(n,["bytesBase64Encoded"]);r!=null&&f(t,["imageBytes"],Gi(r));const i=c(n,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function aT(n,e){const t={},r=c(n,["gcsUri"]);r!=null&&f(t,["gcsUri"],r);const i=c(n,["bytesBase64Encoded"]);i!=null&&f(t,["imageBytes"],Gi(i));const a=c(n,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function Kc(n,e){const t={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=c(n,["imageBytes"]);r!=null&&f(t,["bytesBase64Encoded"],Gi(r));const i=c(n,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function Wn(n,e){const t={},r=c(n,["gcsUri"]);r!=null&&f(t,["gcsUri"],r);const i=c(n,["imageBytes"]);i!=null&&f(t,["bytesBase64Encoded"],Gi(i));const a=c(n,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function wN(n,e,t,r){const i={},a=c(e,["pageSize"]);t!==void 0&&a!=null&&f(t,["_query","pageSize"],a);const l=c(e,["pageToken"]);t!==void 0&&l!=null&&f(t,["_query","pageToken"],l);const d=c(e,["filter"]);t!==void 0&&d!=null&&f(t,["_query","filter"],d);const m=c(e,["queryBase"]);return t!==void 0&&m!=null&&f(t,["_url","models_url"],eT(n,m)),i}function CN(n,e,t,r){const i={},a=c(e,["pageSize"]);t!==void 0&&a!=null&&f(t,["_query","pageSize"],a);const l=c(e,["pageToken"]);t!==void 0&&l!=null&&f(t,["_query","pageToken"],l);const d=c(e,["filter"]);t!==void 0&&d!=null&&f(t,["_query","filter"],d);const m=c(e,["queryBase"]);return t!==void 0&&m!=null&&f(t,["_url","models_url"],eT(n,m)),i}function AN(n,e,t){const r={},i=c(e,["config"]);return i!=null&&wN(n,i,r),r}function RN(n,e,t){const r={},i=c(e,["config"]);return i!=null&&CN(n,i,r),r}function PN(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const i=c(n,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const a=c(n,["_self"]);if(a!=null){let l=tT(a);Array.isArray(l)&&(l=l.map(d=>mh(d))),f(t,["models"],l)}return t}function NN(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const i=c(n,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const a=c(n,["_self"]);if(a!=null){let l=tT(a);Array.isArray(l)&&(l=l.map(d=>gh(d))),f(t,["models"],l)}return t}function kN(n,e){const t={},r=c(n,["maskMode"]);r!=null&&f(t,["maskMode"],r);const i=c(n,["segmentationClasses"]);i!=null&&f(t,["maskClasses"],i);const a=c(n,["maskDilation"]);return a!=null&&f(t,["dilation"],a),t}function mh(n,e){const t={},r=c(n,["name"]);r!=null&&f(t,["name"],r);const i=c(n,["displayName"]);i!=null&&f(t,["displayName"],i);const a=c(n,["description"]);a!=null&&f(t,["description"],a);const l=c(n,["version"]);l!=null&&f(t,["version"],l);const d=c(n,["_self"]);d!=null&&f(t,["tunedModelInfo"],WN(d));const m=c(n,["inputTokenLimit"]);m!=null&&f(t,["inputTokenLimit"],m);const p=c(n,["outputTokenLimit"]);p!=null&&f(t,["outputTokenLimit"],p);const y=c(n,["supportedGenerationMethods"]);y!=null&&f(t,["supportedActions"],y);const _=c(n,["temperature"]);_!=null&&f(t,["temperature"],_);const I=c(n,["maxTemperature"]);I!=null&&f(t,["maxTemperature"],I);const C=c(n,["topP"]);C!=null&&f(t,["topP"],C);const D=c(n,["topK"]);D!=null&&f(t,["topK"],D);const b=c(n,["thinking"]);return b!=null&&f(t,["thinking"],b),t}function gh(n,e){const t={},r=c(n,["name"]);r!=null&&f(t,["name"],r);const i=c(n,["displayName"]);i!=null&&f(t,["displayName"],i);const a=c(n,["description"]);a!=null&&f(t,["description"],a);const l=c(n,["versionId"]);l!=null&&f(t,["version"],l);const d=c(n,["deployedModels"]);if(d!=null){let I=d;Array.isArray(I)&&(I=I.map(C=>qP(C))),f(t,["endpoints"],I)}const m=c(n,["labels"]);m!=null&&f(t,["labels"],m);const p=c(n,["_self"]);p!=null&&f(t,["tunedModelInfo"],JN(p));const y=c(n,["defaultCheckpointId"]);y!=null&&f(t,["defaultCheckpointId"],y);const _=c(n,["checkpoints"]);if(_!=null){let I=_;Array.isArray(I)&&(I=I.map(C=>C)),f(t,["checkpoints"],I)}return t}function xN(n,e){const t={},r=c(n,["mediaResolution"]);r!=null&&f(t,["mediaResolution"],r);const i=c(n,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);const a=c(n,["executableCode"]);a!=null&&f(t,["executableCode"],a);const l=c(n,["fileData"]);l!=null&&f(t,["fileData"],zP(l));const d=c(n,["functionCall"]);d!=null&&f(t,["functionCall"],$P(d));const m=c(n,["functionResponse"]);m!=null&&f(t,["functionResponse"],m);const p=c(n,["inlineData"]);p!=null&&f(t,["inlineData"],gP(p));const y=c(n,["text"]);y!=null&&f(t,["text"],y);const _=c(n,["thought"]);_!=null&&f(t,["thought"],_);const I=c(n,["thoughtSignature"]);I!=null&&f(t,["thoughtSignature"],I);const C=c(n,["videoMetadata"]);return C!=null&&f(t,["videoMetadata"],C),t}function MN(n,e){const t={},r=c(n,["productImage"]);return r!=null&&f(t,["image"],Wn(r)),t}function DN(n,e,t){const r={},i=c(n,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const a=c(n,["baseSteps"]);e!==void 0&&a!=null&&f(e,["parameters","baseSteps"],a);const l=c(n,["outputGcsUri"]);e!==void 0&&l!=null&&f(e,["parameters","storageUri"],l);const d=c(n,["seed"]);e!==void 0&&d!=null&&f(e,["parameters","seed"],d);const m=c(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&f(e,["parameters","safetySetting"],m);const p=c(n,["personGeneration"]);e!==void 0&&p!=null&&f(e,["parameters","personGeneration"],p);const y=c(n,["addWatermark"]);e!==void 0&&y!=null&&f(e,["parameters","addWatermark"],y);const _=c(n,["outputMimeType"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","mimeType"],_);const I=c(n,["outputCompressionQuality"]);e!==void 0&&I!=null&&f(e,["parameters","outputOptions","compressionQuality"],I);const C=c(n,["enhancePrompt"]);e!==void 0&&C!=null&&f(e,["parameters","enhancePrompt"],C);const D=c(n,["labels"]);return e!==void 0&&D!=null&&f(e,["labels"],D),r}function LN(n,e,t){const r={},i=c(e,["model"]);i!=null&&f(r,["_url","model"],Be(n,i));const a=c(e,["source"]);a!=null&&bN(a,r);const l=c(e,["config"]);return l!=null&&DN(l,r),r}function VN(n,e){const t={},r=c(n,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>Jc(a))),f(t,["generatedImages"],i)}return t}function bN(n,e,t){const r={},i=c(n,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const a=c(n,["personImage"]);e!==void 0&&a!=null&&f(e,["instances[0]","personImage","image"],Wn(a));const l=c(n,["productImages"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(m=>MN(m))),f(e,["instances[0]","productImages"],d)}return r}function UN(n,e){const t={},r=c(n,["referenceImage"]);r!=null&&f(t,["referenceImage"],Wn(r));const i=c(n,["referenceId"]);i!=null&&f(t,["referenceId"],i);const a=c(n,["referenceType"]);a!=null&&f(t,["referenceType"],a);const l=c(n,["maskImageConfig"]);l!=null&&f(t,["maskImageConfig"],kN(l));const d=c(n,["controlImageConfig"]);d!=null&&f(t,["controlImageConfig"],SP(d));const m=c(n,["styleImageConfig"]);m!=null&&f(t,["styleImageConfig"],m);const p=c(n,["subjectImageConfig"]);return p!=null&&f(t,["subjectImageConfig"],p),t}function lT(n,e){const t={},r=c(n,["safetyAttributes","categories"]);r!=null&&f(t,["categories"],r);const i=c(n,["safetyAttributes","scores"]);i!=null&&f(t,["scores"],i);const a=c(n,["contentType"]);return a!=null&&f(t,["contentType"],a),t}function uT(n,e){const t={},r=c(n,["safetyAttributes","categories"]);r!=null&&f(t,["categories"],r);const i=c(n,["safetyAttributes","scores"]);i!=null&&f(t,["scores"],i);const a=c(n,["contentType"]);return a!=null&&f(t,["contentType"],a),t}function FN(n,e){const t={},r=c(n,["category"]);if(r!=null&&f(t,["category"],r),c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=c(n,["threshold"]);return i!=null&&f(t,["threshold"],i),t}function ON(n,e){const t={},r=c(n,["image"]);return r!=null&&f(t,["image"],Wn(r)),t}function GN(n,e,t){const r={},i=c(n,["mode"]);e!==void 0&&i!=null&&f(e,["parameters","mode"],i);const a=c(n,["maxPredictions"]);e!==void 0&&a!=null&&f(e,["parameters","maxPredictions"],a);const l=c(n,["confidenceThreshold"]);e!==void 0&&l!=null&&f(e,["parameters","confidenceThreshold"],l);const d=c(n,["maskDilation"]);e!==void 0&&d!=null&&f(e,["parameters","maskDilation"],d);const m=c(n,["binaryColorThreshold"]);e!==void 0&&m!=null&&f(e,["parameters","binaryColorThreshold"],m);const p=c(n,["labels"]);return e!==void 0&&p!=null&&f(e,["labels"],p),r}function BN(n,e,t){const r={},i=c(e,["model"]);i!=null&&f(r,["_url","model"],Be(n,i));const a=c(e,["source"]);a!=null&&qN(a,r);const l=c(e,["config"]);return l!=null&&GN(l,r),r}function HN(n,e){const t={},r=c(n,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>hN(a))),f(t,["generatedMasks"],i)}return t}function qN(n,e,t){const r={},i=c(n,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const a=c(n,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],Wn(a));const l=c(n,["scribbleImage"]);return e!==void 0&&l!=null&&f(e,["instances[0]","scribble"],ON(l)),r}function zN(n,e){const t={},r=c(n,["retrievalConfig"]);r!=null&&f(t,["retrievalConfig"],r);const i=c(n,["functionCallingConfig"]);return i!=null&&f(t,["functionCallingConfig"],WP(i)),t}function $N(n,e){const t={};if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(n,["computerUse"]);r!=null&&f(t,["computerUse"],r);const i=c(n,["fileSearch"]);i!=null&&f(t,["fileSearch"],i);const a=c(n,["codeExecution"]);if(a!=null&&f(t,["codeExecution"],a),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=c(n,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(I=>I)),f(t,["functionDeclarations"],_)}const d=c(n,["googleMaps"]);d!=null&&f(t,["googleMaps"],_N(d));const m=c(n,["googleSearch"]);m!=null&&f(t,["googleSearch"],EN(m));const p=c(n,["googleSearchRetrieval"]);p!=null&&f(t,["googleSearchRetrieval"],p);const y=c(n,["urlContext"]);return y!=null&&f(t,["urlContext"],y),t}function cT(n,e){const t={},r=c(n,["retrieval"]);r!=null&&f(t,["retrieval"],r);const i=c(n,["computerUse"]);if(i!=null&&f(t,["computerUse"],i),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=c(n,["codeExecution"]);a!=null&&f(t,["codeExecution"],a);const l=c(n,["enterpriseWebSearch"]);l!=null&&f(t,["enterpriseWebSearch"],l);const d=c(n,["functionDeclarations"]);if(d!=null){let I=d;Array.isArray(I)&&(I=I.map(C=>JP(C))),f(t,["functionDeclarations"],I)}const m=c(n,["googleMaps"]);m!=null&&f(t,["googleMaps"],m);const p=c(n,["googleSearch"]);p!=null&&f(t,["googleSearch"],p);const y=c(n,["googleSearchRetrieval"]);y!=null&&f(t,["googleSearchRetrieval"],y);const _=c(n,["urlContext"]);return _!=null&&f(t,["urlContext"],_),t}function WN(n,e){const t={},r=c(n,["baseModel"]);r!=null&&f(t,["baseModel"],r);const i=c(n,["createTime"]);i!=null&&f(t,["createTime"],i);const a=c(n,["updateTime"]);return a!=null&&f(t,["updateTime"],a),t}function JN(n,e){const t={},r=c(n,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&f(t,["baseModel"],r);const i=c(n,["createTime"]);i!=null&&f(t,["createTime"],i);const a=c(n,["updateTime"]);return a!=null&&f(t,["updateTime"],a),t}function KN(n,e,t){const r={},i=c(n,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const a=c(n,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const l=c(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&f(e,["defaultCheckpointId"],l),r}function YN(n,e,t){const r={},i=c(n,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const a=c(n,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const l=c(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&f(e,["defaultCheckpointId"],l),r}function QN(n,e,t){const r={},i=c(e,["model"]);i!=null&&f(r,["_url","name"],Be(n,i));const a=c(e,["config"]);return a!=null&&KN(a,r),r}function XN(n,e,t){const r={},i=c(e,["model"]);i!=null&&f(r,["_url","model"],Be(n,i));const a=c(e,["config"]);return a!=null&&YN(a,r),r}function ZN(n,e,t){const r={},i=c(n,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const a=c(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);const l=c(n,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);const d=c(n,["includeRaiReason"]);e!==void 0&&d!=null&&f(e,["parameters","includeRaiReason"],d);const m=c(n,["outputMimeType"]);e!==void 0&&m!=null&&f(e,["parameters","outputOptions","mimeType"],m);const p=c(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","compressionQuality"],p);const y=c(n,["enhanceInputImage"]);e!==void 0&&y!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],y);const _=c(n,["imagePreservationFactor"]);e!==void 0&&_!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const I=c(n,["labels"]);e!==void 0&&I!=null&&f(e,["labels"],I);const C=c(n,["numberOfImages"]);e!==void 0&&C!=null&&f(e,["parameters","sampleCount"],C);const D=c(n,["mode"]);return e!==void 0&&D!=null&&f(e,["parameters","mode"],D),r}function jN(n,e,t){const r={},i=c(e,["model"]);i!=null&&f(r,["_url","model"],Be(n,i));const a=c(e,["image"]);a!=null&&f(r,["instances[0]","image"],Wn(a));const l=c(e,["upscaleFactor"]);l!=null&&f(r,["parameters","upscaleConfig","upscaleFactor"],l);const d=c(e,["config"]);return d!=null&&ZN(d,r),r}function ek(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const i=c(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Jc(l))),f(t,["generatedImages"],a)}return t}function tk(n,e){const t={},r=c(n,["uri"]);r!=null&&f(t,["uri"],r);const i=c(n,["encodedVideo"]);i!=null&&f(t,["videoBytes"],Gi(i));const a=c(n,["encoding"]);return a!=null&&f(t,["mimeType"],a),t}function nk(n,e){const t={},r=c(n,["gcsUri"]);r!=null&&f(t,["uri"],r);const i=c(n,["bytesBase64Encoded"]);i!=null&&f(t,["videoBytes"],Gi(i));const a=c(n,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function rk(n,e){const t={},r=c(n,["image"]);r!=null&&f(t,["_self"],Wn(r));const i=c(n,["maskMode"]);return i!=null&&f(t,["maskMode"],i),t}function ik(n,e){const t={},r=c(n,["image"]);r!=null&&f(t,["image"],Kc(r));const i=c(n,["referenceType"]);return i!=null&&f(t,["referenceType"],i),t}function ok(n,e){const t={},r=c(n,["image"]);r!=null&&f(t,["image"],Wn(r));const i=c(n,["referenceType"]);return i!=null&&f(t,["referenceType"],i),t}function dT(n,e){const t={},r=c(n,["uri"]);r!=null&&f(t,["uri"],r);const i=c(n,["videoBytes"]);i!=null&&f(t,["encodedVideo"],Gi(i));const a=c(n,["mimeType"]);return a!=null&&f(t,["encoding"],a),t}function fT(n,e){const t={},r=c(n,["uri"]);r!=null&&f(t,["gcsUri"],r);const i=c(n,["videoBytes"]);i!=null&&f(t,["bytesBase64Encoded"],Gi(i));const a=c(n,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function sk(n,e){const t={},r=c(n,["displayName"]);return e!==void 0&&r!=null&&f(e,["displayName"],r),t}function ak(n){const e={},t=c(n,["config"]);return t!=null&&sk(t,e),e}function lk(n,e){const t={},r=c(n,["force"]);return e!==void 0&&r!=null&&f(e,["_query","force"],r),t}function uk(n){const e={},t=c(n,["name"]);t!=null&&f(e,["_url","name"],t);const r=c(n,["config"]);return r!=null&&lk(r,e),e}function ck(n){const e={},t=c(n,["name"]);return t!=null&&f(e,["_url","name"],t),e}function dk(n,e){const t={},r=c(n,["customMetadata"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["customMetadata"],a)}const i=c(n,["chunkingConfig"]);return e!==void 0&&i!=null&&f(e,["chunkingConfig"],i),t}function fk(n){const e={},t=c(n,["name"]);t!=null&&f(e,["name"],t);const r=c(n,["metadata"]);r!=null&&f(e,["metadata"],r);const i=c(n,["done"]);i!=null&&f(e,["done"],i);const a=c(n,["error"]);a!=null&&f(e,["error"],a);const l=c(n,["response"]);return l!=null&&f(e,["response"],pk(l)),e}function hk(n){const e={},t=c(n,["fileSearchStoreName"]);t!=null&&f(e,["_url","file_search_store_name"],t);const r=c(n,["fileName"]);r!=null&&f(e,["fileName"],r);const i=c(n,["config"]);return i!=null&&dk(i,e),e}function pk(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["parent"]);r!=null&&f(e,["parent"],r);const i=c(n,["documentName"]);return i!=null&&f(e,["documentName"],i),e}function mk(n,e){const t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(n,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),t}function gk(n){const e={},t=c(n,["config"]);return t!=null&&mk(t,e),e}function yk(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(n,["fileSearchStores"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["fileSearchStores"],a)}return e}function hT(n,e){const t={},r=c(n,["mimeType"]);e!==void 0&&r!=null&&f(e,["mimeType"],r);const i=c(n,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const a=c(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(m=>m)),f(e,["customMetadata"],d)}const l=c(n,["chunkingConfig"]);return e!==void 0&&l!=null&&f(e,["chunkingConfig"],l),t}function vk(n){const e={},t=c(n,["fileSearchStoreName"]);t!=null&&f(e,["_url","file_search_store_name"],t);const r=c(n,["config"]);return r!=null&&hT(r,e),e}function _k(n){const e={},t=c(n,["sdkHttpResponse"]);return t!=null&&f(e,["sdkHttpResponse"],t),e}const Ek="Content-Type",Tk="X-Server-Timeout",Ik="User-Agent",yh="x-goog-api-client",Sk="1.42.0",wk=`google-genai-sdk/${Sk}`,Ck="v1beta1",Ak="v1beta",Rk=5,Pk=[408,429,500,502,503,504];class Nk{constructor(e){var t,r,i;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const d=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!d?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Ck}else{if(!this.clientOptions.apiKey)throw new ll({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Ak,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,r){const i=[this.getRequestUrlInternal(t)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===dh.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,t),i=this.constructUrl(e.path,t,r);if(e.queryParams)for(const[l,d]of Object.entries(e.queryParams))i.searchParams.append(l,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,i.toString(),e.abortSignal),this.unaryApiCall(i,a,e.httpMethod)}patchHttpOptions(e,t){const r=JSON.parse(JSON.stringify(e));for(const[i,a]of Object.entries(t))typeof a=="object"?r[i]=Object.assign(Object.assign({},r[i]),a):a!==void 0&&(r[i]=a);return r}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,t),i=this.constructUrl(e.path,t,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,i.toString(),e.abortSignal),this.streamApiCall(i,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,r,i){if(t&&t.timeout||i){const a=new AbortController,l=a.signal;if(t.timeout&&t?.timeout>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}i&&i.addEventListener("abort",()=>{a.abort()}),e.signal=l}return t&&t.extraBody!==null&&kk(e,t.extraBody),e.headers=await this.getHeadersInternal(t,r),e}async unaryApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await Mv(i),new fh(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await Mv(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return qn(this,arguments,function*(){var r;const i=(r=e?.body)===null||r===void 0?void 0:r.getReader(),a=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let l="";const d="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:y}=yield we(i.read());if(p){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=a.decode(y,{stream:!0});try{const D=JSON.parse(_);if("error"in D){const b=JSON.parse(JSON.stringify(D.error)),N=b.status,B=b.code,K=`got status: ${N}. ${JSON.stringify(D)}`;if(B>=400&&B<600)throw new ll({message:K,status:B})}}catch(D){if(D.name==="ApiError")throw D}l+=_;let I=-1,C=0;for(;;){I=-1,C=0;for(const N of m){const B=l.indexOf(N);B!==-1&&(I===-1||B<I)&&(I=B,C=N.length)}if(I===-1)break;const D=l.substring(0,I);l=l.substring(I+C);const b=D.trim();if(b.startsWith(d)){const N=b.substring(d.length).trim();try{const B=new Response(N,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield we(new fh(B))}catch(B){throw new Error(`exception parsing stream chunk ${N}. ${B}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,t){var r;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,t);const i=this.clientOptions.httpOptions.retryOptions;return vC(async()=>{const l=await fetch(e,t);if(l.ok)return l;throw Pk.includes(l.status)?new Error(`Retryable HTTP Error: ${l.statusText}`):new $E.AbortError(`Non-retryable exception ${l.statusText} sending request`)},{retries:((r=i.attempts)!==null&&r!==void 0?r:Rk)-1})}getDefaultHeaders(){const e={},t=wk+" "+this.clientOptions.userAgentExtra;return e[Ik]=t,e[yh]=t,e[Ek]="application/json",e}async getHeadersInternal(e,t){const r=new Headers;if(e&&e.headers){for(const[i,a]of Object.entries(e.headers))r.append(i,a);e.timeout&&e.timeout>0&&r.append(Tk,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,t),r}getFileName(e){var t;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(t=r.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),r}async uploadFile(e,t){var r;const i={};t!=null&&(i.mimeType=t.mimeType,i.name=t.name,i.displayName=t.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const a=this.clientOptions.uploader,l=await a.stat(e);i.sizeBytes=String(l.size);const d=(r=t?.mimeType)!==null&&r!==void 0?r:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=d;const m={file:i},p=this.getFileName(e),y=ue("upload/v1beta/files",m._url),_=await this.fetchUploadUrl(y,i.sizeBytes,i.mimeType,p,m,t?.httpOptions);return a.upload(e,_,this)}async uploadFileToFileSearchStore(e,t,r){var i;const a=this.clientOptions.uploader,l=await a.stat(t),d=String(l.size),m=(i=r?.mimeType)!==null&&i!==void 0?i:l.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(t),_={};r!=null&&hT(r,_);const I=await this.fetchUploadUrl(p,d,m,y,_,r?.httpOptions);return a.uploadToFileSearchStore(t,I,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,r,i,a,l){var d;let m={};l?m=l:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const p=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:m});if(!p||!p?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(d=p?.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function Mv(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let r;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await n.json():r={error:{message:await n.text(),code:n.status,status:n.statusText}};const i=JSON.stringify(r);throw t>=400&&t<600?new ll({message:i,status:t}):new Error(i)}}function kk(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(a,l){const d=Object.assign({},a);for(const m in l)if(Object.prototype.hasOwnProperty.call(l,m)){const p=l[m],y=d[m];p&&typeof p=="object"&&!Array.isArray(p)&&y&&typeof y=="object"&&!Array.isArray(y)?d[m]=r(y,p):(y&&p&&typeof y!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof y}, New type: ${typeof p}. Overwriting.`),d[m]=p)}return d}const i=r(t,e);n.body=JSON.stringify(i)}const xk="mcp_used/unknown";let Mk=!1;function pT(n){for(const e of n)if(Dk(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Mk}function mT(n){var e;const t=(e=n[yh])!==null&&e!==void 0?e:"";n[yh]=(t+` ${xk}`).trimStart()}function Dk(n){return n!==null&&typeof n=="object"&&n instanceof np}function Lk(n){return qn(this,arguments,function*(t,r=100){let i,a=0;for(;a<r;){const l=yield we(t.listTools({cursor:i}));for(const d of l.tools)yield yield we(d),a++;if(!l.nextCursor)break;i=l.nextCursor}})}class np{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new np(e,t)}async initialize(){var e,t,r,i;if(this.mcpTools.length>0)return;const a={},l=[];for(const y of this.mcpClients)try{for(var d=!0,m=(t=void 0,zn(Lk(y))),p;p=await m.next(),e=p.done,!e;d=!0){i=p.value,d=!1;const _=i;l.push(_);const I=_.name;if(a[I])throw new Error(`Duplicate function name ${I} found in MCP tools. Please ensure function names are unique.`);a[I]=y}}catch(_){t={error:_}}finally{try{!d&&!e&&(r=m.return)&&await r.call(m)}finally{if(t)throw t.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),sA(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await i.callTool({name:r.name,arguments:r.args},void 0,a);t.push({functionResponse:{name:r.name,response:l.isError?{error:l}:l}})}return t}}async function Vk(n,e,t){const r=new ZC;let i;t.data instanceof Blob?i=JSON.parse(await t.data.text()):i=JSON.parse(t.data),Object.assign(r,i),e(r)}class bk{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r}async connect(e){var t,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=Ok(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),m=`${i}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let p=()=>{};const y=new Promise(Y=>{p=Y}),_=e.callbacks,I=function(){p({})},C=this.apiClient,D={onopen:I,onmessage:Y=>{Vk(C,_.onmessage,Y)},onerror:(t=_?.onerror)!==null&&t!==void 0?t:function(Y){},onclose:(r=_?.onclose)!==null&&r!==void 0?r:function(Y){}},b=this.webSocketFactory.create(m,Fk(l),D);b.connect(),await y;const K={setup:{model:Be(this.apiClient,e.model)}};return b.send(JSON.stringify(K)),new Uk(b,this.apiClient)}}class Uk{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=sP(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=oP(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Ss.PLAY)}pause(){this.sendPlaybackControl(Ss.PAUSE)}stop(){this.sendPlaybackControl(Ss.STOP)}resetContext(){this.sendPlaybackControl(Ss.RESET_CONTEXT)}close(){this.conn.close()}}function Fk(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function Ok(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}const Gk="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Bk(n,e,t){const r=new XC;let i;t.data instanceof Blob?i=await t.data.text():t.data instanceof ArrayBuffer?i=new TextDecoder().decode(t.data):i=t.data;const a=JSON.parse(i);if(n.isVertexAI()){const l=uP(a);Object.assign(r,l)}else Object.assign(r,a);e(r)}class Hk{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r,this.music=new bk(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,r,i,a,l,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let y;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&pT(e.config.tools)&&mT(_);const I=Wk(_);if(this.apiClient.isVertexAI()){const P=this.apiClient.getProject(),L=this.apiClient.getLocation(),V=this.apiClient.getApiKey(),F=!!P&&!!L||!!V;this.apiClient.getCustomBaseUrl()&&!F?y=m:(y=`${m}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(I,y))}else{const P=this.apiClient.getApiKey();let L="BidiGenerateContent",V="key";P?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",V="access_token"),y=`${m}/ws/google.ai.generativelanguage.${p}.GenerativeService.${L}?${V}=${P}`}let C=()=>{};const D=new Promise(P=>{C=P}),b=e.callbacks,N=function(){var P;(P=b?.onopen)===null||P===void 0||P.call(b),C({})},B=this.apiClient,K={onopen:N,onmessage:P=>{Bk(B,b.onmessage,P)},onerror:(t=b?.onerror)!==null&&t!==void 0?t:function(P){},onclose:(r=b?.onclose)!==null&&r!==void 0?r:function(P){}},Y=this.webSocketFactory.create(y,$k(I),K);Y.connect(),await D;let Q=Be(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&Q.startsWith("publishers/")){const P=this.apiClient.getProject(),L=this.apiClient.getLocation();P&&L&&(Q=`projects/${P}/locations/${L}/`+Q)}let le={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ec.AUDIO]}:e.config.responseModalities=[Ec.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const J=(d=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&d!==void 0?d:[],M=[];for(const P of J)if(this.isCallableTool(P)){const L=P;M.push(await L.tool())}else M.push(P);M.length>0&&(e.config.tools=M);const R={model:Q,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?le=iP(this.apiClient,R):le=rP(this.apiClient,R),delete le.config,Y.send(JSON.stringify(le)),new zk(Y,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const qk={turnComplete:!0};class zk{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let r=[];try{r=gn(t.turns),e.isVertexAI()||(r=r.map(i=>vl(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let r=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?r=t.functionResponses:r=[t.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(Gk)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},qk),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:lP(e)}:t={realtimeInput:aP(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function $k(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function Wk(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}const Dv=10;function Lv(n){var e,t,r;if(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const l of(t=n?.tools)!==null&&t!==void 0?t:[])if(Rs(l)){i=!0;break}if(!i)return!0;const a=(r=n?.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Rs(n){return"callTool"in n&&typeof n.callTool=="function"}function Jk(n){var e,t,r;return(r=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(i=>Rs(i)))!==null&&r!==void 0?r:!1}function Vv(n){var e;const t=[];return!((e=n?.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((r,i)=>{if(Rs(r))return;const a=r;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(i)}),t}function bv(n){var e;return!(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}class Kk extends Jr{constructor(e){super(),this.apiClient=e,this.embedContent=async t=>{if(!this.apiClient.isVertexAI())return await this.embedContentInternal(t);if(t.model.includes("gemini")&&t.model!=="gemini-embedding-001"||t.model.includes("maas")){const i=gn(t.contents);if(i.length>1)throw new Error("The embedContent API for this model only supports one content at a time.");const a=Object.assign(Object.assign({},t),{content:i[0],embeddingApiType:Tc.EMBED_CONTENT});return await this.embedContentInternal(a)}else{const i=Object.assign(Object.assign({},t),{embeddingApiType:Tc.PREDICT});return await this.embedContentInternal(i)}},this.generateContent=async t=>{var r,i,a,l,d;const m=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!Jk(t)||Lv(t.config))return await this.generateContentInternal(m);const p=Vv(t);if(p.length>0){const b=p.map(N=>`tools[${N}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${b}.`)}let y,_;const I=gn(m.contents),C=(a=(i=(r=m.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&a!==void 0?a:Dv;let D=0;for(;D<C&&(y=await this.generateContentInternal(m),!(!y.functionCalls||y.functionCalls.length===0));){const b=y.candidates[0].content,N=[];for(const B of(d=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&d!==void 0?d:[])if(Rs(B)){const Y=await B.callTool(y.functionCalls);N.push(...Y)}D++,_={role:"user",parts:N},m.contents=gn(m.contents),m.contents.push(b),m.contents.push(_),bv(m.config)&&(I.push(b),I.push(_))}return bv(m.config)&&(y.automaticFunctionCallingHistory=I),y},this.generateContentStream=async t=>{var r,i,a,l,d;if(this.maybeMoveToResponseJsonSchem(t),Lv(t.config)){const _=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(_)}const m=Vv(t);if(m.length>0){const _=m.map(I=>`tools[${I}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(a=(i=(r=t?.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,y=(d=(l=t?.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(p&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(r=>{var i;let a;const l=[];if(r?.generatedImages)for(const m of r.generatedImages)m&&m?.safetyAttributes&&((i=m?.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?a=m?.safetyAttributes:l.push(m);let d;return a?d={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:r.sdkHttpResponse}:d={generatedImages:l,sdkHttpResponse:r.sdkHttpResponse},d}),this.list=async t=>{var r;const l={config:Object.assign(Object.assign({},{queryBase:!0}),t?.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((r=l.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new No(qr.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(l),l)},this.editImage=async t=>{const r={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(r.referenceImages=t.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async t=>{let r={numberOfImages:1,mode:"upscale"};t.config&&(r=Object.assign(Object.assign({},r),t.config));const i={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async t=>{var r,i,a,l,d,m;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=t.video)===null||r===void 0)&&r.uri&&(!((i=t.video)===null||i===void 0)&&i.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((l=(a=t.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.uri&&(!((m=(d=t.source)===null||d===void 0?void 0:d.video)===null||m===void 0)&&m.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,r,i;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const l=await Promise.all(a.map(async m=>Rs(m)?await m.tool():m)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(d.config.tools=l,e.config&&e.config.tools&&pT(e.config.tools)){const m=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let p=Object.assign({},m);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),mT(p),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return d}async initAfcToolsMap(e){var t,r,i;const a=new Map;for(const l of(r=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&r!==void 0?r:[])if(Rs(l)){const d=l,m=await d.tool();for(const p of(i=m.functionDeclarations)!==null&&i!==void 0?i:[]){if(!p.name)throw new Error("Function declaration name is required.");if(a.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);a.set(p.name,d)}}return a}async processAfcStream(e){var t,r,i;const a=(i=(r=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:Dv;let l=!1,d=0;const m=await this.initAfcToolsMap(e);return(function(p,y,_){return qn(this,arguments,function*(){for(var I,C,D,b,N,B;d<a;){l&&(d++,l=!1);const le=yield we(p.processParamsMaybeAddMcpUsage(_)),J=yield we(p.generateContentStreamInternal(le)),M=[],R=[];try{for(var K=!0,Y=(C=void 0,zn(J)),Q;Q=yield we(Y.next()),I=Q.done,!I;K=!0){b=Q.value,K=!1;const P=b;if(yield yield we(P),P.candidates&&(!((N=P.candidates[0])===null||N===void 0)&&N.content)){R.push(P.candidates[0].content);for(const L of(B=P.candidates[0].content.parts)!==null&&B!==void 0?B:[])if(d<a&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(L.functionCall.name)){const V=yield we(y.get(L.functionCall.name).callTool([L.functionCall]));M.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(P){C={error:P}}finally{try{!K&&!I&&(D=Y.return)&&(yield we(D.call(Y)))}finally{if(C)throw C.error}}if(M.length>0){l=!0;const P=new Ya;P.candidates=[{content:{role:"user",parts:M}}],yield yield we(P);const L=[];L.push(...R),L.push({role:"user",parts:M});const V=gn(_.contents).concat(L);_.contents=V}else break}})})(this,m,e)}async generateContentInternal(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=Nv(this.apiClient,e);return d=ue("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const _=xv(y),I=new Ya;return Object.assign(I,_),I})}else{const p=Pv(this.apiClient,e);return d=ue("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const _=kv(y),I=new Ya;return Object.assign(I,_),I})}}async generateContentStreamInternal(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=Nv(this.apiClient,e);return d=ue("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.requestStream({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),l.then(function(_){return qn(this,arguments,function*(){var I,C,D,b;try{for(var N=!0,B=zn(_),K;K=yield we(B.next()),I=K.done,!I;N=!0){b=K.value,N=!1;const Y=b,Q=xv(yield we(Y.json()),e);Q.sdkHttpResponse={headers:Y.headers};const le=new Ya;Object.assign(le,Q),yield yield we(le)}}catch(Y){C={error:Y}}finally{try{!N&&!I&&(D=B.return)&&(yield we(D.call(B)))}finally{if(C)throw C.error}}})})}else{const p=Pv(this.apiClient,e);return d=ue("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.requestStream({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(_){return qn(this,arguments,function*(){var I,C,D,b;try{for(var N=!0,B=zn(_),K;K=yield we(B.next()),I=K.done,!I;N=!0){b=K.value,N=!1;const Y=b,Q=kv(yield we(Y.json()),e);Q.sdkHttpResponse={headers:Y.headers};const le=new Ya;Object.assign(le,Q),yield yield we(le)}}catch(Y){C={error:Y}}finally{try{!N&&!I&&(D=B.return)&&(yield we(D.call(B)))}finally{if(C)throw C.error}}})})}}async embedContentInternal(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=GP(this.apiClient,e,e),y=lA(e.model)?"{model}:embedContent":"{model}:predict";return d=ue(y,p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(I=>{const C=I;return C.sdkHttpResponse={headers:_.headers},C})),l.then(_=>{const I=HP(_,e),C=new dv;return Object.assign(C,I),C})}else{const p=OP(this.apiClient,e);return d=ue("{model}:batchEmbedContents",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const _=BP(y),I=new dv;return Object.assign(I,_),I})}}async generateImagesInternal(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=jP(this.apiClient,e);return d=ue("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const _=tN(y),I=new fv;return Object.assign(I,_),I})}else{const p=ZP(this.apiClient,e);return d=ue("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const _=eN(y),I=new fv;return Object.assign(I,_),I})}}async editImageInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const d=VP(this.apiClient,e);return a=ue("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),i.then(m=>{const p=bP(m),y=new OC;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const d=jN(this.apiClient,e);return a=ue("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),i.then(m=>{const p=ek(m),y=new GC;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const d=LN(this.apiClient,e);return a=ue("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(m=>{const p=VN(m),y=new BC;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const d=BN(this.apiClient,e);return a=ue("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(m=>{const p=HN(m),y=new HC;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=vN(this.apiClient,e);return d=ue("{name}",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>gh(y))}else{const p=yN(this.apiClient,e);return d=ue("{name}",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>mh(y))}}async listInternal(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=RN(this.apiClient,e);return d=ue("{models_url}",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const _=NN(y),I=new hv;return Object.assign(I,_),I})}else{const p=AN(this.apiClient,e);return d=ue("{models_url}",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const _=PN(y),I=new hv;return Object.assign(I,_),I})}}async update(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=XN(this.apiClient,e);return d=ue("{model}",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>gh(y))}else{const p=QN(this.apiClient,e);return d=ue("{name}",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>mh(y))}}async delete(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=xP(this.apiClient,e);return d=ue("{name}",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const _=DP(y),I=new pv;return Object.assign(I,_),I})}else{const p=kP(this.apiClient,e);return d=ue("{name}",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const _=MP(y),I=new pv;return Object.assign(I,_),I})}}async countTokens(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=RP(this.apiClient,e);return d=ue("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const _=NP(y),I=new mv;return Object.assign(I,_),I})}else{const p=AP(this.apiClient,e);return d=ue("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const _=PP(y),I=new mv;return Object.assign(I,_),I})}}async computeTokens(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const d=_P(this.apiClient,e);return a=ue("{model}:computeTokens",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),i.then(m=>{const p=EP(m),y=new qC;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=aN(this.apiClient,e);return d=ue("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>{const _=oN(y),I=new Ic;return Object.assign(I,_),I})}else{const p=sN(this.apiClient,e);return d=ue("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const _=iN(y),I=new Ic;return Object.assign(I,_),I})}}}class Yk extends Jr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=DC(e);return d=ue("{operationName}",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l}else{const p=MC(e);return d=ue("{operationName}",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l}}async fetchPredictVideosOperationInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const d=CC(e);return a=ue("{resourceName}:fetchPredictOperation",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}function Qk(n){const e={},t=c(n,["data"]);if(t!=null&&f(e,["data"],t),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Xk(n){const e={},t=c(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(a=>sx(a))),f(e,["parts"],i)}const r=c(n,["role"]);return r!=null&&f(e,["role"],r),e}function Zk(n,e,t){const r={},i=c(e,["expireTime"]);t!==void 0&&i!=null&&f(t,["expireTime"],i);const a=c(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&f(t,["newSessionExpireTime"],a);const l=c(e,["uses"]);t!==void 0&&l!=null&&f(t,["uses"],l);const d=c(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&f(t,["bidiGenerateContentSetup"],ox(n,d));const m=c(e,["lockAdditionalFields"]);return t!==void 0&&m!=null&&f(t,["fieldMask"],m),r}function jk(n,e){const t={},r=c(e,["config"]);return r!=null&&f(t,["config"],Zk(n,r,t)),t}function ex(n){const e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=c(n,["fileUri"]);t!=null&&f(e,["fileUri"],t);const r=c(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function tx(n){const e={},t=c(n,["id"]);t!=null&&f(e,["id"],t);const r=c(n,["args"]);r!=null&&f(e,["args"],r);const i=c(n,["name"]);if(i!=null&&f(e,["name"],i),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nx(n){const e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=c(n,["enableWidget"]);return t!=null&&f(e,["enableWidget"],t),e}function rx(n){const e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=c(n,["timeRangeFilter"]);return t!=null&&f(e,["timeRangeFilter"],t),e}function ix(n,e){const t={},r=c(n,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);const i=c(n,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const a=c(n,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const l=c(n,["topP"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","topP"],l);const d=c(n,["topK"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","topK"],d);const m=c(n,["maxOutputTokens"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","maxOutputTokens"],m);const p=c(n,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const y=c(n,["seed"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","seed"],y);const _=c(n,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],tp(_));const I=c(n,["thinkingConfig"]);e!==void 0&&I!=null&&f(e,["setup","generationConfig","thinkingConfig"],I);const C=c(n,["enableAffectiveDialog"]);e!==void 0&&C!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],C);const D=c(n,["systemInstruction"]);e!==void 0&&D!=null&&f(e,["setup","systemInstruction"],Xk(Rt(D)));const b=c(n,["tools"]);if(e!==void 0&&b!=null){let J=zs(b);Array.isArray(J)&&(J=J.map(M=>lx(qs(M)))),f(e,["setup","tools"],J)}const N=c(n,["sessionResumption"]);e!==void 0&&N!=null&&f(e,["setup","sessionResumption"],ax(N));const B=c(n,["inputAudioTranscription"]);e!==void 0&&B!=null&&f(e,["setup","inputAudioTranscription"],B);const K=c(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&f(e,["setup","outputAudioTranscription"],K);const Y=c(n,["realtimeInputConfig"]);e!==void 0&&Y!=null&&f(e,["setup","realtimeInputConfig"],Y);const Q=c(n,["contextWindowCompression"]);e!==void 0&&Q!=null&&f(e,["setup","contextWindowCompression"],Q);const le=c(n,["proactivity"]);if(e!==void 0&&le!=null&&f(e,["setup","proactivity"],le),c(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function ox(n,e){const t={},r=c(e,["model"]);r!=null&&f(t,["setup","model"],Be(n,r));const i=c(e,["config"]);return i!=null&&f(t,["config"],ix(i,t)),t}function sx(n){const e={},t=c(n,["mediaResolution"]);t!=null&&f(e,["mediaResolution"],t);const r=c(n,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=c(n,["executableCode"]);i!=null&&f(e,["executableCode"],i);const a=c(n,["fileData"]);a!=null&&f(e,["fileData"],ex(a));const l=c(n,["functionCall"]);l!=null&&f(e,["functionCall"],tx(l));const d=c(n,["functionResponse"]);d!=null&&f(e,["functionResponse"],d);const m=c(n,["inlineData"]);m!=null&&f(e,["inlineData"],Qk(m));const p=c(n,["text"]);p!=null&&f(e,["text"],p);const y=c(n,["thought"]);y!=null&&f(e,["thought"],y);const _=c(n,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const I=c(n,["videoMetadata"]);return I!=null&&f(e,["videoMetadata"],I),e}function ax(n){const e={},t=c(n,["handle"]);if(t!=null&&f(e,["handle"],t),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function lx(n){const e={};if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=c(n,["computerUse"]);t!=null&&f(e,["computerUse"],t);const r=c(n,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);const i=c(n,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(n,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(_=>_)),f(e,["functionDeclarations"],y)}const l=c(n,["googleMaps"]);l!=null&&f(e,["googleMaps"],nx(l));const d=c(n,["googleSearch"]);d!=null&&f(e,["googleSearch"],rx(d));const m=c(n,["googleSearchRetrieval"]);m!=null&&f(e,["googleSearchRetrieval"],m);const p=c(n,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function ux(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const r=n[t];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(a=>`${t}.${a}`);e.push(...i)}else e.push(t)}return e.join(",")}function cx(n,e){let t=null;const r=n.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else r!==void 0&&delete n.bidiGenerateContentSetup;const i=n.fieldMask;if(t){const a=ux(t);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)a?n.fieldMask=a:delete n.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];i.length>0&&(d=i.map(p=>l.includes(p)?`generationConfig.${p}`:p));const m=[];a&&m.push(a),d.length>0&&m.push(...d),m.length>0?n.fieldMask=m.join(","):delete n.fieldMask}else delete n.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?n.fieldMask=i.join(","):delete n.fieldMask;return n}class dx extends Jr{constructor(e){super(),this.apiClient=e}async create(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=jk(this.apiClient,e);a=ue("auth_tokens",d._url),l=d._query,delete d.config,delete d._url,delete d._query;const m=cx(d,e.config);return i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>p)}}}function fx(n,e){const t={},r=c(n,["force"]);return e!==void 0&&r!=null&&f(e,["_query","force"],r),t}function hx(n){const e={},t=c(n,["name"]);t!=null&&f(e,["_url","name"],t);const r=c(n,["config"]);return r!=null&&fx(r,e),e}function px(n){const e={},t=c(n,["name"]);return t!=null&&f(e,["_url","name"],t),e}function mx(n,e){const t={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(n,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),t}function gx(n){const e={},t=c(n,["parent"]);t!=null&&f(e,["_url","parent"],t);const r=c(n,["config"]);return r!=null&&mx(r,e),e}function yx(n){const e={},t=c(n,["sdkHttpResponse"]);t!=null&&f(e,["sdkHttpResponse"],t);const r=c(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(n,["documents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["documents"],a)}return e}class vx extends Jr{constructor(e){super(),this.apiClient=e,this.list=async t=>new No(qr.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:t.parent,config:r.config}),await this.listInternal(t),t)}async get(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=px(e);return a=ue("{name}",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(m=>m)}}async delete(e){var t,r;let i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=hx(e);i=ue("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=gx(e);return a=ue("{parent}/documents",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(m=>{const p=yx(m),y=new zC;return Object.assign(y,p),y})}}}class _x extends Jr{constructor(e,t=new vx(e)){super(),this.apiClient=e,this.documents=t,this.list=async(r={})=>new No(qr.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ak(e);return a=ue("fileSearchStores",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(m=>m)}}async get(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ck(e);return a=ue("{name}",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(m=>m)}}async delete(e){var t,r;let i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=uk(e);i=ue("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=gk(e);return a=ue("fileSearchStores",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(m=>{const p=yk(m),y=new $C;return Object.assign(y,p),y})}}async uploadToFileSearchStoreInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=vk(e);return a=ue("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(m=>{const p=_k(m),y=new WC;return Object.assign(y,p),y})}}async importFile(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=hk(e);return a=ue("{file_search_store_name}:importFile",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(m=>{const p=fk(m),y=new Qh;return Object.assign(y,p),y})}}}let gT=function(){const{crypto:n}=globalThis;if(n?.randomUUID)return gT=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^t()&15>>+r/4).toString(16))};const Ex=()=>gT();function vh(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const _h=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};class Cn extends Error{}class Xt extends Cn{constructor(e,t,r,i){super(`${Xt.makeMessage(e,t,r)}`),this.status=e,this.headers=i,this.error=t}static makeMessage(e,t,r){const i=t?.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,r,i){if(!e||!i)return new Yc({message:r,cause:_h(t)});const a=t;return e===400?new vT(e,a,r,i):e===401?new _T(e,a,r,i):e===403?new ET(e,a,r,i):e===404?new TT(e,a,r,i):e===409?new IT(e,a,r,i):e===422?new ST(e,a,r,i):e===429?new wT(e,a,r,i):e>=500?new CT(e,a,r,i):new Xt(e,a,r,i)}}class Eh extends Xt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Yc extends Xt{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class yT extends Yc{constructor({message:e}={}){super({message:e??"Request timed out."})}}class vT extends Xt{}class _T extends Xt{}class ET extends Xt{}class TT extends Xt{}class IT extends Xt{}class ST extends Xt{}class wT extends Xt{}class CT extends Xt{}const Tx=/^[a-z][a-z0-9+.-]*:/i,Ix=n=>Tx.test(n);let Th=n=>(Th=Array.isArray,Th(n));const Sx=Th;let wx=Sx;const Uv=wx;function Cx(n){if(!n)return!0;for(const e in n)return!1;return!0}function Ax(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const Rx=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Cn(`${n} must be an integer`);if(e<0)throw new Cn(`${n} must be a positive integer`);return e},Px=n=>{try{return JSON.parse(n)}catch{return}};const Nx=n=>new Promise(e=>setTimeout(e,n));const Es="0.0.1";function kx(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const xx=()=>{var n,e,t,r,i;const a=kx();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Es,"X-Stainless-OS":Ov(Deno.build.os),"X-Stainless-Arch":Fv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Es,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Es,"X-Stainless-OS":Ov((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":Fv((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const l=Mx();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Es,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Es,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Mx(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const r=t.exec(navigator.userAgent);if(r){const i=r[1]||0,a=r[2]||0,l=r[3]||0;return{browser:e,version:`${i}.${a}.${l}`}}}return null}const Fv=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",Ov=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Ju;const Dx=()=>Ju??(Ju=xx());function Lx(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function AT(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function Vx(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return AT({start(){},async pull(t){const{done:r,value:i}=await e.next();r?t.close():t.enqueue(i)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function RT(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t?.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function bx(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const r=n.getReader(),i=r.cancel();r.releaseLock(),await i}const Ux=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});const PT=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e?.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function $f(n,e,t){return PT(),new File(n,e??"unknown_file",t)}function Fx(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const Ox=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";const NT=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",Gx=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&NT(n),Bx=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function Hx(n,e,t){if(PT(),n=await n,Gx(n))return n instanceof File?n:$f([await n.arrayBuffer()],n.name);if(Bx(n)){const i=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),$f(await Ih(i),e,t)}const r=await Ih(n);if(e||(e=Fx(n)),!t?.type){const i=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof i=="string"&&(t=Object.assign(Object.assign({},t),{type:i}))}return $f(r,e,t)}async function Ih(n){var e,t,r,i,a;let l=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)l.push(n);else if(NT(n))l.push(n instanceof Blob?n:await n.arrayBuffer());else if(Ox(n))try{for(var d=!0,m=zn(n),p;p=await m.next(),e=p.done,!e;d=!0){i=p.value,d=!1;const y=i;l.push(...await Ih(y))}}catch(y){t={error:y}}finally{try{!d&&!e&&(r=m.return)&&await r.call(m)}finally{if(t)throw t.error}}else{const y=(a=n?.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${y?`; constructor: ${y}`:""}${qx(n)}`)}return l}function qx(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}class kT{constructor(e){this._client=e}}kT._key=[];function xT(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Gv=Object.freeze(Object.create(null)),zx=(n=xT)=>(function(t,...r){if(t.length===1)return t[0];let i=!1;const a=[],l=t.reduce((y,_,I)=>{var C,D,b;/[?#]/.test(_)&&(i=!0);const N=r[I];let B=(i?encodeURIComponent:n)(""+N);return I!==r.length&&(N==null||typeof N=="object"&&N.toString===((b=Object.getPrototypeOf((D=Object.getPrototypeOf((C=N.hasOwnProperty)!==null&&C!==void 0?C:Gv))!==null&&D!==void 0?D:Gv))===null||b===void 0?void 0:b.toString))&&(B=N+"",a.push({start:y.length+_.length,length:B.length,error:`Value of type ${Object.prototype.toString.call(N).slice(8,-1)} is not a valid path parameter`})),y+_+(I===r.length?"":B)},""),d=l.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=m.exec(d))!==null;)a.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(a.sort((y,_)=>y.start-_.start),a.length>0){let y=0;const _=a.reduce((I,C)=>{const D=" ".repeat(C.start-y),b="^".repeat(C.length);return y=C.start+C.length,I+D+b},"");throw new Cn(`Path parameters result in path with invalid segments:
${a.map(I=>I.error).join(`
`)}
${l}
${_}`)}return l}),Ku=zx(xT);class MT extends kT{create(e,t){var r;const{api_version:i=this._client.apiVersion}=e,a=wc(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Cn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Cn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Ku`/${i}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,t={},r){const{api_version:i=this._client.apiVersion}=t??{};return this._client.delete(Ku`/${i}/interactions/${e}`,r)}cancel(e,t={},r){const{api_version:i=this._client.apiVersion}=t??{};return this._client.post(Ku`/${i}/interactions/${e}/cancel`,r)}get(e,t={},r){var i;const a=t??{},{api_version:l=this._client.apiVersion}=a,d=wc(a,["api_version"]);return this._client.get(Ku`/${l}/interactions/${e}`,Object.assign(Object.assign({query:d},r),{stream:(i=t?.stream)!==null&&i!==void 0?i:!1}))}}MT._key=Object.freeze(["interactions"]);class DT extends MT{}function $x(n){let e=0;for(const i of n)e+=i.length;const t=new Uint8Array(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return t}let Yu;function rp(n){let e;return(Yu??(e=new globalThis.TextEncoder,Yu=e.encode.bind(e)))(n)}let Qu;function Bv(n){let e;return(Qu??(e=new globalThis.TextDecoder,Qu=e.decode.bind(e)))(n)}class Qc{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?rp(e):e;this.buffer=$x([this.buffer,t]);const r=[];let i;for(;(i=Wx(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(Bv(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,l=Bv(this.buffer.subarray(0,a));r.push(l),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Qc.NEWLINE_CHARS=new Set([`
`,"\r"]);Qc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Wx(n,e){for(let i=e??0;i<n.length;i++){if(n[i]===10)return{preceding:i,index:i+1,carriage:!1};if(n[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Jx(n){for(let r=0;r<n.length-1;r++){if(n[r]===10&&n[r+1]===10||n[r]===13&&n[r+1]===13)return r+2;if(n[r]===13&&n[r+1]===10&&r+3<n.length&&n[r+2]===13&&n[r+3]===10)return r+4}return-1}const Cc={off:0,error:200,warn:300,info:400,debug:500},Hv=(n,e,t)=>{if(n){if(Ax(Cc,n))return n;Qt(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Cc))}`)}};function ja(){}function Xu(n,e,t){return!e||Cc[n]>Cc[t]?ja:e[n].bind(e)}const Kx={error:ja,warn:ja,info:ja,debug:ja};let qv=new WeakMap;function Qt(n){var e;const t=n.logger,r=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return Kx;const i=qv.get(t);if(i&&i[0]===r)return i[1];const a={error:Xu("error",t,r),warn:Xu("warn",t,r),info:Xu("info",t,r),debug:Xu("debug",t,r)};return qv.set(t,[r,a]),a}const mo=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);class ws{constructor(e,t,r){this.iterator=e,this.controller=t,this.client=r}static fromSSEResponse(e,t,r){let i=!1;const a=r?Qt(r):console;function l(){return qn(this,arguments,function*(){var m,p,y,_;if(i)throw new Cn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let I=!1;try{try{for(var C=!0,D=zn(Yx(e,t)),b;b=yield we(D.next()),m=b.done,!m;C=!0){_=b.value,C=!1;const N=_;if(!I)if(N.data.startsWith("[DONE]")){I=!0;continue}else try{yield yield we(JSON.parse(N.data))}catch(B){throw a.error("Could not parse message into JSON:",N.data),a.error("From chunk:",N.raw),B}}}catch(N){p={error:N}}finally{try{!C&&!m&&(y=D.return)&&(yield we(y.call(D)))}finally{if(p)throw p.error}}I=!0}catch(N){if(vh(N))return yield we(void 0);throw N}finally{I||t.abort()}})}return new ws(l,t,r)}static fromReadableStream(e,t,r){let i=!1;function a(){return qn(this,arguments,function*(){var m,p,y,_;const I=new Qc,C=RT(e);try{for(var D=!0,b=zn(C),N;N=yield we(b.next()),m=N.done,!m;D=!0){_=N.value,D=!1;const B=_;for(const K of I.decode(B))yield yield we(K)}}catch(B){p={error:B}}finally{try{!D&&!m&&(y=b.return)&&(yield we(y.call(b)))}finally{if(p)throw p.error}}for(const B of I.flush())yield yield we(B)})}function l(){return qn(this,arguments,function*(){var m,p,y,_;if(i)throw new Cn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let I=!1;try{try{for(var C=!0,D=zn(a()),b;b=yield we(D.next()),m=b.done,!m;C=!0){_=b.value,C=!1;const N=_;I||N&&(yield yield we(JSON.parse(N)))}}catch(N){p={error:N}}finally{try{!C&&!m&&(y=D.return)&&(yield we(y.call(D)))}finally{if(p)throw p.error}}I=!0}catch(N){if(vh(N))return yield we(void 0);throw N}finally{I||t.abort()}})}return new ws(l,t,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),i=a=>({next:()=>{if(a.length===0){const l=r.next();e.push(l),t.push(l)}return a.shift()}});return[new ws(()=>i(e),this.controller,this.client),new ws(()=>i(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return AT({async start(){t=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:a}=await t.next();if(a)return r.close();const l=rp(JSON.stringify(i)+`
`);r.enqueue(l)}catch(i){r.error(i)}},async cancel(){var r;await((r=t.return)===null||r===void 0?void 0:r.call(t))}})}}function Yx(n,e){return qn(this,arguments,function*(){var r,i,a,l;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Cn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Cn("Attempted to iterate over a response with no body");const d=new Xx,m=new Qc,p=RT(n.body);try{for(var y=!0,_=zn(Qx(p)),I;I=yield we(_.next()),r=I.done,!r;y=!0){l=I.value,y=!1;const C=l;for(const D of m.decode(C)){const b=d.decode(D);b&&(yield yield we(b))}}}catch(C){i={error:C}}finally{try{!y&&!r&&(a=_.return)&&(yield we(a.call(_)))}finally{if(i)throw i.error}}for(const C of m.flush()){const D=d.decode(C);D&&(yield yield we(D))}})}function Qx(n){return qn(this,arguments,function*(){var t,r,i,a;let l=new Uint8Array;try{for(var d=!0,m=zn(n),p;p=yield we(m.next()),t=p.done,!t;d=!0){a=p.value,d=!1;const y=a;if(y==null)continue;const _=y instanceof ArrayBuffer?new Uint8Array(y):typeof y=="string"?rp(y):y;let I=new Uint8Array(l.length+_.length);I.set(l),I.set(_,l.length),l=I;let C;for(;(C=Jx(l))!==-1;)yield yield we(l.slice(0,C)),l=l.slice(C)}}catch(y){r={error:y}}finally{try{!d&&!t&&(i=m.return)&&(yield we(i.call(m)))}finally{if(r)throw r.error}}l.length>0&&(yield yield we(l))})}class Xx{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,i]=Zx(e,":");return i.startsWith(" ")&&(i=i.substring(1)),t==="event"?this.event=i:t==="data"&&this.data.push(i),null}}function Zx(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}async function jx(n,e){const{response:t,requestLogID:r,retryOfRequestLogID:i,startTime:a}=e,l=await(async()=>{var d;if(e.options.stream)return Qt(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):ws.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const m=t.headers.get("content-type"),p=(d=m?.split(";")[0])===null||d===void 0?void 0:d.trim();return p?.includes("application/json")||p?.endsWith("+json")?t.headers.get("content-length")==="0"?void 0:await t.json():await t.text()})();return Qt(n).debug(`[${r}] response parsed`,mo({retryOfRequestLogID:i,url:t.url,status:t.status,body:l,durationMs:Date.now()-a})),l}class ip extends Promise{constructor(e,t,r=jx){super(i=>{i(null)}),this.responsePromise=t,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new ip(this.client,this.responsePromise,async(t,r)=>e(await this.parseResponse(t,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}const LT=Symbol("brand.privateNullableHeaders");function*eM(n){if(!n)return;if(LT in n){const{values:r,nulls:i}=n;yield*r.entries();for(const a of i)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():Uv(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let r of t){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const a=Uv(r[1])?r[1]:[r[1]];let l=!1;for(const d of a)d!==void 0&&(e&&!l&&(l=!0,yield[i,null]),yield[i,d])}}const Qa=n=>{const e=new Headers,t=new Set;for(const r of n){const i=new Set;for(const[a,l]of eM(r)){const d=a.toLowerCase();i.has(d)||(e.delete(a),i.add(d)),l===null?(e.delete(a),t.add(d)):(e.append(a,l),t.delete(d))}}return{[LT]:!0,values:e,nulls:t}};const Wf=n=>{var e,t,r,i,a,l;if(typeof globalThis.process<"u")return(r=(t=(e=_C)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(l=(a=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||a===void 0?void 0:a.call(i,n))===null||l===void 0?void 0:l.trim()};var VT;class Xc{constructor(e){var t,r,i,a,l,d,m,{baseURL:p=Wf("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(t=Wf("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:_="v1beta"}=e,I=wc(e,["baseURL","apiKey","apiVersion"]);const C=Object.assign(Object.assign({apiKey:y,apiVersion:_},I),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=C.baseURL,this.timeout=(r=C.timeout)!==null&&r!==void 0?r:Xc.DEFAULT_TIMEOUT,this.logger=(i=C.logger)!==null&&i!==void 0?i:console;const D="warn";this.logLevel=D,this.logLevel=(l=(a=Hv(C.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:Hv(Wf("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:D,this.fetchOptions=C.fetchOptions,this.maxRetries=(d=C.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(m=C.fetch)!==null&&m!==void 0?m:Lx(),this.encoder=Ux,this._options=C,this.apiKey=y,this.apiVersion=_,this.clientAdapter=C.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Qa([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Qa([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Qa([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,r])=>typeof r<"u").map(([t,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(t)}=`;throw new Cn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Es}`}defaultIdempotencyKey(){return`stainless-node-retry-${Ex()}`}makeStatusError(e,t,r,i){return Xt.generate(e,t,r,i)}buildURL(e,t,r){const i=!this.baseURLOverridden()&&r||this.baseURL,a=Ix(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return Cx(l)||(t=Object.assign(Object.assign({},l),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:r}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:t},i)))}request(e,t=null){return new ip(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,r){var i,a,l;const d=await e,m=(i=d.maxRetries)!==null&&i!==void 0?i:this.maxRetries;t==null&&(t=m),await this.prepareOptions(d);const{req:p,url:y,timeout:_}=await this.buildRequest(d,{retryCount:m-t});await this.prepareRequest(p,{url:y,options:d});const I="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),C=r===void 0?"":`, retryOf: ${r}`,D=Date.now();if(Qt(this).debug(`[${I}] sending request`,mo({retryOfRequestLogID:r,method:d.method,url:y,options:d,headers:p.headers})),!((a=d.signal)===null||a===void 0)&&a.aborted)throw new Eh;const b=new AbortController,N=await this.fetchWithTimeout(y,p,_,b).catch(_h),B=Date.now();if(N instanceof globalThis.Error){const Y=`retrying, ${t} attempts remaining`;if(!((l=d.signal)===null||l===void 0)&&l.aborted)throw new Eh;const Q=vh(N)||/timed? ?out/i.test(String(N)+("cause"in N?String(N.cause):""));if(t)return Qt(this).info(`[${I}] connection ${Q?"timed out":"failed"} - ${Y}`),Qt(this).debug(`[${I}] connection ${Q?"timed out":"failed"} (${Y})`,mo({retryOfRequestLogID:r,url:y,durationMs:B-D,message:N.message})),this.retryRequest(d,t,r??I);throw Qt(this).info(`[${I}] connection ${Q?"timed out":"failed"} - error; no more retries left`),Qt(this).debug(`[${I}] connection ${Q?"timed out":"failed"} (error; no more retries left)`,mo({retryOfRequestLogID:r,url:y,durationMs:B-D,message:N.message})),Q?new yT:new Yc({cause:N})}const K=`[${I}${C}] ${p.method} ${y} ${N.ok?"succeeded":"failed"} with status ${N.status} in ${B-D}ms`;if(!N.ok){const Y=await this.shouldRetry(N);if(t&&Y){const P=`retrying, ${t} attempts remaining`;return await bx(N.body),Qt(this).info(`${K} - ${P}`),Qt(this).debug(`[${I}] response error (${P})`,mo({retryOfRequestLogID:r,url:N.url,status:N.status,headers:N.headers,durationMs:B-D})),this.retryRequest(d,t,r??I,N.headers)}const Q=Y?"error; no more retries left":"error; not retryable";Qt(this).info(`${K} - ${Q}`);const le=await N.text().catch(P=>_h(P).message),J=Px(le),M=J?void 0:le;throw Qt(this).debug(`[${I}] response error (${Q})`,mo({retryOfRequestLogID:r,url:N.url,status:N.status,headers:N.headers,message:M,durationMs:Date.now()-D})),this.makeStatusError(N.status,J,M,N.headers)}return Qt(this).info(K),Qt(this).debug(`[${I}] response start`,mo({retryOfRequestLogID:r,url:N.url,status:N.status,headers:N.headers,durationMs:B-D})),{response:N,options:d,controller:b,requestLogID:I,retryOfRequestLogID:r,startTime:D}}async fetchWithTimeout(e,t,r,i){const a=t||{},{signal:l,method:d}=a,m=wc(a,["signal","method"]),p=this._makeAbort(i);l&&l.addEventListener("abort",p,{once:!0});const y=setTimeout(p,r),_=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,I=Object.assign(Object.assign(Object.assign({signal:i.signal},_?{duplex:"half"}:{}),{method:"GET"}),m);d&&(I.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,I)}finally{clearTimeout(y)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,r,i){var a;let l;const d=i?.get("retry-after-ms");if(d){const p=parseFloat(d);Number.isNaN(p)||(l=p)}const m=i?.get("retry-after");if(m&&!l){const p=parseFloat(m);Number.isNaN(p)?l=Date.parse(m)-Date.now():l=p*1e3}if(!(l&&0<=l&&l<60*1e3)){const p=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(t,p)}return await Nx(l),this.makeRequest(e,t-1,r)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,l=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return l*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var r,i,a;const l=Object.assign({},e),{method:d,path:m,query:p,defaultBaseURL:y}=l,_=this.buildURL(m,p,y);"timeout"in l&&Rx("timeout",l.timeout),l.timeout=(r=l.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:I,body:C}=this.buildBody({options:l}),D=await this.buildHeaders({options:e,method:d,bodyHeaders:I,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:D},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&C instanceof globalThis.ReadableStream&&{duplex:"half"}),C&&{body:C}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(a=l.fetchOptions)!==null&&a!==void 0?a:{}),url:_,timeout:l.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:r,retryCount:i}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const l=await this.authHeaders(e);let d=Qa([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Dx()),this._options.defaultHeaders,r,e.headers,l]);return this.validateHeaders(d),d.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Qa([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Vx(e)}:typeof e=="object"&&r.values.get("content-type")==="application/x-www-form-urlencoded"?{bodyHeaders:{"content-type":"application/x-www-form-urlencoded"},body:this.stringifyQuery(e)}:this.encoder({body:e,headers:r})}}Xc.DEFAULT_TIMEOUT=6e4;class Pt extends Xc{constructor(){super(...arguments),this.interactions=new DT(this)}}VT=Pt;Pt.GeminiNextGenAPIClient=VT;Pt.GeminiNextGenAPIClientError=Cn;Pt.APIError=Xt;Pt.APIConnectionError=Yc;Pt.APIConnectionTimeoutError=yT;Pt.APIUserAbortError=Eh;Pt.NotFoundError=TT;Pt.ConflictError=IT;Pt.RateLimitError=wT;Pt.BadRequestError=vT;Pt.AuthenticationError=_T;Pt.InternalServerError=CT;Pt.PermissionDeniedError=ET;Pt.UnprocessableEntityError=ST;Pt.toFile=Hx;Pt.Interactions=DT;function tM(n,e){const t={},r=c(n,["name"]);return r!=null&&f(t,["_url","name"],r),t}function nM(n,e){const t={},r=c(n,["name"]);return r!=null&&f(t,["_url","name"],r),t}function rM(n,e){const t={},r=c(n,["sdkHttpResponse"]);return r!=null&&f(t,["sdkHttpResponse"],r),t}function iM(n,e){const t={},r=c(n,["sdkHttpResponse"]);return r!=null&&f(t,["sdkHttpResponse"],r),t}function oM(n,e,t){const r={};if(c(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=c(n,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&f(e,["displayName"],i),c(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=c(n,["epochCount"]);e!==void 0&&a!=null&&f(e,["tuningTask","hyperparameters","epochCount"],a);const l=c(n,["learningRateMultiplier"]);if(l!=null&&f(r,["tuningTask","hyperparameters","learningRateMultiplier"],l),c(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(c(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(c(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const d=c(n,["batchSize"]);e!==void 0&&d!=null&&f(e,["tuningTask","hyperparameters","batchSize"],d);const m=c(n,["learningRate"]);if(e!==void 0&&m!=null&&f(e,["tuningTask","hyperparameters","learningRate"],m),c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(c(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(c(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(c(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(c(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(c(n,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return r}function sM(n,e,t){const r={};let i=c(t,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const J=c(n,["validationDataset"]);e!==void 0&&J!=null&&f(e,["supervisedTuningSpec"],Jf(J))}else if(i==="PREFERENCE_TUNING"){const J=c(n,["validationDataset"]);e!==void 0&&J!=null&&f(e,["preferenceOptimizationSpec"],Jf(J))}else if(i==="DISTILLATION"){const J=c(n,["validationDataset"]);e!==void 0&&J!=null&&f(e,["distillationSpec"],Jf(J))}const a=c(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&f(e,["tunedModelDisplayName"],a);const l=c(n,["description"]);e!==void 0&&l!=null&&f(e,["description"],l);let d=c(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const J=c(n,["epochCount"]);e!==void 0&&J!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],J)}else if(d==="PREFERENCE_TUNING"){const J=c(n,["epochCount"]);e!==void 0&&J!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],J)}else if(d==="DISTILLATION"){const J=c(n,["epochCount"]);e!==void 0&&J!=null&&f(e,["distillationSpec","hyperParameters","epochCount"],J)}let m=c(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const J=c(n,["learningRateMultiplier"]);e!==void 0&&J!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],J)}else if(m==="PREFERENCE_TUNING"){const J=c(n,["learningRateMultiplier"]);e!==void 0&&J!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],J)}else if(m==="DISTILLATION"){const J=c(n,["learningRateMultiplier"]);e!==void 0&&J!=null&&f(e,["distillationSpec","hyperParameters","learningRateMultiplier"],J)}let p=c(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const J=c(n,["exportLastCheckpointOnly"]);e!==void 0&&J!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],J)}else if(p==="PREFERENCE_TUNING"){const J=c(n,["exportLastCheckpointOnly"]);e!==void 0&&J!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],J)}else if(p==="DISTILLATION"){const J=c(n,["exportLastCheckpointOnly"]);e!==void 0&&J!=null&&f(e,["distillationSpec","exportLastCheckpointOnly"],J)}let y=c(t,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const J=c(n,["adapterSize"]);e!==void 0&&J!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],J)}else if(y==="PREFERENCE_TUNING"){const J=c(n,["adapterSize"]);e!==void 0&&J!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],J)}else if(y==="DISTILLATION"){const J=c(n,["adapterSize"]);e!==void 0&&J!=null&&f(e,["distillationSpec","hyperParameters","adapterSize"],J)}let _=c(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const J=c(n,["tuningMode"]);e!==void 0&&J!=null&&f(e,["supervisedTuningSpec","tuningMode"],J)}const I=c(n,["customBaseModel"]);e!==void 0&&I!=null&&f(e,["customBaseModel"],I);let C=c(t,["config","method"]);if(C===void 0&&(C="SUPERVISED_FINE_TUNING"),C==="SUPERVISED_FINE_TUNING"){const J=c(n,["batchSize"]);e!==void 0&&J!=null&&f(e,["supervisedTuningSpec","hyperParameters","batchSize"],J)}let D=c(t,["config","method"]);if(D===void 0&&(D="SUPERVISED_FINE_TUNING"),D==="SUPERVISED_FINE_TUNING"){const J=c(n,["learningRate"]);e!==void 0&&J!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRate"],J)}const b=c(n,["labels"]);e!==void 0&&b!=null&&f(e,["labels"],b);const N=c(n,["beta"]);e!==void 0&&N!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],N);const B=c(n,["baseTeacherModel"]);e!==void 0&&B!=null&&f(e,["distillationSpec","baseTeacherModel"],B);const K=c(n,["tunedTeacherModelSource"]);e!==void 0&&K!=null&&f(e,["distillationSpec","tunedTeacherModelSource"],K);const Y=c(n,["sftLossWeightMultiplier"]);e!==void 0&&Y!=null&&f(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],Y);const Q=c(n,["outputUri"]);e!==void 0&&Q!=null&&f(e,["outputUri"],Q);const le=c(n,["encryptionSpec"]);return e!==void 0&&le!=null&&f(e,["encryptionSpec"],le),r}function aM(n,e){const t={},r=c(n,["baseModel"]);r!=null&&f(t,["baseModel"],r);const i=c(n,["preTunedModel"]);i!=null&&f(t,["preTunedModel"],i);const a=c(n,["trainingDataset"]);a!=null&&vM(a);const l=c(n,["config"]);return l!=null&&oM(l,t),t}function lM(n,e){const t={},r=c(n,["baseModel"]);r!=null&&f(t,["baseModel"],r);const i=c(n,["preTunedModel"]);i!=null&&f(t,["preTunedModel"],i);const a=c(n,["trainingDataset"]);a!=null&&_M(a,t,e);const l=c(n,["config"]);return l!=null&&sM(l,t,e),t}function uM(n,e){const t={},r=c(n,["name"]);return r!=null&&f(t,["_url","name"],r),t}function cM(n,e){const t={},r=c(n,["name"]);return r!=null&&f(t,["_url","name"],r),t}function dM(n,e,t){const r={},i=c(n,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const a=c(n,["pageToken"]);e!==void 0&&a!=null&&f(e,["_query","pageToken"],a);const l=c(n,["filter"]);return e!==void 0&&l!=null&&f(e,["_query","filter"],l),r}function fM(n,e,t){const r={},i=c(n,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const a=c(n,["pageToken"]);e!==void 0&&a!=null&&f(e,["_query","pageToken"],a);const l=c(n,["filter"]);return e!==void 0&&l!=null&&f(e,["_query","filter"],l),r}function hM(n,e){const t={},r=c(n,["config"]);return r!=null&&dM(r,t),t}function pM(n,e){const t={},r=c(n,["config"]);return r!=null&&fM(r,t),t}function mM(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const i=c(n,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const a=c(n,["tunedModels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>bT(d))),f(t,["tuningJobs"],l)}return t}function gM(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const i=c(n,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const a=c(n,["tuningJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>Sh(d))),f(t,["tuningJobs"],l)}return t}function yM(n,e){const t={},r=c(n,["name"]);r!=null&&f(t,["model"],r);const i=c(n,["name"]);return i!=null&&f(t,["endpoint"],i),t}function vM(n,e){const t={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=c(n,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),f(t,["examples","examples"],i)}return t}function _M(n,e,t){const r={};let i=c(t,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const l=c(n,["gcsUri"]);e!==void 0&&l!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(i==="PREFERENCE_TUNING"){const l=c(n,["gcsUri"]);e!==void 0&&l!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}else if(i==="DISTILLATION"){const l=c(n,["gcsUri"]);e!==void 0&&l!=null&&f(e,["distillationSpec","promptDatasetUri"],l)}let a=c(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=c(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=c(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}else if(a==="DISTILLATION"){const l=c(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&f(e,["distillationSpec","promptDatasetUri"],l)}if(c(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function bT(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const i=c(n,["name"]);i!=null&&f(t,["name"],i);const a=c(n,["state"]);a!=null&&f(t,["state"],ZE(a));const l=c(n,["createTime"]);l!=null&&f(t,["createTime"],l);const d=c(n,["tuningTask","startTime"]);d!=null&&f(t,["startTime"],d);const m=c(n,["tuningTask","completeTime"]);m!=null&&f(t,["endTime"],m);const p=c(n,["updateTime"]);p!=null&&f(t,["updateTime"],p);const y=c(n,["description"]);y!=null&&f(t,["description"],y);const _=c(n,["baseModel"]);_!=null&&f(t,["baseModel"],_);const I=c(n,["_self"]);return I!=null&&f(t,["tunedModel"],yM(I)),t}function Sh(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const i=c(n,["name"]);i!=null&&f(t,["name"],i);const a=c(n,["state"]);a!=null&&f(t,["state"],ZE(a));const l=c(n,["createTime"]);l!=null&&f(t,["createTime"],l);const d=c(n,["startTime"]);d!=null&&f(t,["startTime"],d);const m=c(n,["endTime"]);m!=null&&f(t,["endTime"],m);const p=c(n,["updateTime"]);p!=null&&f(t,["updateTime"],p);const y=c(n,["error"]);y!=null&&f(t,["error"],y);const _=c(n,["description"]);_!=null&&f(t,["description"],_);const I=c(n,["baseModel"]);I!=null&&f(t,["baseModel"],I);const C=c(n,["tunedModel"]);C!=null&&f(t,["tunedModel"],C);const D=c(n,["preTunedModel"]);D!=null&&f(t,["preTunedModel"],D);const b=c(n,["supervisedTuningSpec"]);b!=null&&f(t,["supervisedTuningSpec"],b);const N=c(n,["preferenceOptimizationSpec"]);N!=null&&f(t,["preferenceOptimizationSpec"],N);const B=c(n,["distillationSpec"]);B!=null&&f(t,["distillationSpec"],B);const K=c(n,["tuningDataStats"]);K!=null&&f(t,["tuningDataStats"],K);const Y=c(n,["encryptionSpec"]);Y!=null&&f(t,["encryptionSpec"],Y);const Q=c(n,["partnerModelTuningSpec"]);Q!=null&&f(t,["partnerModelTuningSpec"],Q);const le=c(n,["customBaseModel"]);le!=null&&f(t,["customBaseModel"],le);const J=c(n,["experiment"]);J!=null&&f(t,["experiment"],J);const M=c(n,["labels"]);M!=null&&f(t,["labels"],M);const R=c(n,["outputUri"]);R!=null&&f(t,["outputUri"],R);const P=c(n,["pipelineJob"]);P!=null&&f(t,["pipelineJob"],P);const L=c(n,["serviceAccount"]);L!=null&&f(t,["serviceAccount"],L);const V=c(n,["tunedModelDisplayName"]);V!=null&&f(t,["tunedModelDisplayName"],V);const F=c(n,["veoTuningSpec"]);return F!=null&&f(t,["veoTuningSpec"],F),t}function EM(n,e){const t={},r=c(n,["sdkHttpResponse"]);r!=null&&f(t,["sdkHttpResponse"],r);const i=c(n,["name"]);i!=null&&f(t,["name"],i);const a=c(n,["metadata"]);a!=null&&f(t,["metadata"],a);const l=c(n,["done"]);l!=null&&f(t,["done"],l);const d=c(n,["error"]);return d!=null&&f(t,["error"],d),t}function Jf(n,e){const t={},r=c(n,["gcsUri"]);r!=null&&f(t,["validationDatasetUri"],r);const i=c(n,["vertexDatasetResource"]);return i!=null&&f(t,["validationDatasetUri"],i),t}class TM extends Jr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new No(qr.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var r;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const i={tunedModelName:t.baseModel};!((r=t.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:i});return a.baseModel=void 0,await this.tuneInternal(a)}else{const i=Object.assign({},t);return await this.tuneInternal(i)}else{const i=Object.assign({},t),a=await this.tuneMldevInternal(i);let l="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?l=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(l=a.name.split("/operations/")[0]),{name:l,state:ch.JOB_STATE_QUEUED}}}}async getInternal(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=cM(e);return d=ue("{name}",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>Sh(y))}else{const p=uM(e);return d=ue("{name}",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>bT(y))}}async listInternal(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=pM(e);return d=ue("tuningJobs",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const _=gM(y),I=new gv;return Object.assign(I,_),I})}else{const p=hM(e);return d=ue("tunedModels",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const _=mM(y),I=new gv;return Object.assign(I,_),I})}}async cancel(e){var t,r,i,a;let l,d="",m={};if(this.apiClient.isVertexAI()){const p=nM(e);return d=ue("{name}:cancel",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const _=iM(y),I=new yv;return Object.assign(I,_),I})}else{const p=tM(e);return d=ue("{name}:cancel",p._url),m=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(_=>{const I=_;return I.sdkHttpResponse={headers:y.headers},I})),l.then(y=>{const _=rM(y),I=new yv;return Object.assign(I,_),I})}}async tuneInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const d=lM(e,e);return a=ue("tuningJobs",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),i.then(m=>Sh(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=aM(e);return a=ue("tunedModels",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),i.then(m=>EM(m))}}}class IM{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const SM=1024*1024*8,wM=3,CM=1e3,AM=2,Ac="x-goog-upload-status";async function RM(n,e,t){var r;const i=await UT(n,e,t),a=await i?.json();if(((r=i?.headers)===null||r===void 0?void 0:r[Ac])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function PM(n,e,t){var r;const i=await UT(n,e,t),a=await i?.json();if(((r=i?.headers)===null||r===void 0?void 0:r[Ac])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=WE(a),d=new Xh;return Object.assign(d,l),d}async function UT(n,e,t){var r,i;let a=0,l=0,d=new fh(new Response),m="upload";for(a=n.size;l<a;){const p=Math.min(SM,a-l),y=n.slice(l,l+p);l+p>=a&&(m+=", finalize");let _=0,I=CM;for(;_<wM&&(d=await t.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(l),"Content-Length":String(p)}}}),!(!((r=d?.headers)===null||r===void 0)&&r[Ac]));)_++,await kM(I),I=I*AM;if(l+=p,((i=d?.headers)===null||i===void 0?void 0:i[Ac])!=="active")break;if(a<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function NM(n){return{size:n.size,type:n.type}}function kM(n){return new Promise(e=>setTimeout(e,n))}class xM{async upload(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await RM(e,t,r)}async uploadToFileSearchStore(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await PM(e,t,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await NM(e)}}class MM{create(e,t,r){return new DM(e,t,r)}}class DM{constructor(e,t,r){this.url=e,this.headers=t,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const zv="x-goog-api-key";class LM{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(zv)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(zv,this.apiKey)}}}const VM="gl-node/";class bM{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const r=new Pt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t?.timeout,maxRetries:(e=t?.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=r.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const r=SC(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new LM(this.apiKey);this.apiClient=new Nk({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:VM+"web",uploader:new xM,downloader:new IM}),this.models=new Kk(this.apiClient),this.live=new Hk(this.apiClient,i,new MM),this.batches=new eR(this.apiClient),this.chats=new VR(this.models,this.apiClient),this.caches=new MR(this.apiClient),this.files=new JR(this.apiClient),this.operations=new Yk(this.apiClient),this.authTokens=new dx(this.apiClient),this.tunings=new TM(this.apiClient),this.fileSearchStores=new _x(this.apiClient)}}const UM=new bM({apiKey:"AIzaSyCCC5zuwaPNAPcp20QyZ_KevgLrnKIjFE4"}),FM=`
You are the "JobFit Analyzer" evaluating LinkedIn profiles for the 2026 tech market.

Your goal is to compute the Job Fit Score (S_JF) based on the formula:
S_JF = alpha * S_core + \beta * S_adj

Weighting heuristics:
- \\alpha (Core Technical Weight): 0.70
- \\beta (Adjacency Bonus Weight): 0.30

Target 2026 Niches & Core Requirements:
1. AI/ML: Focus on MLOps, LLM Fine-tuning, and Mathematical foundations.
2. Cybersecurity: Focus on Zero Trust and Cloud-native security.
3. AI Ethics: Focus on Bias Mitigation and AI Governance.

Instructions:
1. Evaluate the profile strictly against the specified target niche.
2. If given a multimodal input (image or video description), use it to visually verify skills or certifications.
3. Assign a core score (S_core) out of 100 based on the presence and depth of the target niche requirements.
4. Assign an adjacency score (S_adj) out of 100 based on complementary skills (e.g., a software engineer showing cloud experience).
5. Output the result mathematically as overall_score: (0.70 * S_core) + (0.30 * S_adj).
`;async function OM(n,e=[]){const{candidate:t,targetNiche:r}=n,i=[{text:`Target Niche: ${r}`},{text:`Profile JSON Data: ${JSON.stringify(t)}`}];e.forEach(a=>{const l=a.match(/^data:(image\/[a-z]+);base64,(.+)$/);l&&i.push({inlineData:{mimeType:l[1],data:l[2]}})});try{const l=(await UM.models.generateContent({model:"gemini-3.1-pro",contents:i,config:{systemInstruction:FM,temperature:.1,responseMimeType:"application/json",responseSchema:{type:Tt.OBJECT,properties:{overall_score:{type:Tt.NUMBER,description:"The final S_JF value (0-100)"},coreScore:{type:Tt.NUMBER,description:"The S_core value (0-100)"},adjScore:{type:Tt.NUMBER,description:"The S_adj value (0-100)"},skill_breakdown:{type:Tt.ARRAY,items:{type:Tt.OBJECT,properties:{skill:{type:Tt.STRING},score:{type:Tt.NUMBER}}}},gap_analysis:{type:Tt.STRING,description:"What the user is missing for the target role"},action_plan:{type:Tt.ARRAY,items:{type:Tt.STRING},description:"3 immediate actionable steps to improve the score"}},required:["overall_score","coreScore","adjScore","skill_breakdown","gap_analysis","action_plan"]}}})).text;if(!l)throw new Error("Empty response from AI");const d=JSON.parse(l);return{score:d.overall_score,coreScore:d.coreScore,adjScore:d.adjScore,alpha:.7,beta:.3,analysis:`Gap: ${d.gap_analysis}

Action Plan:
 - ${d.action_plan.join(`
 - `)}`,skillBreakdown:d.skill_breakdown}}catch(a){throw console.error("Gemini Analysis Failed:",a),a}}const GM=()=>{};var $v={};const FT=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},BM=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],l=n[t++],d=n[t++],m=((i&7)<<18|(a&63)<<12|(l&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const a=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},OT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],l=i+1<n.length,d=l?n[i+1]:0,m=i+2<n.length,p=m?n[i+2]:0,y=a>>2,_=(a&3)<<4|d>>4;let I=(d&15)<<2|p>>6,C=p&63;m||(C=64,l||(I=64)),r.push(t[y],t[_],t[I],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(FT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):BM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],d=i<n.length?t[n.charAt(i)]:0;++i;const p=i<n.length?t[n.charAt(i)]:64;++i;const _=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||d==null||p==null||_==null)throw new HM;const I=a<<2|d>>4;if(r.push(I),p!==64){const C=d<<4&240|p>>2;if(r.push(C),_!==64){const D=p<<6&192|_;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class HM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qM=function(n){const e=FT(n);return OT.encodeByteArray(e,!0)},Rc=function(n){return qM(n).replace(/\./g,"")},GT=function(n){try{return OT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function zM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const $M=()=>zM().__FIREBASE_DEFAULTS__,WM=()=>{if(typeof process>"u"||typeof $v>"u")return;const n=$v.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},JM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&GT(n[1]);return e&&JSON.parse(e)},Zc=()=>{try{return GM()||$M()||WM()||JM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},BT=n=>Zc()?.emulatorHosts?.[n],KM=n=>{const e=BT(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},HT=()=>Zc()?.config,qT=n=>Zc()?.[`_${n}`];class YM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Ws(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zT(n){return(await fetch(n,{credentials:"include"})).ok}function QM(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Rc(JSON.stringify(t)),Rc(JSON.stringify(l)),""].join(".")}const tl={};function XM(){const n={prod:[],emulator:[]};for(const e of Object.keys(tl))tl[e]?n.emulator.push(e):n.prod.push(e);return n}function ZM(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Wv=!1;function $T(n,e){if(typeof window>"u"||typeof document>"u"||!Ws(window.location.host)||tl[n]===e||tl[n]||Wv)return;tl[n]=e;function t(I){return`__firebase__banner__${I}`}const r="__firebase__banner",a=XM().prod.length>0;function l(){const I=document.getElementById(r);I&&I.remove()}function d(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function m(I,C){I.setAttribute("width","24"),I.setAttribute("id",C),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function p(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{Wv=!0,l()},I}function y(I,C){I.setAttribute("id",C),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function _(){const I=ZM(r),C=t("text"),D=document.getElementById(C)||document.createElement("span"),b=t("learnmore"),N=document.getElementById(b)||document.createElement("a"),B=t("preprendIcon"),K=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const Y=I.element;d(Y),y(N,b);const Q=p();m(K,B),Y.append(K,D,N,Q),document.body.appendChild(Y)}a?(D.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function e1(){const n=Zc()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function t1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function n1(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function r1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function i1(){const n=Wt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function o1(){return!e1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function s1(){try{return typeof indexedDB=="object"}catch{return!1}}function a1(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const l1="FirebaseError";class Yr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=l1,Object.setPrototypeOf(this,Yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_l.prototype.create)}}class _l{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?u1(a,r):"Error",d=`${this.serviceName}: ${l} (${i}).`;return new Yr(i,d,r)}}function u1(n,e){return n.replace(c1,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const c1=/\{\$([^}]+)}/g;function d1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Io(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],l=e[i];if(Jv(a)&&Jv(l)){if(!Io(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Jv(n){return n!==null&&typeof n=="object"}function El(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function f1(n,e){const t=new h1(n,e);return t.subscribe.bind(t)}class h1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");p1(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Kf),i.error===void 0&&(i.error=Kf),i.complete===void 0&&(i.complete=Kf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function p1(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Kf(){}function An(n){return n&&n._delegate?n._delegate:n}class So{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const go="[DEFAULT]";class m1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new YM;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(y1(e))try{this.getOrInitializeService({instanceIdentifier:go})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=go){return this.instances.has(e)}getOptions(e=go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&l.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:g1(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=go){return this.component?this.component.multipleInstances?e:go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function g1(n){return n===go?void 0:n}function y1(n){return n.instantiationMode==="EAGER"}class v1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new m1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const _1={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},E1=Le.INFO,T1={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},I1=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=T1[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class op{constructor(e){this.name=e,this._logLevel=E1,this._logHandler=I1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const S1=(n,e)=>e.some(t=>n instanceof t);let Kv,Yv;function w1(){return Kv||(Kv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function C1(){return Yv||(Yv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WT=new WeakMap,wh=new WeakMap,JT=new WeakMap,Yf=new WeakMap,sp=new WeakMap;function A1(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Mi(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&WT.set(t,n)}).catch(()=>{}),sp.set(e,n),e}function R1(n){if(wh.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});wh.set(n,e)}let Ch={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return wh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||JT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Mi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function P1(n){Ch=n(Ch)}function N1(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Qf(this),e,...t);return JT.set(r,e.sort?e.sort():[e]),Mi(r)}:C1().includes(n)?function(...e){return n.apply(Qf(this),e),Mi(WT.get(this))}:function(...e){return Mi(n.apply(Qf(this),e))}}function k1(n){return typeof n=="function"?N1(n):(n instanceof IDBTransaction&&R1(n),S1(n,w1())?new Proxy(n,Ch):n)}function Mi(n){if(n instanceof IDBRequest)return A1(n);if(Yf.has(n))return Yf.get(n);const e=k1(n);return e!==n&&(Yf.set(n,e),sp.set(e,n)),e}const Qf=n=>sp.get(n);function x1(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(n,e),d=Mi(l);return r&&l.addEventListener("upgradeneeded",m=>{r(Mi(l.result),m.oldVersion,m.newVersion,Mi(l.transaction),m)}),t&&l.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{a&&m.addEventListener("close",()=>a()),i&&m.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const M1=["get","getKey","getAll","getAllKeys","count"],D1=["put","add","delete","clear"],Xf=new Map;function Qv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Xf.get(e))return Xf.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=D1.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||M1.includes(t)))return;const a=async function(l,...d){const m=this.transaction(l,i?"readwrite":"readonly");let p=m.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),i&&m.done]))[0]};return Xf.set(e,a),a}P1(n=>({...n,get:(e,t,r)=>Qv(e,t)||n.get(e,t,r),has:(e,t)=>!!Qv(e,t)||n.has(e,t)}));class L1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(V1(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function V1(n){return n.getComponent()?.type==="VERSION"}const Ah="@firebase/app",Xv="0.14.8";const zr=new op("@firebase/app"),b1="@firebase/app-compat",U1="@firebase/analytics-compat",F1="@firebase/analytics",O1="@firebase/app-check-compat",G1="@firebase/app-check",B1="@firebase/auth",H1="@firebase/auth-compat",q1="@firebase/database",z1="@firebase/data-connect",$1="@firebase/database-compat",W1="@firebase/functions",J1="@firebase/functions-compat",K1="@firebase/installations",Y1="@firebase/installations-compat",Q1="@firebase/messaging",X1="@firebase/messaging-compat",Z1="@firebase/performance",j1="@firebase/performance-compat",eD="@firebase/remote-config",tD="@firebase/remote-config-compat",nD="@firebase/storage",rD="@firebase/storage-compat",iD="@firebase/firestore",oD="@firebase/ai",sD="@firebase/firestore-compat",aD="firebase",lD="12.9.0";const Rh="[DEFAULT]",uD={[Ah]:"fire-core",[b1]:"fire-core-compat",[F1]:"fire-analytics",[U1]:"fire-analytics-compat",[G1]:"fire-app-check",[O1]:"fire-app-check-compat",[B1]:"fire-auth",[H1]:"fire-auth-compat",[q1]:"fire-rtdb",[z1]:"fire-data-connect",[$1]:"fire-rtdb-compat",[W1]:"fire-fn",[J1]:"fire-fn-compat",[K1]:"fire-iid",[Y1]:"fire-iid-compat",[Q1]:"fire-fcm",[X1]:"fire-fcm-compat",[Z1]:"fire-perf",[j1]:"fire-perf-compat",[eD]:"fire-rc",[tD]:"fire-rc-compat",[nD]:"fire-gcs",[rD]:"fire-gcs-compat",[iD]:"fire-fst",[sD]:"fire-fst-compat",[oD]:"fire-vertex","fire-js":"fire-js",[aD]:"fire-js-all"};const Pc=new Map,cD=new Map,Ph=new Map;function Zv(n,e){try{n.container.addComponent(e)}catch(t){zr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ls(n){const e=n.name;if(Ph.has(e))return zr.debug(`There were multiple attempts to register component ${e}.`),!1;Ph.set(e,n);for(const t of Pc.values())Zv(t,n);for(const t of cD.values())Zv(t,n);return!0}function ap(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Fn(n){return n==null?!1:n.settings!==void 0}const dD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Di=new _l("app","Firebase",dD);class fD{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new So("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Di.create("app-deleted",{appName:this._name})}}const Js=lD;function KT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Rh,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Di.create("bad-app-name",{appName:String(i)});if(t||(t=HT()),!t)throw Di.create("no-options");const a=Pc.get(i);if(a){if(Io(t,a.options)&&Io(r,a.config))return a;throw Di.create("duplicate-app",{appName:i})}const l=new v1(i);for(const m of Ph.values())l.addComponent(m);const d=new fD(t,r,l);return Pc.set(i,d),d}function YT(n=Rh){const e=Pc.get(n);if(!e&&n===Rh&&HT())return KT();if(!e)throw Di.create("no-app",{appName:n});return e}function Li(n,e,t){let r=uD[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zr.warn(l.join(" "));return}Ls(new So(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const hD="firebase-heartbeat-database",pD=1,ul="firebase-heartbeat-store";let Zf=null;function QT(){return Zf||(Zf=x1(hD,pD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ul)}catch(t){console.warn(t)}}}}).catch(n=>{throw Di.create("idb-open",{originalErrorMessage:n.message})})),Zf}async function mD(n){try{const t=(await QT()).transaction(ul),r=await t.objectStore(ul).get(XT(n));return await t.done,r}catch(e){if(e instanceof Yr)zr.warn(e.message);else{const t=Di.create("idb-get",{originalErrorMessage:e?.message});zr.warn(t.message)}}}async function jv(n,e){try{const r=(await QT()).transaction(ul,"readwrite");await r.objectStore(ul).put(e,XT(n)),await r.done}catch(t){if(t instanceof Yr)zr.warn(t.message);else{const r=Di.create("idb-set",{originalErrorMessage:t?.message});zr.warn(r.message)}}}function XT(n){return`${n.name}!${n.options.appId}`}const gD=1024,yD=30;class vD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ED(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=e_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>yD){const i=TD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){zr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=e_(),{heartbeatsToSend:t,unsentEntries:r}=_D(this._heartbeatsCache.heartbeats),i=Rc(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return zr.warn(e),""}}}function e_(){return new Date().toISOString().substring(0,10)}function _D(n,e=gD){const t=[];let r=n.slice();for(const i of n){const a=t.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),t_(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),t_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class ED{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return s1()?a1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await mD(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return jv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return jv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function t_(n){return Rc(JSON.stringify({version:2,heartbeats:n})).length}function TD(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function ID(n){Ls(new So("platform-logger",e=>new L1(e),"PRIVATE")),Ls(new So("heartbeat",e=>new vD(e),"PRIVATE")),Li(Ah,Xv,n),Li(Ah,Xv,"esm2020"),Li("fire-js","")}ID("");var SD="firebase",wD="12.9.0";Li(SD,wD,"app");function ZT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CD=ZT,jT=new _l("auth","Firebase",ZT());const Nc=new op("@firebase/auth");function AD(n,...e){Nc.logLevel<=Le.WARN&&Nc.warn(`Auth (${Js}): ${n}`,...e)}function uc(n,...e){Nc.logLevel<=Le.ERROR&&Nc.error(`Auth (${Js}): ${n}`,...e)}function pr(n,...e){throw up(n,...e)}function $n(n,...e){return up(n,...e)}function lp(n,e,t){const r={...CD(),[e]:t};return new _l("auth","Firebase",r).create(e,{appName:n.name})}function _o(n){return lp(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function RD(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&pr(n,"argument-error"),lp(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function up(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return jT.create(n,...e)}function Se(n,e,...t){if(!n)throw up(e,...t)}function Fr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw uc(e),new Error(e)}function $r(n,e){n||Fr(e)}function Nh(){return typeof self<"u"&&self.location?.href||""}function PD(){return n_()==="http:"||n_()==="https:"}function n_(){return typeof self<"u"&&self.location?.protocol||null}function ND(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PD()||n1()||"connection"in navigator)?navigator.onLine:!0}function kD(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Tl{constructor(e,t){this.shortDelay=e,this.longDelay=t,$r(t>e,"Short delay should be less than long delay!"),this.isMobile=jM()||r1()}get(){return ND()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function cp(n,e){$r(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class e0{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const xD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const MD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DD=new Tl(3e4,6e4);function dp(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ks(n,e,t,r,i={}){return t0(n,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const d=El({key:n.config.apiKey,...l}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:m,...a};return t1()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Ws(n.emulatorConfig.host)&&(p.credentials="include"),e0.fetch()(await n0(n,n.config.apiHost,t,d),p)})}async function t0(n,e,t){n._canInitEmulator=!1;const r={...xD,...e};try{const i=new VD(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Zu(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const d=a.ok?l.errorMessage:l.error.message,[m,p]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zu(n,"credential-already-in-use",l);if(m==="EMAIL_EXISTS")throw Zu(n,"email-already-in-use",l);if(m==="USER_DISABLED")throw Zu(n,"user-disabled",l);const y=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw lp(n,y,p);pr(n,y)}}catch(i){if(i instanceof Yr)throw i;pr(n,"network-request-failed",{message:String(i)})}}async function LD(n,e,t,r,i={}){const a=await Ks(n,e,t,r,i);return"mfaPendingCredential"in a&&pr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function n0(n,e,t,r){const i=`${e}${t}?${r}`,a=n,l=a.config.emulator?cp(n.config,i):`${n.config.apiScheme}://${i}`;return MD.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}class VD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r($n(this.auth,"network-request-failed")),DD.get())})}}function Zu(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=$n(n,e,r);return i.customData._tokenResponse=t,i}async function bD(n,e){return Ks(n,"POST","/v1/accounts:delete",e)}async function kc(n,e){return Ks(n,"POST","/v1/accounts:lookup",e)}function nl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function UD(n,e=!1){const t=An(n),r=await t.getIdToken(e),i=fp(r);Se(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a?.sign_in_provider;return{claims:i,token:r,authTime:nl(jf(i.auth_time)),issuedAtTime:nl(jf(i.iat)),expirationTime:nl(jf(i.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function jf(n){return Number(n)*1e3}function fp(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return uc("JWT malformed, contained fewer than 3 sections"),null;try{const i=GT(t);return i?JSON.parse(i):(uc("Failed to decode base64 JWT payload"),null)}catch(i){return uc("Caught error parsing JWT payload as JSON",i?.toString()),null}}function r_(n){const e=fp(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function cl(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Yr&&FD(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function FD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class OD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class kh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nl(this.lastLoginAt),this.creationTime=nl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function xc(n){const e=n.auth,t=await n.getIdToken(),r=await cl(n,kc(e,{idToken:t}));Se(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=i.providerUserInfo?.length?r0(i.providerUserInfo):[],l=BD(n.providerData,a),d=n.isAnonymous,m=!(n.email&&i.passwordHash)&&!l?.length,p=d?m:!1,y={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new kh(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(n,y)}async function GD(n){const e=An(n);await xc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BD(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function r0(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function HD(n,e){const t=await t0(n,{},async()=>{const r=El({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,l=await n0(n,i,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:r};return n.emulatorConfig&&Ws(n.emulatorConfig.host)&&(m.credentials="include"),e0.fetch()(l,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function qD(n,e){return Ks(n,"POST","/v2/accounts:revokeToken",dp(n,e))}class Ps{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):r_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=r_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await HD(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,l=new Ps;return r&&(Se(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Se(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(Se(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ps,this.toJSON())}_performRefresh(){return Fr("not implemented")}}function Pi(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Bn{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new OD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new kh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await cl(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return UD(this,e)}reload(){return GD(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Bn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await xc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fn(this.auth.app))return Promise.reject(_o(this.auth));const e=await this.getIdToken();return await cl(this,bD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,p=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:_,emailVerified:I,isAnonymous:C,providerData:D,stsTokenManager:b}=t;Se(_&&b,e,"internal-error");const N=Ps.fromJSON(this.name,b);Se(typeof _=="string",e,"internal-error"),Pi(r,e.name),Pi(i,e.name),Se(typeof I=="boolean",e,"internal-error"),Se(typeof C=="boolean",e,"internal-error"),Pi(a,e.name),Pi(l,e.name),Pi(d,e.name),Pi(m,e.name),Pi(p,e.name),Pi(y,e.name);const B=new Bn({uid:_,auth:e,email:i,emailVerified:I,displayName:r,isAnonymous:C,photoURL:l,phoneNumber:a,tenantId:d,stsTokenManager:N,createdAt:p,lastLoginAt:y});return D&&Array.isArray(D)&&(B.providerData=D.map(K=>({...K}))),m&&(B._redirectEventId=m),B}static async _fromIdTokenResponse(e,t,r=!1){const i=new Ps;i.updateFromServerResponse(t);const a=new Bn({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await xc(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Se(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?r0(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!a?.length,d=new Ps;d.updateFromIdToken(r);const m=new Bn({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new kh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(m,p),m}}const i_=new Map;function Or(n){$r(n instanceof Function,"Expected a class definition");let e=i_.get(n);return e?($r(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,i_.set(n,e),e)}class i0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}i0.type="NONE";const o_=i0;function cc(n,e,t){return`firebase:${n}:${e}:${t}`}class Ns{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=cc(this.userKey,i.apiKey,a),this.fullPersistenceKey=cc("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await kc(this.auth,{idToken:e}).catch(()=>{});return t?Bn._fromGetAccountInfoResponse(this.auth,t,e):null}return Bn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ns(Or(o_),e,r);const i=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=i[0]||Or(o_);const l=cc(r,e.config.apiKey,e.name);let d=null;for(const p of t)try{const y=await p._get(l);if(y){let _;if(typeof y=="string"){const I=await kc(e,{idToken:y}).catch(()=>{});if(!I)break;_=await Bn._fromGetAccountInfoResponse(e,I,y)}else _=Bn._fromJSON(e,y);p!==a&&(d=_),a=p;break}}catch{}const m=i.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!m.length?new Ns(a,e,r):(a=m[0],d&&await a._set(l,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new Ns(a,e,r))}}function s_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(l0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(o0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(c0(e))return"Blackberry";if(d0(e))return"Webos";if(s0(e))return"Safari";if((e.includes("chrome/")||a0(e))&&!e.includes("edge/"))return"Chrome";if(u0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function o0(n=Wt()){return/firefox\//i.test(n)}function s0(n=Wt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function a0(n=Wt()){return/crios\//i.test(n)}function l0(n=Wt()){return/iemobile/i.test(n)}function u0(n=Wt()){return/android/i.test(n)}function c0(n=Wt()){return/blackberry/i.test(n)}function d0(n=Wt()){return/webos/i.test(n)}function hp(n=Wt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function zD(n=Wt()){return hp(n)&&!!window.navigator?.standalone}function $D(){return i1()&&document.documentMode===10}function f0(n=Wt()){return hp(n)||u0(n)||d0(n)||c0(n)||/windows phone/i.test(n)||l0(n)}function h0(n,e=[]){let t;switch(n){case"Browser":t=s_(Wt());break;case"Worker":t=`${s_(Wt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Js}/${r}`}class WD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,d)=>{try{const m=e(a);l(m)}catch(m){d(m)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function JD(n,e={}){return Ks(n,"GET","/v2/passwordPolicy",dp(n,e))}const KD=6;class YD{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??KD,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class QD{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new a_(this),this.idTokenSubscription=new a_(this),this.beforeStateQueue=new WD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Or(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ns.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await kc(this,{idToken:e}),r=await Bn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Fn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!a||a===l)&&d?.user&&(r=d.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fn(this.app))return Promise.reject(_o(this));const t=e?An(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fn(this.app)?Promise.reject(_o(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fn(this.app)?Promise.reject(_o(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Or(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JD(this),t=new YD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _l("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await qD(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Or(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Ns.create(this,[Or(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(d,this,"internal-error"),d.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,i);return()=>{l=!0,m()}}else{const m=e.addObserver(t);return()=>{l=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=h0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&AD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function jc(n){return An(n)}class a_{constructor(e){this.auth=e,this.observer=null,this.addObserver=f1(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let pp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XD(n){pp=n}function ZD(n){return pp.loadJS(n)}function jD(){return pp.gapiScript}function eL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function tL(n,e){const t=ap(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(Io(a,e??{}))return i;pr(i,"already-initialized")}return t.initialize({options:e})}function nL(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Or);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function rL(n,e,t){const r=jc(n);Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=p0(e),{host:l,port:d}=iL(e),m=d===null?"":`:${d}`,p={url:`${a}//${l}${m}/`},y=Object.freeze({host:l,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Se(Io(p,r.config.emulator)&&Io(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Ws(l)?(zT(`${a}//${l}${m}`),$T("Auth",!0)):oL()}function p0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function iL(n){const e=p0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:l_(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:l_(l)}}}function l_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function oL(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class m0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Fr("not implemented")}_getIdTokenResponse(e){return Fr("not implemented")}_linkToIdToken(e,t){return Fr("not implemented")}_getReauthenticationResolver(e){return Fr("not implemented")}}async function ks(n,e){return LD(n,"POST","/v1/accounts:signInWithIdp",dp(n,e))}const sL="http://localhost";class wo extends m0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const l=new wo(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return ks(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ks(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ks(e,t)}buildRequest(){const e={requestUri:sL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=El(t)}return e}}class mp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Il extends mp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ni extends Il{constructor(){super("facebook.com")}static credential(e){return wo._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ni.credential(e.oauthAccessToken)}catch{return null}}}Ni.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ni.PROVIDER_ID="facebook.com";class Ur extends Il{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wo._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ur.credential(t,r)}catch{return null}}}Ur.GOOGLE_SIGN_IN_METHOD="google.com";Ur.PROVIDER_ID="google.com";class ki extends Il{constructor(){super("github.com")}static credential(e){return wo._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com";ki.PROVIDER_ID="github.com";class xi extends Il{constructor(){super("twitter.com")}static credential(e,t){return wo._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return xi.credential(t,r)}catch{return null}}}xi.TWITTER_SIGN_IN_METHOD="twitter.com";xi.PROVIDER_ID="twitter.com";class Vs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Bn._fromIdTokenResponse(e,r,i),l=u_(r);return new Vs({user:a,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=u_(r);return new Vs({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function u_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Mc extends Yr{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Mc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Mc(e,t,r,i)}}function g0(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Mc._fromErrorAndOperation(n,a,e,r):a})}async function aL(n,e,t=!1){const r=await cl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Vs._forOperation(n,"link",r)}async function lL(n,e,t=!1){const{auth:r}=n;if(Fn(r.app))return Promise.reject(_o(r));const i="reauthenticate";try{const a=await cl(n,g0(r,i,e,n),t);Se(a.idToken,r,"internal-error");const l=fp(a.idToken);Se(l,r,"internal-error");const{sub:d}=l;return Se(n.uid===d,r,"user-mismatch"),Vs._forOperation(n,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&pr(r,"user-mismatch"),a}}async function uL(n,e,t=!1){if(Fn(n.app))return Promise.reject(_o(n));const r="signIn",i=await g0(n,r,e),a=await Vs._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}function cL(n,e,t,r){return An(n).onIdTokenChanged(e,t,r)}function dL(n,e,t){return An(n).beforeAuthStateChanged(e,t)}function fL(n,e,t,r){return An(n).onAuthStateChanged(e,t,r)}const Dc="__sak";class y0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Dc,"1"),this.storage.removeItem(Dc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const hL=1e3,pL=10;class v0 extends y0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=f0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,d,m)=>{this.notifyListeners(l,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);$D()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,pL):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},hL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}v0.type="LOCAL";const mL=v0;class _0 extends y0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}_0.type="SESSION";const E0=_0;function gL(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class ed{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new ed(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,l=this.handlersMap[i];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(l).map(async p=>p(t.origin,a)),m=await gL(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ed.receivers=[];function gp(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class yL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((d,m)=>{const p=gp("",20);i.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(_){const I=_;if(I.data.eventId===p)switch(I.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(I.data.response);break;default:clearTimeout(y),clearTimeout(a),m(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function fr(){return window}function vL(n){fr().location.href=n}function T0(){return typeof fr().WorkerGlobalScope<"u"&&typeof fr().importScripts=="function"}async function _L(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function EL(){return navigator?.serviceWorker?.controller||null}function TL(){return T0()?self:null}const I0="firebaseLocalStorageDb",IL=1,Lc="firebaseLocalStorage",S0="fbase_key";class Sl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function td(n,e){return n.transaction([Lc],e?"readwrite":"readonly").objectStore(Lc)}function SL(){const n=indexedDB.deleteDatabase(I0);return new Sl(n).toPromise()}function xh(){const n=indexedDB.open(I0,IL);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Lc,{keyPath:S0})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Lc)?e(r):(r.close(),await SL(),e(await xh()))})})}async function c_(n,e,t){const r=td(n,!0).put({[S0]:e,value:t});return new Sl(r).toPromise()}async function wL(n,e){const t=td(n,!1).get(e),r=await new Sl(t).toPromise();return r===void 0?null:r.value}function d_(n,e){const t=td(n,!0).delete(e);return new Sl(t).toPromise()}const CL=800,AL=3;class w0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xh(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>AL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return T0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ed._getInstance(TL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _L(),!this.activeServiceWorker)return;this.sender=new yL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||EL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xh();return await c_(e,Dc,"1"),await d_(e,Dc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>c_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>wL(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>d_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=td(i,!1).getAll();return new Sl(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}w0.type="LOCAL";const RL=w0;new Tl(3e4,6e4);function C0(n,e){return e?Or(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class yp extends m0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ks(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ks(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ks(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function PL(n){return uL(n.auth,new yp(n),n.bypassAuthState)}function NL(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),lL(t,new yp(n),n.bypassAuthState)}async function kL(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),aL(t,new yp(n),n.bypassAuthState)}class A0{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:l,type:d}=e;if(l){this.reject(l);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PL;case"linkViaPopup":case"linkViaRedirect":return kL;case"reauthViaPopup":case"reauthViaRedirect":return NL;default:pr(this.auth,"internal-error")}}resolve(e){$r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xL=new Tl(2e3,1e4);async function ML(n,e,t){if(Fn(n.app))return Promise.reject($n(n,"operation-not-supported-in-this-environment"));const r=jc(n);RD(n,e,mp);const i=C0(r,t);return new yo(r,"signInViaPopup",e,i).executeNotNull()}class yo extends A0{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,yo.currentPopupAction&&yo.currentPopupAction.cancel(),yo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){$r(this.filter.length===1,"Popup operations only handle one event");const e=gp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject($n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xL.get())};e()}}yo.currentPopupAction=null;const DL="pendingRedirect",dc=new Map;class LL extends A0{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=dc.get(this.auth._key());if(!e){try{const r=await VL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}dc.set(this.auth._key(),e)}return this.bypassAuthState||dc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VL(n,e){const t=FL(e),r=UL(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function bL(n,e){dc.set(n._key(),e)}function UL(n){return Or(n._redirectPersistence)}function FL(n){return cc(DL,n.config.apiKey,n.name)}async function OL(n,e,t=!1){if(Fn(n.app))return Promise.reject(_o(n));const r=jc(n),i=C0(r,e),l=await new LL(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}const GL=600*1e3;class BL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!R0(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError($n(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GL&&this.cachedEventUids.clear(),this.cachedEventUids.has(f_(e))}saveEventToCache(e){this.cachedEventUids.add(f_(e)),this.lastProcessedEventTime=Date.now()}}function f_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function R0({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function HL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return R0(n);default:return!1}}async function qL(n,e={}){return Ks(n,"GET","/v1/projects",e)}const zL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$L=/^https?/;async function WL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await qL(n);for(const t of e)try{if(JL(t))return}catch{}pr(n,"unauthorized-domain")}function JL(n){const e=Nh(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!$L.test(t))return!1;if(zL.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const KL=new Tl(3e4,6e4);function h_(){const n=fr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function YL(n){return new Promise((e,t)=>{function r(){h_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{h_(),t($n(n,"network-request-failed"))},timeout:KL.get()})}if(fr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(fr().gapi?.load)r();else{const i=eL("iframefcb");return fr()[i]=()=>{gapi.load?r():t($n(n,"network-request-failed"))},ZD(`${jD()}?onload=${i}`).catch(a=>t(a))}}).catch(e=>{throw fc=null,e})}let fc=null;function QL(n){return fc=fc||YL(n),fc}const XL=new Tl(5e3,15e3),ZL="__/auth/iframe",jL="emulator/auth/iframe",eV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nV(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?cp(e,jL):`https://${n.config.authDomain}/${ZL}`,r={apiKey:e.apiKey,appName:n.name,v:Js},i=tV.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${El(r).slice(1)}`}async function rV(n){const e=await QL(n),t=fr().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:nV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eV,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=$n(n,"network-request-failed"),d=fr().setTimeout(()=>{a(l)},XL.get());function m(){fr().clearTimeout(d),i(r)}r.ping(m).then(m,()=>{a(l)})}))}const iV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oV=500,sV=600,aV="_blank",lV="http://localhost";class p_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uV(n,e,t,r=oV,i=sV){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const m={...iV,width:r.toString(),height:i.toString(),top:a,left:l},p=Wt().toLowerCase();t&&(d=a0(p)?aV:t),o0(p)&&(e=e||lV,m.scrollbars="yes");const y=Object.entries(m).reduce((I,[C,D])=>`${I}${C}=${D},`,"");if(zD(p)&&d!=="_self")return cV(e||"",d),new p_(null);const _=window.open(e||"",d,y);Se(_,n,"popup-blocked");try{_.focus()}catch{}return new p_(_)}function cV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const dV="__/auth/handler",fV="emulator/auth/handler",hV=encodeURIComponent("fac");async function m_(n,e,t,r,i,a){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Js,eventId:i};if(e instanceof mp){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",d1(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,_]of Object.entries({}))l[y]=_}if(e instanceof Il){const y=e.getScopes().filter(_=>_!=="");y.length>0&&(l.scopes=y.join(","))}n.tenantId&&(l.tid=n.tenantId);const d=l;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const m=await n._getAppCheckToken(),p=m?`#${hV}=${encodeURIComponent(m)}`:"";return`${pV(n)}?${El(d).slice(1)}${p}`}function pV({config:n}){return n.emulator?cp(n,fV):`https://${n.authDomain}/${dV}`}const eh="webStorageSupport";class mV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=E0,this._completeRedirectFn=OL,this._overrideRedirectResult=bL}async _openPopup(e,t,r,i){$r(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await m_(e,t,r,Nh(),i);return uV(e,a,gp())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await m_(e,t,r,Nh(),i);return vL(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):($r(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await rV(e),r=new BL(e);return t.register("authEvent",i=>(Se(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(eh,{type:eh},i=>{const a=i?.[0]?.[eh];a!==void 0&&t(!!a),pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=WL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return f0()||s0()||hp()}}const gV=mV;var g_="@firebase/auth",y_="1.12.0";class yV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function vV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _V(n){Ls(new So("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=r.options;Se(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:l,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:h0(n)},p=new QD(r,i,a,m);return nL(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ls(new So("auth-internal",e=>{const t=jc(e.getProvider("auth").getImmediate());return(r=>new yV(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Li(g_,y_,vV(n)),Li(g_,y_,"esm2020")}const EV=300,TV=qT("authIdTokenMaxAge")||EV;let v_=null;const IV=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>TV)return;const i=t?.token;v_!==i&&(v_=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function SV(n=YT()){const e=ap(n,"auth");if(e.isInitialized())return e.getImmediate();const t=tL(n,{popupRedirectResolver:gV,persistence:[RL,mL,E0]}),r=qT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=IV(a.toString());dL(t,l,()=>l(t.currentUser)),cL(t,d=>l(d))}}const i=BT("auth");return i&&rL(t,`http://${i}`),t}function wV(){return document.getElementsByTagName("head")?.[0]??document}XD({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=$n("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",wV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_V("Browser");var __=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var vp;(function(){var n;function e(M,R){function P(){}P.prototype=R.prototype,M.F=R.prototype,M.prototype=new P,M.prototype.constructor=M,M.D=function(L,V,F){for(var k=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)k[Te-2]=arguments[Te];return R.prototype[V].apply(L,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,R,P){P||(P=0);const L=Array(16);if(typeof R=="string")for(var V=0;V<16;++V)L[V]=R.charCodeAt(P++)|R.charCodeAt(P++)<<8|R.charCodeAt(P++)<<16|R.charCodeAt(P++)<<24;else for(V=0;V<16;++V)L[V]=R[P++]|R[P++]<<8|R[P++]<<16|R[P++]<<24;R=M.g[0],P=M.g[1],V=M.g[2];let F=M.g[3],k;k=R+(F^P&(V^F))+L[0]+3614090360&4294967295,R=P+(k<<7&4294967295|k>>>25),k=F+(V^R&(P^V))+L[1]+3905402710&4294967295,F=R+(k<<12&4294967295|k>>>20),k=V+(P^F&(R^P))+L[2]+606105819&4294967295,V=F+(k<<17&4294967295|k>>>15),k=P+(R^V&(F^R))+L[3]+3250441966&4294967295,P=V+(k<<22&4294967295|k>>>10),k=R+(F^P&(V^F))+L[4]+4118548399&4294967295,R=P+(k<<7&4294967295|k>>>25),k=F+(V^R&(P^V))+L[5]+1200080426&4294967295,F=R+(k<<12&4294967295|k>>>20),k=V+(P^F&(R^P))+L[6]+2821735955&4294967295,V=F+(k<<17&4294967295|k>>>15),k=P+(R^V&(F^R))+L[7]+4249261313&4294967295,P=V+(k<<22&4294967295|k>>>10),k=R+(F^P&(V^F))+L[8]+1770035416&4294967295,R=P+(k<<7&4294967295|k>>>25),k=F+(V^R&(P^V))+L[9]+2336552879&4294967295,F=R+(k<<12&4294967295|k>>>20),k=V+(P^F&(R^P))+L[10]+4294925233&4294967295,V=F+(k<<17&4294967295|k>>>15),k=P+(R^V&(F^R))+L[11]+2304563134&4294967295,P=V+(k<<22&4294967295|k>>>10),k=R+(F^P&(V^F))+L[12]+1804603682&4294967295,R=P+(k<<7&4294967295|k>>>25),k=F+(V^R&(P^V))+L[13]+4254626195&4294967295,F=R+(k<<12&4294967295|k>>>20),k=V+(P^F&(R^P))+L[14]+2792965006&4294967295,V=F+(k<<17&4294967295|k>>>15),k=P+(R^V&(F^R))+L[15]+1236535329&4294967295,P=V+(k<<22&4294967295|k>>>10),k=R+(V^F&(P^V))+L[1]+4129170786&4294967295,R=P+(k<<5&4294967295|k>>>27),k=F+(P^V&(R^P))+L[6]+3225465664&4294967295,F=R+(k<<9&4294967295|k>>>23),k=V+(R^P&(F^R))+L[11]+643717713&4294967295,V=F+(k<<14&4294967295|k>>>18),k=P+(F^R&(V^F))+L[0]+3921069994&4294967295,P=V+(k<<20&4294967295|k>>>12),k=R+(V^F&(P^V))+L[5]+3593408605&4294967295,R=P+(k<<5&4294967295|k>>>27),k=F+(P^V&(R^P))+L[10]+38016083&4294967295,F=R+(k<<9&4294967295|k>>>23),k=V+(R^P&(F^R))+L[15]+3634488961&4294967295,V=F+(k<<14&4294967295|k>>>18),k=P+(F^R&(V^F))+L[4]+3889429448&4294967295,P=V+(k<<20&4294967295|k>>>12),k=R+(V^F&(P^V))+L[9]+568446438&4294967295,R=P+(k<<5&4294967295|k>>>27),k=F+(P^V&(R^P))+L[14]+3275163606&4294967295,F=R+(k<<9&4294967295|k>>>23),k=V+(R^P&(F^R))+L[3]+4107603335&4294967295,V=F+(k<<14&4294967295|k>>>18),k=P+(F^R&(V^F))+L[8]+1163531501&4294967295,P=V+(k<<20&4294967295|k>>>12),k=R+(V^F&(P^V))+L[13]+2850285829&4294967295,R=P+(k<<5&4294967295|k>>>27),k=F+(P^V&(R^P))+L[2]+4243563512&4294967295,F=R+(k<<9&4294967295|k>>>23),k=V+(R^P&(F^R))+L[7]+1735328473&4294967295,V=F+(k<<14&4294967295|k>>>18),k=P+(F^R&(V^F))+L[12]+2368359562&4294967295,P=V+(k<<20&4294967295|k>>>12),k=R+(P^V^F)+L[5]+4294588738&4294967295,R=P+(k<<4&4294967295|k>>>28),k=F+(R^P^V)+L[8]+2272392833&4294967295,F=R+(k<<11&4294967295|k>>>21),k=V+(F^R^P)+L[11]+1839030562&4294967295,V=F+(k<<16&4294967295|k>>>16),k=P+(V^F^R)+L[14]+4259657740&4294967295,P=V+(k<<23&4294967295|k>>>9),k=R+(P^V^F)+L[1]+2763975236&4294967295,R=P+(k<<4&4294967295|k>>>28),k=F+(R^P^V)+L[4]+1272893353&4294967295,F=R+(k<<11&4294967295|k>>>21),k=V+(F^R^P)+L[7]+4139469664&4294967295,V=F+(k<<16&4294967295|k>>>16),k=P+(V^F^R)+L[10]+3200236656&4294967295,P=V+(k<<23&4294967295|k>>>9),k=R+(P^V^F)+L[13]+681279174&4294967295,R=P+(k<<4&4294967295|k>>>28),k=F+(R^P^V)+L[0]+3936430074&4294967295,F=R+(k<<11&4294967295|k>>>21),k=V+(F^R^P)+L[3]+3572445317&4294967295,V=F+(k<<16&4294967295|k>>>16),k=P+(V^F^R)+L[6]+76029189&4294967295,P=V+(k<<23&4294967295|k>>>9),k=R+(P^V^F)+L[9]+3654602809&4294967295,R=P+(k<<4&4294967295|k>>>28),k=F+(R^P^V)+L[12]+3873151461&4294967295,F=R+(k<<11&4294967295|k>>>21),k=V+(F^R^P)+L[15]+530742520&4294967295,V=F+(k<<16&4294967295|k>>>16),k=P+(V^F^R)+L[2]+3299628645&4294967295,P=V+(k<<23&4294967295|k>>>9),k=R+(V^(P|~F))+L[0]+4096336452&4294967295,R=P+(k<<6&4294967295|k>>>26),k=F+(P^(R|~V))+L[7]+1126891415&4294967295,F=R+(k<<10&4294967295|k>>>22),k=V+(R^(F|~P))+L[14]+2878612391&4294967295,V=F+(k<<15&4294967295|k>>>17),k=P+(F^(V|~R))+L[5]+4237533241&4294967295,P=V+(k<<21&4294967295|k>>>11),k=R+(V^(P|~F))+L[12]+1700485571&4294967295,R=P+(k<<6&4294967295|k>>>26),k=F+(P^(R|~V))+L[3]+2399980690&4294967295,F=R+(k<<10&4294967295|k>>>22),k=V+(R^(F|~P))+L[10]+4293915773&4294967295,V=F+(k<<15&4294967295|k>>>17),k=P+(F^(V|~R))+L[1]+2240044497&4294967295,P=V+(k<<21&4294967295|k>>>11),k=R+(V^(P|~F))+L[8]+1873313359&4294967295,R=P+(k<<6&4294967295|k>>>26),k=F+(P^(R|~V))+L[15]+4264355552&4294967295,F=R+(k<<10&4294967295|k>>>22),k=V+(R^(F|~P))+L[6]+2734768916&4294967295,V=F+(k<<15&4294967295|k>>>17),k=P+(F^(V|~R))+L[13]+1309151649&4294967295,P=V+(k<<21&4294967295|k>>>11),k=R+(V^(P|~F))+L[4]+4149444226&4294967295,R=P+(k<<6&4294967295|k>>>26),k=F+(P^(R|~V))+L[11]+3174756917&4294967295,F=R+(k<<10&4294967295|k>>>22),k=V+(R^(F|~P))+L[2]+718787259&4294967295,V=F+(k<<15&4294967295|k>>>17),k=P+(F^(V|~R))+L[9]+3951481745&4294967295,M.g[0]=M.g[0]+R&4294967295,M.g[1]=M.g[1]+(V+(k<<21&4294967295|k>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+F&4294967295}r.prototype.v=function(M,R){R===void 0&&(R=M.length);const P=R-this.blockSize,L=this.C;let V=this.h,F=0;for(;F<R;){if(V==0)for(;F<=P;)i(this,M,F),F+=this.blockSize;if(typeof M=="string"){for(;F<R;)if(L[V++]=M.charCodeAt(F++),V==this.blockSize){i(this,L),V=0;break}}else for(;F<R;)if(L[V++]=M[F++],V==this.blockSize){i(this,L),V=0;break}}this.h=V,this.o+=R},r.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var R=1;R<M.length-8;++R)M[R]=0;R=this.o*8;for(var P=M.length-8;P<M.length;++P)M[P]=R&255,R/=256;for(this.v(M),M=Array(16),R=0,P=0;P<4;++P)for(let L=0;L<32;L+=8)M[R++]=this.g[P]>>>L&255;return M};function a(M,R){var P=d;return Object.prototype.hasOwnProperty.call(P,M)?P[M]:P[M]=R(M)}function l(M,R){this.h=R;const P=[];let L=!0;for(let V=M.length-1;V>=0;V--){const F=M[V]|0;L&&F==R||(P[V]=F,L=!1)}this.g=P}var d={};function m(M){return-128<=M&&M<128?a(M,function(R){return new l([R|0],R<0?-1:0)}):new l([M|0],M<0?-1:0)}function p(M){if(isNaN(M)||!isFinite(M))return _;if(M<0)return N(p(-M));const R=[];let P=1;for(let L=0;M>=P;L++)R[L]=M/P|0,P*=4294967296;return new l(R,0)}function y(M,R){if(M.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(M.charAt(0)=="-")return N(y(M.substring(1),R));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=p(Math.pow(R,8));let L=_;for(let F=0;F<M.length;F+=8){var V=Math.min(8,M.length-F);const k=parseInt(M.substring(F,F+V),R);V<8?(V=p(Math.pow(R,V)),L=L.j(V).add(p(k))):(L=L.j(P),L=L.add(p(k)))}return L}var _=m(0),I=m(1),C=m(16777216);n=l.prototype,n.m=function(){if(b(this))return-N(this).m();let M=0,R=1;for(let P=0;P<this.g.length;P++){const L=this.i(P);M+=(L>=0?L:4294967296+L)*R,R*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(D(this))return"0";if(b(this))return"-"+N(this).toString(M);const R=p(Math.pow(M,6));var P=this;let L="";for(;;){const V=Q(P,R).g;P=B(P,V.j(R));let F=((P.g.length>0?P.g[0]:P.h)>>>0).toString(M);if(P=V,D(P))return F+L;for(;F.length<6;)F="0"+F;L=F+L}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function D(M){if(M.h!=0)return!1;for(let R=0;R<M.g.length;R++)if(M.g[R]!=0)return!1;return!0}function b(M){return M.h==-1}n.l=function(M){return M=B(this,M),b(M)?-1:D(M)?0:1};function N(M){const R=M.g.length,P=[];for(let L=0;L<R;L++)P[L]=~M.g[L];return new l(P,~M.h).add(I)}n.abs=function(){return b(this)?N(this):this},n.add=function(M){const R=Math.max(this.g.length,M.g.length),P=[];let L=0;for(let V=0;V<=R;V++){let F=L+(this.i(V)&65535)+(M.i(V)&65535),k=(F>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);L=k>>>16,F&=65535,k&=65535,P[V]=k<<16|F}return new l(P,P[P.length-1]&-2147483648?-1:0)};function B(M,R){return M.add(N(R))}n.j=function(M){if(D(this)||D(M))return _;if(b(this))return b(M)?N(this).j(N(M)):N(N(this).j(M));if(b(M))return N(this.j(N(M)));if(this.l(C)<0&&M.l(C)<0)return p(this.m()*M.m());const R=this.g.length+M.g.length,P=[];for(var L=0;L<2*R;L++)P[L]=0;for(L=0;L<this.g.length;L++)for(let V=0;V<M.g.length;V++){const F=this.i(L)>>>16,k=this.i(L)&65535,Te=M.i(V)>>>16,qe=M.i(V)&65535;P[2*L+2*V]+=k*qe,K(P,2*L+2*V),P[2*L+2*V+1]+=F*qe,K(P,2*L+2*V+1),P[2*L+2*V+1]+=k*Te,K(P,2*L+2*V+1),P[2*L+2*V+2]+=F*Te,K(P,2*L+2*V+2)}for(M=0;M<R;M++)P[M]=P[2*M+1]<<16|P[2*M];for(M=R;M<2*R;M++)P[M]=0;return new l(P,0)};function K(M,R){for(;(M[R]&65535)!=M[R];)M[R+1]+=M[R]>>>16,M[R]&=65535,R++}function Y(M,R){this.g=M,this.h=R}function Q(M,R){if(D(R))throw Error("division by zero");if(D(M))return new Y(_,_);if(b(M))return R=Q(N(M),R),new Y(N(R.g),N(R.h));if(b(R))return R=Q(M,N(R)),new Y(N(R.g),R.h);if(M.g.length>30){if(b(M)||b(R))throw Error("slowDivide_ only works with positive integers.");for(var P=I,L=R;L.l(M)<=0;)P=le(P),L=le(L);var V=J(P,1),F=J(L,1);for(L=J(L,2),P=J(P,2);!D(L);){var k=F.add(L);k.l(M)<=0&&(V=V.add(P),F=k),L=J(L,1),P=J(P,1)}return R=B(M,V.j(R)),new Y(V,R)}for(V=_;M.l(R)>=0;){for(P=Math.max(1,Math.floor(M.m()/R.m())),L=Math.ceil(Math.log(P)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),F=p(P),k=F.j(R);b(k)||k.l(M)>0;)P-=L,F=p(P),k=F.j(R);D(F)&&(F=I),V=V.add(F),M=B(M,k)}return new Y(V,M)}n.B=function(M){return Q(this,M).h},n.and=function(M){const R=Math.max(this.g.length,M.g.length),P=[];for(let L=0;L<R;L++)P[L]=this.i(L)&M.i(L);return new l(P,this.h&M.h)},n.or=function(M){const R=Math.max(this.g.length,M.g.length),P=[];for(let L=0;L<R;L++)P[L]=this.i(L)|M.i(L);return new l(P,this.h|M.h)},n.xor=function(M){const R=Math.max(this.g.length,M.g.length),P=[];for(let L=0;L<R;L++)P[L]=this.i(L)^M.i(L);return new l(P,this.h^M.h)};function le(M){const R=M.g.length+1,P=[];for(let L=0;L<R;L++)P[L]=M.i(L)<<1|M.i(L-1)>>>31;return new l(P,M.h)}function J(M,R){const P=R>>5;R%=32;const L=M.g.length-P,V=[];for(let F=0;F<L;F++)V[F]=R>0?M.i(F+P)>>>R|M.i(F+P+1)<<32-R:M.i(F+P);return new l(V,M.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=y,vp=l}).apply(typeof __<"u"?__:typeof self<"u"?self:typeof window<"u"?window:{});var ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var P0,el,N0,hc,Mh,k0,x0,M0;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ju=="object"&&ju];for(var T=0;T<h.length;++T){var S=h[T];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=t(this);function i(h,T){if(T)e:{var S=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var q=h[A];if(!(q in S))break e;S=S[q]}h=h[h.length-1],A=S[h],T=T(A),T!=A&&T!=null&&e(S,h,{configurable:!0,writable:!0,value:T})}}i("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(h){return h||function(T){var S=[],A;for(A in T)Object.prototype.hasOwnProperty.call(T,A)&&S.push([A,T[A]]);return S}});var a=a||{},l=this||self;function d(h){var T=typeof h;return T=="object"&&h!=null||T=="function"}function m(h,T,S){return h.call.apply(h.bind,arguments)}function p(h,T,S){return p=m,p.apply(null,arguments)}function y(h,T){var S=Array.prototype.slice.call(arguments,1);return function(){var A=S.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function _(h,T){function S(){}S.prototype=T.prototype,h.Z=T.prototype,h.prototype=new S,h.prototype.constructor=h,h.Ob=function(A,q,W){for(var se=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)se[Ce-2]=arguments[Ce];return T.prototype[q].apply(A,se)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function C(h){const T=h.length;if(T>0){const S=Array(T);for(let A=0;A<T;A++)S[A]=h[A];return S}return[]}function D(h,T){for(let A=1;A<arguments.length;A++){const q=arguments[A];var S=typeof q;if(S=S!="object"?S:q?Array.isArray(q)?"array":S:"null",S=="array"||S=="object"&&typeof q.length=="number"){S=h.length||0;const W=q.length||0;h.length=S+W;for(let se=0;se<W;se++)h[S+se]=q[se]}else h.push(q)}}class b{constructor(T,S){this.i=T,this.j=S,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function N(h){l.setTimeout(()=>{throw h},0)}function B(){var h=M;let T=null;return h.g&&(T=h.g,h.g=h.g.next,h.g||(h.h=null),T.next=null),T}class K{constructor(){this.h=this.g=null}add(T,S){const A=Y.get();A.set(T,S),this.h?this.h.next=A:this.g=A,this.h=A}}var Y=new b(()=>new Q,h=>h.reset());class Q{constructor(){this.next=this.g=this.h=null}set(T,S){this.h=T,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let le,J=!1,M=new K,R=()=>{const h=Promise.resolve(void 0);le=()=>{h.then(P)}};function P(){for(var h;h=B();){try{h.h.call(h.g)}catch(S){N(S)}var T=Y;T.j(h),T.h<100&&(T.h++,h.next=T.g,T.g=h)}J=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(h,T){this.type=h,this.g=this.target=T,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var h=!1,T=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const S=()=>{};l.addEventListener("test",S,T),l.removeEventListener("test",S,T)}catch{}return h})();function k(h){return/^[\s\xa0]*$/.test(h)}function Te(h,T){V.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,T)}_(Te,V),Te.prototype.init=function(h,T){const S=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=T,T=h.relatedTarget,T||(S=="mouseover"?T=h.fromElement:S=="mouseout"&&(T=h.toElement)),this.relatedTarget=T,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Te.Z.h.call(this)},Te.prototype.h=function(){Te.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var qe="closure_listenable_"+(Math.random()*1e6|0),Oe=0;function ze(h,T,S,A,q){this.listener=h,this.proxy=null,this.src=T,this.type=S,this.capture=!!A,this.ha=q,this.key=++Oe,this.da=this.fa=!1}function re(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function he(h,T,S){for(const A in h)T.call(S,h[A],A,h)}function ce(h,T){for(const S in h)T.call(void 0,h[S],S,h)}function G(h){const T={};for(const S in h)T[S]=h[S];return T}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ae(h,T){let S,A;for(let q=1;q<arguments.length;q++){A=arguments[q];for(S in A)h[S]=A[S];for(let W=0;W<Z.length;W++)S=Z[W],Object.prototype.hasOwnProperty.call(A,S)&&(h[S]=A[S])}}function Re(h){this.src=h,this.g={},this.h=0}Re.prototype.add=function(h,T,S,A,q){const W=h.toString();h=this.g[W],h||(h=this.g[W]=[],this.h++);const se=De(h,T,A,q);return se>-1?(T=h[se],S||(T.fa=!1)):(T=new ze(T,this.src,W,!!A,q),T.fa=S,h.push(T)),T};function Me(h,T){const S=T.type;if(S in h.g){var A=h.g[S],q=Array.prototype.indexOf.call(A,T,void 0),W;(W=q>=0)&&Array.prototype.splice.call(A,q,1),W&&(re(T),h.g[S].length==0&&(delete h.g[S],h.h--))}}function De(h,T,S,A){for(let q=0;q<h.length;++q){const W=h[q];if(!W.da&&W.listener==T&&W.capture==!!S&&W.ha==A)return q}return-1}var $e="closure_lm_"+(Math.random()*1e6|0),Ue={};function Ke(h,T,S,A,q){if(Array.isArray(T)){for(let W=0;W<T.length;W++)Ke(h,T[W],S,A,q);return null}return S=Zs(S),h&&h[qe]?h.J(T,S,d(A)?!!A.capture:!1,q):Jt(h,T,S,!1,A,q)}function Jt(h,T,S,A,q,W){if(!T)throw Error("Invalid event type");const se=d(q)?!!q.capture:!!q;let Ce=Lo(h);if(Ce||(h[$e]=Ce=new Re(h)),S=Ce.add(T,S,A,se,W),S.proxy)return S;if(A=Mo(),S.proxy=A,A.src=h,A.listener=S,h.addEventListener)F||(q=se),q===void 0&&(q=!1),h.addEventListener(T.toString(),A,q);else if(h.attachEvent)h.attachEvent(Do(T.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Mo(){function h(S){return T.call(h.src,h.listener,S)}const T=kl;return h}function Xs(h,T,S,A,q){if(Array.isArray(T))for(var W=0;W<T.length;W++)Xs(h,T[W],S,A,q);else A=d(A)?!!A.capture:!!A,S=Zs(S),h&&h[qe]?(h=h.i,W=String(T).toString(),W in h.g&&(T=h.g[W],S=De(T,S,A,q),S>-1&&(re(T[S]),Array.prototype.splice.call(T,S,1),T.length==0&&(delete h.g[W],h.h--)))):h&&(h=Lo(h))&&(T=h.g[T.toString()],h=-1,T&&(h=De(T,S,A,q)),(S=h>-1?T[h]:null)&&Qr(S))}function Qr(h){if(typeof h!="number"&&h&&!h.da){var T=h.src;if(T&&T[qe])Me(T.i,h);else{var S=h.type,A=h.proxy;T.removeEventListener?T.removeEventListener(S,A,h.capture):T.detachEvent?T.detachEvent(Do(S),A):T.addListener&&T.removeListener&&T.removeListener(A),(S=Lo(T))?(Me(S,h),S.h==0&&(S.src=null,T[$e]=null)):re(h)}}}function Do(h){return h in Ue?Ue[h]:Ue[h]="on"+h}function kl(h,T){if(h.da)h=!0;else{T=new Te(T,this);const S=h.listener,A=h.ha||h.src;h.fa&&Qr(h),h=S.call(A,T)}return h}function Lo(h){return h=h[$e],h instanceof Re?h:null}var Bi="__closure_events_fn_"+(Math.random()*1e9>>>0);function Zs(h){return typeof h=="function"?h:(h[Bi]||(h[Bi]=function(T){return h.handleEvent(T)}),h[Bi])}function pt(){L.call(this),this.i=new Re(this),this.M=this,this.G=null}_(pt,L),pt.prototype[qe]=!0,pt.prototype.removeEventListener=function(h,T,S,A){Xs(this,h,T,S,A)};function dt(h,T){var S,A=h.G;if(A)for(S=[];A;A=A.G)S.push(A);if(h=h.M,A=T.type||T,typeof T=="string")T=new V(T,h);else if(T instanceof V)T.target=T.target||h;else{var q=T;T=new V(A,h),Ae(T,q)}q=!0;let W,se;if(S)for(se=S.length-1;se>=0;se--)W=T.g=S[se],q=Rn(W,A,!0,T)&&q;if(W=T.g=h,q=Rn(W,A,!0,T)&&q,q=Rn(W,A,!1,T)&&q,S)for(se=0;se<S.length;se++)W=T.g=S[se],q=Rn(W,A,!1,T)&&q}pt.prototype.N=function(){if(pt.Z.N.call(this),this.i){var h=this.i;for(const T in h.g){const S=h.g[T];for(let A=0;A<S.length;A++)re(S[A]);delete h.g[T],h.h--}}this.G=null},pt.prototype.J=function(h,T,S,A){return this.i.add(String(h),T,!1,S,A)},pt.prototype.K=function(h,T,S,A){return this.i.add(String(h),T,!0,S,A)};function Rn(h,T,S,A){if(T=h.i.g[String(T)],!T)return!0;T=T.concat();let q=!0;for(let W=0;W<T.length;++W){const se=T[W];if(se&&!se.da&&se.capture==S){const Ce=se.listener,ft=se.ha||se.src;se.fa&&Me(h.i,se),q=Ce.call(ft,A)!==!1&&q}}return q&&!A.defaultPrevented}function js(h,T){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:l.setTimeout(h,T||0)}function ea(h){h.g=js(()=>{h.g=null,h.i&&(h.i=!1,ea(h))},h.l);const T=h.h;h.h=null,h.m.apply(null,T)}class xl extends L{constructor(T,S){super(),this.m=T,this.l=S,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:ea(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xr(h){L.call(this),this.h=h,this.g={}}_(Xr,L);var ta=[];function Vo(h){he(h.g,function(T,S){this.g.hasOwnProperty(S)&&Qr(T)},h),h.g={}}Xr.prototype.N=function(){Xr.Z.N.call(this),Vo(this)},Xr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zr=l.JSON.stringify,Ml=l.JSON.parse,Hi=class{stringify(h){return l.JSON.stringify(h,void 0)}parse(h){return l.JSON.parse(h,void 0)}};function jr(){}function Dl(){}var ei={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function bo(){V.call(this,"d")}_(bo,V);function na(){V.call(this,"c")}_(na,V);var Pn={},Uo=null;function ti(){return Uo=Uo||new pt}Pn.Ia="serverreachability";function Fo(h){V.call(this,Pn.Ia,h)}_(Fo,V);function yr(h){const T=ti();dt(T,new Fo(T))}Pn.STAT_EVENT="statevent";function vr(h,T){V.call(this,Pn.STAT_EVENT,h),this.stat=T}_(vr,V);function lt(h){const T=ti();dt(T,new vr(T,h))}Pn.Ja="timingevent";function ra(h,T){V.call(this,Pn.Ja,h),this.size=T}_(ra,V);function ni(h,T){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){h()},T)}function ri(){this.g=!0}ri.prototype.ua=function(){this.g=!1};function Ll(h,T,S,A,q,W){h.info(function(){if(h.g)if(W){var se="",Ce=W.split("&");for(let Je=0;Je<Ce.length;Je++){var ft=Ce[Je].split("=");if(ft.length>1){const mt=ft[0];ft=ft[1];const fn=mt.split("_");se=fn.length>=2&&fn[1]=="type"?se+(mt+"="+ft+"&"):se+(mt+"=redacted&")}}}else se=null;else se=W;return"XMLHTTP REQ ("+A+") [attempt "+q+"]: "+T+`
`+S+`
`+se})}function Vl(h,T,S,A,q,W,se){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+q+"]: "+T+`
`+S+`
`+W+" "+se})}function Jn(h,T,S,A){h.info(function(){return"XMLHTTP TEXT ("+T+"): "+qi(h,S)+(A?" "+A:"")})}function bl(h,T){h.info(function(){return"TIMEOUT: "+T})}ri.prototype.info=function(){};function qi(h,T){if(!h.g)return T;if(!T)return null;try{const W=JSON.parse(T);if(W){for(h=0;h<W.length;h++)if(Array.isArray(W[h])){var S=W[h];if(!(S.length<2)){var A=S[1];if(Array.isArray(A)&&!(A.length<1)){var q=A[0];if(q!="noop"&&q!="stop"&&q!="close")for(let se=1;se<A.length;se++)A[se]=""}}}}return Zr(W)}catch{return T}}var ii={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},oi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ul;function _r(){}_(_r,jr),_r.prototype.g=function(){return new XMLHttpRequest},Ul=new _r;function Kn(h){return encodeURIComponent(String(h))}function Oo(h){var T=1;h=h.split(":");const S=[];for(;T>0&&h.length;)S.push(h.shift()),T--;return h.length&&S.push(h.join(":")),S}function yn(h,T,S,A){this.j=h,this.i=T,this.l=S,this.S=A||1,this.V=new Xr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Fl}function Fl(){this.i=null,this.g="",this.h=!1}var Ol={},ia={};function Nn(h,T,S){h.M=1,h.A=Tr(vn(T)),h.u=S,h.R=!0,oa(h,null)}function oa(h,T){h.F=Date.now(),zi(h),h.B=vn(h.A);var S=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),ma(S.i,"t",A),h.C=0,S=h.j.L,h.h=new Fl,h.g=Yl(h.j,S?T:null,!h.u),h.P>0&&(h.O=new xl(p(h.Y,h,h.g),h.P)),T=h.V,S=h.g,A=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(ta[0]=q.toString()),q=ta);for(let W=0;W<q.length;W++){const se=Ke(S,q[W],A||T.handleEvent,!1,T.h||T);if(!se)break;T.g[se.key]=se}T=h.J?G(h.J):{},h.u?(h.v||(h.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,T)):(h.v="GET",h.g.ea(h.B,h.v,null,T)),yr(),Ll(h.i,h.v,h.B,h.l,h.S,h.u)}yn.prototype.ba=function(h){h=h.target;const T=this.O;T&&tr(h)==3?T.j():this.Y(h)},yn.prototype.Y=function(h){try{if(h==this.g)e:{const Ce=tr(this.g),ft=this.g.ya(),Je=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||Jl(this.g)))){this.K||Ce!=4||ft==7||(ft==8||Je<=0?yr(3):yr(2)),Go(this);var T=this.g.ca();this.X=T;var S=Gl(this);if(this.o=T==200,Vl(this.i,this.v,this.B,this.l,this.S,Ce,T),this.o){if(this.U&&!this.L){t:{if(this.g){var A,q=this.g;if((A=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(A)){var W=A;break t}}W=null}if(h=W)Jn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ze(this,h);else{this.o=!1,this.m=3,lt(12),Er(this),$i(this);break e}}if(this.R){h=!0;let mt;for(;!this.K&&this.C<S.length;)if(mt=Hl(this,S),mt==ia){Ce==4&&(this.m=4,lt(14),h=!1),Jn(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==Ol){this.m=4,lt(15),Jn(this.i,this.l,S,"[Invalid Chunk]"),h=!1;break}else Jn(this.i,this.l,mt,null),Ze(this,mt);if(Bl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||S.length!=0||this.h.h||(this.m=1,lt(16),h=!1),this.o=this.o&&h,!h)Jn(this.i,this.l,S,"[Invalid Chunked Response]"),Er(this),$i(this);else if(S.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),eo(se),se.P=!0,lt(11))}}else Jn(this.i,this.l,S,null),Ze(this,S);Ce==4&&Er(this),this.o&&!this.K&&(Ce==4?Qo(this.j,this):(this.o=!1,zi(this)))}else ya(this.g),T==400&&S.indexOf("Unknown SID")>0?(this.m=3,lt(12)):(this.m=0,lt(13)),Er(this),$i(this)}}}catch{}};function Gl(h){if(!Bl(h))return h.g.la();const T=Jl(h.g);if(T==="")return"";let S="";const A=T.length,q=tr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Er(h),$i(h),"";h.h.i=new l.TextDecoder}for(let W=0;W<A;W++)h.h.h=!0,S+=h.h.i.decode(T[W],{stream:!(q&&W==A-1)});return T.length=0,h.h.g+=S,h.C=0,h.h.g}function Bl(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Hl(h,T){var S=h.C,A=T.indexOf(`
`,S);return A==-1?ia:(S=Number(T.substring(S,A)),isNaN(S)?Ol:(A+=1,A+S>T.length?ia:(T=T.slice(A,A+S),h.C=A+S,T)))}yn.prototype.cancel=function(){this.K=!0,Er(this)};function zi(h){h.T=Date.now()+h.H,sa(h,h.H)}function sa(h,T){if(h.D!=null)throw Error("WatchDog timer not null");h.D=ni(p(h.aa,h),T)}function Go(h){h.D&&(l.clearTimeout(h.D),h.D=null)}yn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(bl(this.i,this.B),this.M!=2&&(yr(),lt(17)),Er(this),this.m=2,$i(this)):sa(this,this.T-h)};function $i(h){h.j.I==0||h.K||Qo(h.j,h)}function Er(h){Go(h);var T=h.O;T&&typeof T.dispose=="function"&&T.dispose(),h.O=null,Vo(h.V),h.g&&(T=h.g,h.g=null,T.abort(),T.dispose())}function Ze(h,T){try{var S=h.j;if(S.I!=0&&(S.g==h||la(S.h,h))){if(!h.L&&la(S.h,h)&&S.I==3){try{var A=S.Ba.g.parse(T)}catch{A=null}if(Array.isArray(A)&&A.length==3){var q=A;if(q[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<h.F)Yo(S),cn(S);else break e;ir(S),lt(18)}}else S.xa=q[1],0<S.xa-S.K&&q[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=ni(p(S.Va,S),6e3));Wi(S.h)<=1&&S.ta&&(S.ta=void 0)}else dn(S,11)}else if((h.L||S.g==h)&&Yo(S),!k(T))for(q=S.Ba.g.parse(T),T=0;T<q.length;T++){let Je=q[T];const mt=Je[0];if(!(mt<=S.K))if(S.K=mt,Je=Je[1],S.I==2)if(Je[0]=="c"){S.M=Je[1],S.ba=Je[2];const fn=Je[3];fn!=null&&(S.ka=fn,S.j.info("VER="+S.ka));const Ar=Je[4];Ar!=null&&(S.za=Ar,S.j.info("SVER="+S.za));const or=Je[5];or!=null&&typeof or=="number"&&or>0&&(A=1.5*or,S.O=A,S.j.info("backChannelRequestTimeoutMs_="+A)),A=S;const sr=h.g;if(sr){const jo=sr.g?sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jo){var W=A.h;W.g||jo.indexOf("spdy")==-1&&jo.indexOf("quic")==-1&&jo.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Ho(W,W.h),W.h=null))}if(A.G){const Ea=sr.g?sr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ea&&(A.wa=Ea,He(A.J,A.G,Ea))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-h.F,S.j.info("Handshake RTT: "+S.T+"ms")),A=S;var se=h;if(A.na=_a(A,A.L?A.ba:null,A.W),se.L){Ji(A.h,se);var Ce=se,ft=A.O;ft&&(Ce.H=ft),Ce.D&&(Go(Ce),zi(Ce)),A.g=se}else Ut(A);S.i.length>0&&Cr(S)}else Je[0]!="stop"&&Je[0]!="close"||dn(S,7);else S.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?dn(S,7):Jo(S):Je[0]!="noop"&&S.l&&S.l.qa(Je),S.A=0)}}yr(4)}catch{}}var dd=class{constructor(h,T){this.g=h,this.map=T}};function Bo(h){this.l=h||10,l.PerformanceNavigationTiming?(h=l.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function aa(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Wi(h){return h.h?1:h.g?h.g.size:0}function la(h,T){return h.h?h.h==T:h.g?h.g.has(T):!1}function Ho(h,T){h.g?h.g.add(T):h.h=T}function Ji(h,T){h.h&&h.h==T?h.h=null:h.g&&h.g.has(T)&&h.g.delete(T)}Bo.prototype.cancel=function(){if(this.i=an(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function an(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let T=h.i;for(const S of h.g.values())T=T.concat(S.G);return T}return C(h.i)}var ql=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ln(h,T){if(h){h=h.split("&");for(let S=0;S<h.length;S++){const A=h[S].indexOf("=");let q,W=null;A>=0?(q=h[S].substring(0,A),W=h[S].substring(A+1)):q=h[S],T(q,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Yn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;h instanceof Yn?(this.l=h.l,Ki(this,h.j),this.o=h.o,this.g=h.g,Qn(this,h.u),this.h=h.h,si(this,ga(h.i)),this.m=h.m):h&&(T=String(h).match(ql))?(this.l=!1,Ki(this,T[1]||"",!0),this.o=Yi(T[2]||""),this.g=Yi(T[3]||"",!0),Qn(this,T[4]),this.h=Yi(T[5]||"",!0),si(this,T[6]||"",!0),this.m=Yi(T[7]||"")):(this.l=!1,this.i=new Ve(null,this.l))}Yn.prototype.toString=function(){const h=[];var T=this.j;T&&h.push(Qi(T,ca,!0),":");var S=this.g;return(S||T=="file")&&(h.push("//"),(T=this.o)&&h.push(Qi(T,ca,!0),"@"),h.push(Kn(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&h.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push(Qi(S,S.charAt(0)=="/"?Xi:da,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",Qi(S,fa)),h.join("")},Yn.prototype.resolve=function(h){const T=vn(this);let S=!!h.j;S?Ki(T,h.j):S=!!h.o,S?T.o=h.o:S=!!h.g,S?T.g=h.g:S=h.u!=null;var A=h.h;if(S)Qn(T,h.u);else if(S=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var q=T.h.lastIndexOf("/");q!=-1&&(A=T.h.slice(0,q+1)+A)}if(q=A,q==".."||q==".")A="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){A=q.lastIndexOf("/",0)==0,q=q.split("/");const W=[];for(let se=0;se<q.length;){const Ce=q[se++];Ce=="."?A&&se==q.length&&W.push(""):Ce==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),A&&se==q.length&&W.push("")):(W.push(Ce),A=!0)}A=W.join("/")}else A=q}return S?T.h=A:S=h.i.toString()!=="",S?si(T,ga(h.i)):S=!!h.m,S&&(T.m=h.m),T};function vn(h){return new Yn(h)}function Ki(h,T,S){h.j=S?Yi(T,!0):T,h.j&&(h.j=h.j.replace(/:$/,""))}function Qn(h,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);h.u=T}else h.u=null}function si(h,T,S){T instanceof Ve?(h.i=T,zo(h.i,h.l)):(S||(T=Qi(T,fd)),h.i=new Ve(T,h.l))}function He(h,T,S){h.i.set(T,S)}function Tr(h){return He(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Yi(h,T){return h?T?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Qi(h,T,S){return typeof h=="string"?(h=encodeURI(h).replace(T,ua),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ua(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ca=/[#\/\?@]/g,da=/[#\?:]/g,Xi=/[#\?]/g,fd=/[#\?@]/g,fa=/#/g;function Ve(h,T){this.h=this.g=null,this.i=h||null,this.j=!!T}function Xn(h){h.g||(h.g=new Map,h.h=0,h.i&&ln(h.i,function(T,S){h.add(decodeURIComponent(T.replace(/\+/g," ")),S)}))}n=Ve.prototype,n.add=function(h,T){Xn(this),this.i=null,h=Zn(this,h);let S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(T),this.h+=1,this};function ha(h,T){Xn(h),T=Zn(h,T),h.g.has(T)&&(h.i=null,h.h-=h.g.get(T).length,h.g.delete(T))}function qo(h,T){return Xn(h),T=Zn(h,T),h.g.has(T)}n.forEach=function(h,T){Xn(this),this.g.forEach(function(S,A){S.forEach(function(q){h.call(T,q,A,this)},this)},this)};function pa(h,T){Xn(h);let S=[];if(typeof T=="string")qo(h,T)&&(S=S.concat(h.g.get(Zn(h,T))));else for(h=Array.from(h.g.values()),T=0;T<h.length;T++)S=S.concat(h[T]);return S}n.set=function(h,T){return Xn(this),this.i=null,h=Zn(this,h),qo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[T]),this.h+=1,this},n.get=function(h,T){return h?(h=pa(this,h),h.length>0?String(h[0]):T):T};function ma(h,T,S){ha(h,T),S.length>0&&(h.i=null,h.g.set(Zn(h,T),C(S)),h.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],T=Array.from(this.g.keys());for(let A=0;A<T.length;A++){var S=T[A];const q=Kn(S);S=pa(this,S);for(let W=0;W<S.length;W++){let se=q;S[W]!==""&&(se+="="+Kn(S[W])),h.push(se)}}return this.i=h.join("&")};function ga(h){const T=new Ve;return T.i=h.i,h.g&&(T.g=new Map(h.g),T.h=h.h),T}function Zn(h,T){return T=String(T),h.j&&(T=T.toLowerCase()),T}function zo(h,T){T&&!h.j&&(Xn(h),h.i=null,h.g.forEach(function(S,A){const q=A.toLowerCase();A!=q&&(ha(this,A),ma(this,q,S))},h)),h.j=T}function jn(h,T){const S=new ri;if(l.Image){const A=new Image;A.onload=y(Nt,S,"TestLoadImage: loaded",!0,T,A),A.onerror=y(Nt,S,"TestLoadImage: error",!1,T,A),A.onabort=y(Nt,S,"TestLoadImage: abort",!1,T,A),A.ontimeout=y(Nt,S,"TestLoadImage: timeout",!1,T,A),l.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else T(!1)}function er(h,T){const S=new ri,A=new AbortController,q=setTimeout(()=>{A.abort(),Nt(S,"TestPingServer: timeout",!1,T)},1e4);fetch(h,{signal:A.signal}).then(W=>{clearTimeout(q),W.ok?Nt(S,"TestPingServer: ok",!0,T):Nt(S,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(q),Nt(S,"TestPingServer: error",!1,T)})}function Nt(h,T,S,A,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),A(S)}catch{}}function Zi(){this.g=new Hi}function Ir(h){this.i=h.Sb||null,this.h=h.ab||!1}_(Ir,jr),Ir.prototype.g=function(){return new un(this.i,this.h)};function un(h,T){pt.call(this),this.H=h,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(un,pt),n=un.prototype,n.open=function(h,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=T,this.readyState=1,kn(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(T.body=h),(this.H||l).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ai(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,kn(this)),this.g&&(this.readyState=3,kn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zl(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function zl(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var T=h.value?h.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!h.done}))&&(this.response=this.responseText+=T)}h.done?ai(this):kn(this),this.readyState==3&&zl(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,ai(this))},n.Na=function(h){this.g&&(this.response=h,ai(this))},n.ga=function(){this.g&&ai(this)};function ai(h){h.readyState=4,h.l=null,h.j=null,h.B=null,kn(h)}n.setRequestHeader=function(h,T){this.A.append(h,T)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],T=this.h.entries();for(var S=T.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=T.next();return h.join(`\r
`)};function kn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(un.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function $l(h){let T="";return he(h,function(S,A){T+=A,T+=":",T+=S,T+=`\r
`}),T}function $o(h,T,S){e:{for(A in S){var A=!1;break e}A=!0}A||(S=$l(S),typeof h=="string"?S!=null&&Kn(S):He(h,T,S))}function Ye(h){pt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(Ye,pt);var Wl=/^https?$/i,hd=["POST","PUT"];n=Ye.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,T,S,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);T=T?T.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ul.g(),this.g.onreadystatechange=I(p(this.Ca,this));try{this.B=!0,this.g.open(T,String(h),!0),this.B=!1}catch(W){li(this,W);return}if(h=S||"",S=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var q in A)S.set(q,A[q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const W of A.keys())S.set(W,A.get(W));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(S.keys()).find(W=>W.toLowerCase()=="content-type"),q=l.FormData&&h instanceof l.FormData,!(Array.prototype.indexOf.call(hd,T,void 0)>=0)||A||q||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,se]of S)this.g.setRequestHeader(W,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(W){li(this,W)}};function li(h,T){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=T,h.o=5,ui(h),wr(h)}function ui(h){h.A||(h.A=!0,dt(h,"complete"),dt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,dt(this,"complete"),dt(this,"abort"),wr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wr(this,!0)),Ye.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Sr(this):this.Xa())},n.Xa=function(){Sr(this)};function Sr(h){if(h.h&&typeof a<"u"){if(h.v&&tr(h)==4)setTimeout(h.Ca.bind(h),0);else if(dt(h,"readystatechange"),tr(h)==4){h.h=!1;try{const W=h.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var S;if(!(S=T)){var A;if(A=W===0){let se=String(h.D).match(ql)[1]||null;!se&&l.self&&l.self.location&&(se=l.self.location.protocol.slice(0,-1)),A=!Wl.test(se?se.toLowerCase():"")}S=A}if(S)dt(h,"complete"),dt(h,"success");else{h.o=6;try{var q=tr(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",ui(h)}}finally{wr(h)}}}}function wr(h,T){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const S=h.g;h.g=null,T||dt(h,"ready");try{S.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function tr(h){return h.g?h.g.readyState:0}n.ca=function(){try{return tr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var T=this.g.responseText;return h&&T.indexOf(h)==0&&(T=T.substring(h.length)),Ml(T)}};function Jl(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ya(h){const T={};h=(h.g&&tr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(k(h[A]))continue;var S=Oo(h[A]);const q=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const W=T[q]||[];T[q]=W,W.push(S)}ce(T,function(A){return A.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function nr(h,T,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||T}function Wo(h){this.za=0,this.i=[],this.j=new ri,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=nr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=nr("baseRetryDelayMs",5e3,h),this.Za=nr("retryDelaySeedMs",1e4,h),this.Ta=nr("forwardChannelMaxRetries",2,h),this.va=nr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Bo(h&&h.concurrentRequestLimit),this.Ba=new Zi,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Wo.prototype,n.ka=8,n.I=1,n.connect=function(h,T,S,A){lt(0),this.W=h,this.H=T||{},S&&A!==void 0&&(this.H.OSID=S,this.H.OAID=A),this.F=this.X,this.J=_a(this,null,this.W),Cr(this)};function Jo(h){if(Ko(h),h.I==3){var T=h.V++,S=vn(h.J);if(He(S,"SID",h.M),He(S,"RID",T),He(S,"TYPE","terminate"),rr(h,S),T=new yn(h,h.j,T),T.M=2,T.A=Tr(vn(S)),S=!1,l.navigator&&l.navigator.sendBeacon)try{S=l.navigator.sendBeacon(T.A.toString(),"")}catch{}!S&&l.Image&&(new Image().src=T.A,S=!0),S||(T.g=Yl(T.j,null),T.g.ea(T.A)),T.F=Date.now(),zi(T)}to(h)}function cn(h){h.g&&(eo(h),h.g.cancel(),h.g=null)}function Ko(h){cn(h),h.v&&(l.clearTimeout(h.v),h.v=null),Yo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&l.clearTimeout(h.m),h.m=null)}function Cr(h){if(!aa(h.h)&&!h.m){h.m=!0;var T=h.Ea;le||R(),J||(le(),J=!0),M.add(T,h),h.D=0}}function Kl(h,T){return Wi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=T.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=ni(p(h.Ea,h,T),Xo(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new yn(this,this.j,h);let W=this.o;if(this.U&&(W?(W=G(W),Ae(W,this.U)):W=this.U),this.u!==null||this.R||(q.J=W,W=null),this.S)e:{for(var T=0,S=0;S<this.i.length;S++){t:{var A=this.i[S];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(T+=A,T>4096){T=S;break e}if(T===4096||S===this.i.length-1){T=S+1;break e}}T=1e3}else T=1e3;T=va(this,q,T),S=vn(this.J),He(S,"RID",h),He(S,"CVER",22),this.G&&He(S,"X-HTTP-Session-Id",this.G),rr(this,S),W&&(this.R?T="headers="+Kn($l(W))+"&"+T:this.u&&$o(S,this.u,W)),Ho(this.h,q),this.Ra&&He(S,"TYPE","init"),this.S?(He(S,"$req",T),He(S,"SID","null"),q.U=!0,Nn(q,S,null)):Nn(q,S,T),this.I=2}}else this.I==3&&(h?ji(this,h):this.i.length==0||aa(this.h)||ji(this))};function ji(h,T){var S;T?S=T.l:S=h.V++;const A=vn(h.J);He(A,"SID",h.M),He(A,"RID",S),He(A,"AID",h.K),rr(h,A),h.u&&h.o&&$o(A,h.u,h.o),S=new yn(h,h.j,S,h.D+1),h.u===null&&(S.J=h.o),T&&(h.i=T.G.concat(h.i)),T=va(h,S,1e3),S.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ho(h.h,S),Nn(S,A,T)}function rr(h,T){h.H&&he(h.H,function(S,A){He(T,A,S)}),h.l&&he({},function(S,A){He(T,A,S)})}function va(h,T,S){S=Math.min(h.i.length,S);const A=h.l?p(h.l.Ka,h.l,h):null;e:{var q=h.i;let Ce=-1;for(;;){const ft=["count="+S];Ce==-1?S>0?(Ce=q[0].g,ft.push("ofs="+Ce)):Ce=0:ft.push("ofs="+Ce);let Je=!0;for(let mt=0;mt<S;mt++){var W=q[mt].g;const fn=q[mt].map;if(W-=Ce,W<0)Ce=Math.max(0,q[mt].g-100),Je=!1;else try{W="req"+W+"_"||"";try{var se=fn instanceof Map?fn:Object.entries(fn);for(const[Ar,or]of se){let sr=or;d(or)&&(sr=Zr(or)),ft.push(W+Ar+"="+encodeURIComponent(sr))}}catch(Ar){throw ft.push(W+"type="+encodeURIComponent("_badmap")),Ar}}catch{A&&A(fn)}}if(Je){se=ft.join("&");break e}}se=void 0}return h=h.i.splice(0,S),T.G=h,se}function Ut(h){if(!h.g&&!h.v){h.Y=1;var T=h.Da;le||R(),J||(le(),J=!0),M.add(T,h),h.A=0}}function ir(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=ni(p(h.Da,h),Xo(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,ci(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=ni(p(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,lt(10),cn(this),ci(this))};function eo(h){h.B!=null&&(l.clearTimeout(h.B),h.B=null)}function ci(h){h.g=new yn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var T=vn(h.na);He(T,"RID","rpc"),He(T,"SID",h.M),He(T,"AID",h.K),He(T,"CI",h.F?"0":"1"),!h.F&&h.ia&&He(T,"TO",h.ia),He(T,"TYPE","xmlhttp"),rr(h,T),h.u&&h.o&&$o(T,h.u,h.o),h.O&&(h.g.H=h.O);var S=h.g;h=h.ba,S.M=1,S.A=Tr(vn(T)),S.u=null,S.R=!0,oa(S,h)}n.Va=function(){this.C!=null&&(this.C=null,cn(this),ir(this),lt(19))};function Yo(h){h.C!=null&&(l.clearTimeout(h.C),h.C=null)}function Qo(h,T){var S=null;if(h.g==T){Yo(h),eo(h),h.g=null;var A=2}else if(la(h.h,T))S=T.G,Ji(h.h,T),A=1;else return;if(h.I!=0){if(T.o)if(A==1){S=T.u?T.u.length:0,T=Date.now()-T.F;var q=h.D;A=ti(),dt(A,new ra(A,S)),Cr(h)}else Ut(h);else if(q=T.m,q==3||q==0&&T.X>0||!(A==1&&Kl(h,T)||A==2&&ir(h)))switch(S&&S.length>0&&(T=h.h,T.i=T.i.concat(S)),q){case 1:dn(h,5);break;case 4:dn(h,10);break;case 3:dn(h,6);break;default:dn(h,2)}}}function Xo(h,T){let S=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(S*=2),S*T}function dn(h,T){if(h.j.info("Error code "+T),T==2){var S=p(h.bb,h),A=h.Ua;const q=!A;A=new Yn(A||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ki(A,"https"),Tr(A),q?jn(A.toString(),S):er(A.toString(),S)}else lt(2);h.I=0,h.l&&h.l.pa(T),to(h),Ko(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function to(h){if(h.I=0,h.ja=[],h.l){const T=an(h.h);(T.length!=0||h.i.length!=0)&&(D(h.ja,T),D(h.ja,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.oa()}}function _a(h,T,S){var A=S instanceof Yn?vn(S):new Yn(S);if(A.g!="")T&&(A.g=T+"."+A.g),Qn(A,A.u);else{var q=l.location;A=q.protocol,T=T?T+"."+q.hostname:q.hostname,q=+q.port;const W=new Yn(null);A&&Ki(W,A),T&&(W.g=T),q&&Qn(W,q),S&&(W.h=S),A=W}return S=h.G,T=h.wa,S&&T&&He(A,S,T),He(A,"VER",h.ka),rr(h,A),A}function Yl(h,T,S){if(T&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=h.Aa&&!h.ma?new Ye(new Ir({ab:S})):new Ye(h.ma),T.Fa(h.L),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ql(){}n=Ql.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Zo(){}Zo.prototype.g=function(h,T){return new kt(h,T)};function kt(h,T){pt.call(this),this.g=new Wo(T),this.l=h,this.h=T&&T.messageUrlParams||null,h=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(h?h["X-WebChannel-Content-Type"]=T.messageContentType:h={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(h?h["X-WebChannel-Client-Profile"]=T.sa:h={"X-WebChannel-Client-Profile":T.sa}),this.g.U=h,(h=T&&T.Qb)&&!k(h)&&(this.g.u=h),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!k(T)&&(this.g.G=T,h=this.h,h!==null&&T in h&&(h=this.h,T in h&&delete h[T])),this.j=new di(this)}_(kt,pt),kt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},kt.prototype.close=function(){Jo(this.g)},kt.prototype.o=function(h){var T=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.v&&(S={},S.__data__=Zr(h),h=S);T.i.push(new dd(T.Ya++,h)),T.I==3&&Cr(T)},kt.prototype.N=function(){this.g.l=null,delete this.j,Jo(this.g),delete this.g,kt.Z.N.call(this)};function Xl(h){bo.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var T=h.__sm__;if(T){e:{for(const S in T){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,T=T!==null&&h in T?T[h]:void 0),this.data=T}else this.data=h}_(Xl,bo);function Zl(){na.call(this),this.status=1}_(Zl,na);function di(h){this.g=h}_(di,Ql),di.prototype.ra=function(){dt(this.g,"a")},di.prototype.qa=function(h){dt(this.g,new Xl(h))},di.prototype.pa=function(h){dt(this.g,new Zl)},di.prototype.oa=function(){dt(this.g,"b")},Zo.prototype.createWebChannel=Zo.prototype.g,kt.prototype.send=kt.prototype.o,kt.prototype.open=kt.prototype.m,kt.prototype.close=kt.prototype.close,M0=function(){return new Zo},x0=function(){return ti()},k0=Pn,Mh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ii.NO_ERROR=0,ii.TIMEOUT=8,ii.HTTP_ERROR=6,hc=ii,oi.COMPLETE="complete",N0=oi,Dl.EventType=ei,ei.OPEN="a",ei.CLOSE="b",ei.ERROR="c",ei.MESSAGE="d",pt.prototype.listen=pt.prototype.J,el=Dl,Ye.prototype.listenOnce=Ye.prototype.K,Ye.prototype.getLastError=Ye.prototype.Ha,Ye.prototype.getLastErrorCode=Ye.prototype.ya,Ye.prototype.getStatus=Ye.prototype.ca,Ye.prototype.getResponseJson=Ye.prototype.La,Ye.prototype.getResponseText=Ye.prototype.la,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Fa,P0=Ye}).apply(typeof ju<"u"?ju:typeof self<"u"?self:typeof window<"u"?window:{});class qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qt.UNAUTHENTICATED=new qt(null),qt.GOOGLE_CREDENTIALS=new qt("google-credentials-uid"),qt.FIRST_PARTY=new qt("first-party-uid"),qt.MOCK_USER=new qt("mock-user");let Ys="12.9.0";function CV(n){Ys=n}const Co=new op("@firebase/firestore");function Ts(){return Co.logLevel}function ge(n,...e){if(Co.logLevel<=Le.DEBUG){const t=e.map(_p);Co.debug(`Firestore (${Ys}): ${n}`,...t)}}function Ao(n,...e){if(Co.logLevel<=Le.ERROR){const t=e.map(_p);Co.error(`Firestore (${Ys}): ${n}`,...t)}}function dl(n,...e){if(Co.logLevel<=Le.WARN){const t=e.map(_p);Co.warn(`Firestore (${Ys}): ${n}`,...t)}}function _p(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ke(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,D0(n,r,t)}function D0(n,e,t){let r=`FIRESTORE (${Ys}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ao(r),new Error(r)}function ct(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||D0(e,i,r)}function Xe(n,e){return n}const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Yr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Eo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class L0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(qt.UNAUTHENTICATED)))}shutdown(){}}class RV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class PV{constructor(e){this.t=e,this.currentUser=qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ct(this.o===void 0,42304);let r=this.i;const i=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let a=new Eo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Eo,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const m=a;e.enqueueRetryable((async()=>{await m.promise,await i(this.currentUser)}))},d=m=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Eo)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string",31837,{l:r}),new L0(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string",2055,{h:e}),new qt(e)}}class NV{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=qt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class kV{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new NV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(qt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class E_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Fn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ct(this.o===void 0,3512);const r=a=>{a.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,ge("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new E_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ct(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new E_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function MV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Ep{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=MV(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function We(n,e){return n<e?-1:n>e?1:0}function Dh(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return th(i)===th(a)?We(i,a):th(i)?1:-1}return We(n.length,e.length)}const DV=55296,LV=57343;function th(n){const e=n.charCodeAt(0);return e>=DV&&e<=LV}function bs(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}const T_="__name__";class dr{constructor(e,t,r){t===void 0?t=0:t>e.length&&ke(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ke(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return dr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof dr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=dr.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return We(e.length,t.length)}static compareSegments(e,t){const r=dr.isNumericId(e),i=dr.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?dr.extractNumericId(e).compare(dr.extractNumericId(t)):Dh(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vp.fromString(e.substring(4,e.length-2))}}class at extends dr{construct(e,t,r){return new at(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new at(t)}static emptyPath(){return new at([])}}const VV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends dr{construct(e,t,r){return new Vt(e,t,r)}static isValidIdentifier(e){return VV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===T_}static keyField(){return new Vt([T_])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new ve(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new ve(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ve(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else d==="`"?(l=!l,i++):d!=="."||l?(r+=d,i++):(a(),i++)}if(a(),l)throw new ve(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(t)}static emptyPath(){return new Vt([])}}class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(at.fromString(e))}static fromName(e){return new Ne(at.fromString(e).popFirst(5))}static empty(){return new Ne(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return at.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new at(e.slice()))}}function V0(n,e,t){if(!t)throw new ve(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function bV(n,e,t,r){if(e===!0&&r===!0)throw new ve(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function I_(n){if(!Ne.isDocumentKey(n))throw new ve(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function S_(n){if(Ne.isDocumentKey(n))throw new ve(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function b0(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Tp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ke(12329,{type:typeof n})}function U0(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ve(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Tp(n);throw new ve(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function vt(n,e){const t={typeString:n};return e&&(t.value=e),t}function wl(n,e){if(!b0(n))throw new ve(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(i&&typeof l!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new ve(te.INVALID_ARGUMENT,t);return!0}const w_=-62135596800,C_=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*C_);return new it(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<w_)throw new ve(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/C_}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:it._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wl(e,it._jsonSchema))return new it(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-w_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:vt("string",it._jsonSchemaVersion),seconds:vt("number"),nanoseconds:vt("number")};class rt{static fromTimestamp(e){return new rt(e)}static min(){return new rt(new it(0,0))}static max(){return new rt(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const fl=-1;function UV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=rt.fromTimestamp(r===1e9?new it(t+1,0):new it(t,r));return new bi(i,Ne.empty(),e)}function FV(n){return new bi(n.readTime,n.key,fl)}class bi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new bi(rt.min(),Ne.empty(),fl)}static max(){return new bi(rt.max(),Ne.empty(),fl)}}function OV(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ne.comparator(n.documentKey,e.documentKey),t!==0?t:We(n.largestBatchId,e.largestBatchId))}const GV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ip(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==GV)throw n;ge("LocalStore","Unexpectedly lost primary lease")}class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):X.reject(t)}static resolve(e){return new X(((t,r)=>{t(e)}))}static reject(e){return new X(((t,r)=>{r(e)}))}static waitFor(e){return new X(((t,r)=>{let i=0,a=0,l=!1;e.forEach((d=>{++i,d.next((()=>{++a,l&&a===i&&t()}),(m=>r(m)))})),l=!0,a===i&&t()}))}static or(e){let t=X.resolve(!1);for(const r of e)t=t.next((i=>i?X.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new X(((r,i)=>{const a=e.length,l=new Array(a);let d=0;for(let m=0;m<a;m++){const p=m;t(e[p]).next((y=>{l[p]=y,++d,d===a&&r(l)}),(y=>i(y)))}}))}static doWhile(e,t){return new X(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}function HV(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Cl(n){return n.name==="IndexedDbTransactionError"}class Sp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Sp.ce=-1;const wp=-1;function Cp(n){return n==null}function Vc(n){return n===0&&1/n==-1/0}function qV(n){return typeof n=="number"&&Number.isInteger(n)&&!Vc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const F0="";function zV(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=A_(e)),e=$V(n.get(t),e);return A_(e)}function $V(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case F0:t+="";break;default:t+=a}}return t}function A_(n){return n+F0+""}function R_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Qs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function O0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class sn{constructor(e,t){this.comparator=e,this.root=t||Dt.EMPTY}insert(e,t){return new sn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dt.BLACK,null,null))}remove(e){return new sn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ec(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ec(this.root,e,this.comparator,!1)}getReverseIterator(){return new ec(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ec(this.root,e,this.comparator,!0)}}class ec{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dt{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Dt.RED,this.left=i??Dt.EMPTY,this.right=a??Dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Dt(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Dt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}Dt.EMPTY=null,Dt.RED=!0,Dt.BLACK=!1;Dt.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new Dt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bt{constructor(e){this.comparator=e,this.data=new sn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new P_(this.data.getIterator())}getIteratorFrom(e){return new P_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new bt(this.comparator);return t.data=e,t}}class P_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Hn{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new Hn([])}unionWith(e){let t=new bt(Vt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Hn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bs(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class WV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class mr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new WV("Invalid base64 string: "+a):a}})(e);return new mr(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a})(e);return new mr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mr.EMPTY_BYTE_STRING=new mr("");const JV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ro(n){if(ct(!!n,39018),typeof n=="string"){let e=0;const t=JV.exec(n);if(ct(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Lt(n.seconds),nanos:Lt(n.nanos)}}function Lt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Us(n){return typeof n=="string"?mr.fromBase64String(n):mr.fromUint8Array(n)}const G0="server_timestamp",B0="__type__",H0="__previous_value__",q0="__local_write_time__";function Ap(n){return(n?.mapValue?.fields||{})[B0]?.stringValue===G0}function Rp(n){const e=n.mapValue.fields[H0];return Ap(e)?Rp(e):e}function bc(n){const e=Ro(n.mapValue.fields[q0].timestampValue);return new it(e.seconds,e.nanos)}class KV{constructor(e,t,r,i,a,l,d,m,p,y,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=y,this.apiKey=_}}const Uc="(default)";class Fc{constructor(e,t){this.projectId=e,this.database=t||Uc}static empty(){return new Fc("","")}get isDefaultDatabase(){return this.database===Uc}isEqual(e){return e instanceof Fc&&e.projectId===this.projectId&&e.database===this.database}}function YV(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new ve(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fc(n.options.projectId,e)}const z0="__type__",QV="__max__",tc={mapValue:{}},$0="__vector__",Lh="value";function Po(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ap(n)?4:ZV(n)?9007199254740991:XV(n)?10:11:ke(28295,{value:n})}function gr(n,e){if(n===e)return!0;const t=Po(n);if(t!==Po(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return bc(n).isEqual(bc(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=Ro(i.timestampValue),d=Ro(a.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return Us(i.bytesValue).isEqual(Us(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return Lt(i.geoPointValue.latitude)===Lt(a.geoPointValue.latitude)&&Lt(i.geoPointValue.longitude)===Lt(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Lt(i.integerValue)===Lt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=Lt(i.doubleValue),d=Lt(a.doubleValue);return l===d?Vc(l)===Vc(d):isNaN(l)&&isNaN(d)}return!1})(n,e);case 9:return bs(n.arrayValue.values||[],e.arrayValue.values||[],gr);case 10:case 11:return(function(i,a){const l=i.mapValue.fields||{},d=a.mapValue.fields||{};if(R_(l)!==R_(d))return!1;for(const m in l)if(l.hasOwnProperty(m)&&(d[m]===void 0||!gr(l[m],d[m])))return!1;return!0})(n,e);default:return ke(52216,{left:n})}}function hl(n,e){return(n.values||[]).find((t=>gr(t,e)))!==void 0}function Fs(n,e){if(n===e)return 0;const t=Po(n),r=Po(e);if(t!==r)return We(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return We(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const d=Lt(a.integerValue||a.doubleValue),m=Lt(l.integerValue||l.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return N_(n.timestampValue,e.timestampValue);case 4:return N_(bc(n),bc(e));case 5:return Dh(n.stringValue,e.stringValue);case 6:return(function(a,l){const d=Us(a),m=Us(l);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const d=a.split("/"),m=l.split("/");for(let p=0;p<d.length&&p<m.length;p++){const y=We(d[p],m[p]);if(y!==0)return y}return We(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const d=We(Lt(a.latitude),Lt(l.latitude));return d!==0?d:We(Lt(a.longitude),Lt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return k_(n.arrayValue,e.arrayValue);case 10:return(function(a,l){const d=a.fields||{},m=l.fields||{},p=d[Lh]?.arrayValue,y=m[Lh]?.arrayValue,_=We(p?.values?.length||0,y?.values?.length||0);return _!==0?_:k_(p,y)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===tc.mapValue&&l===tc.mapValue)return 0;if(a===tc.mapValue)return 1;if(l===tc.mapValue)return-1;const d=a.fields||{},m=Object.keys(d),p=l.fields||{},y=Object.keys(p);m.sort(),y.sort();for(let _=0;_<m.length&&_<y.length;++_){const I=Dh(m[_],y[_]);if(I!==0)return I;const C=Fs(d[m[_]],p[y[_]]);if(C!==0)return C}return We(m.length,y.length)})(n.mapValue,e.mapValue);default:throw ke(23264,{he:t})}}function N_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return We(n,e);const t=Ro(n),r=Ro(e),i=We(t.seconds,r.seconds);return i!==0?i:We(t.nanos,r.nanos)}function k_(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=Fs(t[i],r[i]);if(a)return a}return We(t.length,r.length)}function Os(n){return Vh(n)}function Vh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Ro(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Us(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ne.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=Vh(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const l of r)a?a=!1:i+=",",i+=`${l}:${Vh(t.fields[l])}`;return i+"}"})(n.mapValue):ke(61005,{value:n})}function pc(n){switch(Po(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rp(n);return e?16+pc(e):16;case 5:return 2*n.stringValue.length;case 6:return Us(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+pc(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Qs(r.fields,((a,l)=>{i+=a.length+pc(l)})),i})(n.mapValue);default:throw ke(13486,{value:n})}}function bh(n){return!!n&&"integerValue"in n}function Pp(n){return!!n&&"arrayValue"in n}function mc(n){return!!n&&"mapValue"in n}function XV(n){return(n?.mapValue?.fields||{})[z0]?.stringValue===$0}function rl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Qs(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=rl(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rl(n.arrayValue.values[t]);return e}return{...n}}function ZV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===QV}class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!mc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rl(t)}setAll(e){let t=Vt.emptyPath(),r={},i=[];e.forEach(((l,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=d.popLast()}l?r[d.lastSegment()]=rl(l):i.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());mc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];mc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Qs(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new On(rl(this.value))}}function W0(n){const e=[];return Qs(n.fields,((t,r)=>{const i=new Vt([t]);if(mc(r)){const a=W0(r.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)})),new Hn(e)}class Un{constructor(e,t,r,i,a,l,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=d}static newInvalidDocument(e){return new Un(e,0,rt.min(),rt.min(),rt.min(),On.empty(),0)}static newFoundDocument(e,t,r,i){return new Un(e,1,t,rt.min(),r,i,0)}static newNoDocument(e,t){return new Un(e,2,t,rt.min(),rt.min(),On.empty(),0)}static newUnknownDocument(e,t){return new Un(e,3,t,rt.min(),rt.min(),On.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Oc{constructor(e,t){this.position=e,this.inclusive=t}}function x_(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(a.field.isKeyField()?r=Ne.comparator(Ne.fromName(l.referenceValue),t.key):r=Fs(l,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function M_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!gr(n.position[t],e.position[t]))return!1;return!0}class Gc{constructor(e,t="asc"){this.field=e,this.dir=t}}function jV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class J0{}class At extends J0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new tb(e,t,r):t==="array-contains"?new ib(e,r):t==="in"?new ob(e,r):t==="not-in"?new sb(e,r):t==="array-contains-any"?new ab(e,r):new At(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new nb(e,r):new rb(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Fs(t,this.value)):t!==null&&Po(this.value)===Po(t)&&this.matchesComparison(Fs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ui extends J0{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ui(e,t)}matches(e){return K0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function K0(n){return n.op==="and"}function Y0(n){return eb(n)&&K0(n)}function eb(n){for(const e of n.filters)if(e instanceof Ui)return!1;return!0}function Uh(n){if(n instanceof At)return n.field.canonicalString()+n.op.toString()+Os(n.value);if(Y0(n))return n.filters.map((e=>Uh(e))).join(",");{const e=n.filters.map((t=>Uh(t))).join(",");return`${n.op}(${e})`}}function Q0(n,e){return n instanceof At?(function(r,i){return i instanceof At&&r.op===i.op&&r.field.isEqual(i.field)&&gr(r.value,i.value)})(n,e):n instanceof Ui?(function(r,i){return i instanceof Ui&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,l,d)=>a&&Q0(l,i.filters[d])),!0):!1})(n,e):void ke(19439)}function X0(n){return n instanceof At?(function(t){return`${t.field.canonicalString()} ${t.op} ${Os(t.value)}`})(n):n instanceof Ui?(function(t){return t.op.toString()+" {"+t.getFilters().map(X0).join(" ,")+"}"})(n):"Filter"}class tb extends At{constructor(e,t,r){super(e,t,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const t=Ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class nb extends At{constructor(e,t){super(e,"in",t),this.keys=Z0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class rb extends At{constructor(e,t){super(e,"not-in",t),this.keys=Z0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Z0(n,e){return(e.arrayValue?.values||[]).map((t=>Ne.fromName(t.referenceValue)))}class ib extends At{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Pp(t)&&hl(t.arrayValue,this.value)}}class ob extends At{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&hl(this.value.arrayValue,t)}}class sb extends At{constructor(e,t){super(e,"not-in",t)}matches(e){if(hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!hl(this.value.arrayValue,t)}}class ab extends At{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Pp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>hl(this.value.arrayValue,r)))}}class lb{constructor(e,t=null,r=[],i=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=d,this.Te=null}}function D_(n,e=null,t=[],r=[],i=null,a=null,l=null){return new lb(n,e,t,r,i,a,l)}function Np(n){const e=Xe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Uh(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Cp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Os(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Os(r))).join(",")),e.Te=t}return e.Te}function kp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!jV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Q0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!M_(n.startAt,e.startAt)&&M_(n.endAt,e.endAt)}class nd{constructor(e,t=null,r=[],i=[],a=null,l="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function ub(n,e,t,r,i,a,l,d){return new nd(n,e,t,r,i,a,l,d)}function cb(n){return new nd(n)}function L_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function db(n){return Ne.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function fb(n){return n.collectionGroup!==null}function il(n){const e=Xe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let d=new bt(Vt.comparator);return l.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Gc(a,r))})),t.has(Vt.keyField().canonicalString())||e.Ie.push(new Gc(Vt.keyField(),r))}return e.Ie}function To(n){const e=Xe(n);return e.Ee||(e.Ee=hb(e,il(n))),e.Ee}function hb(n,e){if(n.limitType==="F")return D_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Gc(i.field,a)}));const t=n.endAt?new Oc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Oc(n.startAt.position,n.startAt.inclusive):null;return D_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Fh(n,e,t){return new nd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function j0(n,e){return kp(To(n),To(e))&&n.limitType===e.limitType}function eI(n){return`${Np(To(n))}|lt:${n.limitType}`}function Xa(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>X0(i))).join(", ")}]`),Cp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Os(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Os(i))).join(",")),`Target(${r})`})(To(n))}; limitType=${n.limitType})`}function xp(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ne.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of il(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(l,d,m){const p=x_(l,d,m);return l.inclusive?p<=0:p<0})(r.startAt,il(r),i)||r.endAt&&!(function(l,d,m){const p=x_(l,d,m);return l.inclusive?p>=0:p>0})(r.endAt,il(r),i))})(n,e)}function pb(n){return(e,t)=>{let r=!1;for(const i of il(n)){const a=mb(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function mb(n,e,t){const r=n.field.isKeyField()?Ne.comparator(e.key,t.key):(function(a,l,d){const m=l.data.field(a),p=d.data.field(a);return m!==null&&p!==null?Fs(m,p):ke(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ke(19790,{direction:n.dir})}}class ko{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Qs(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return O0(this.inner)}size(){return this.innerSize}}const gb=new sn(Ne.comparator);function Bc(){return gb}const tI=new sn(Ne.comparator);function nc(...n){let e=tI;for(const t of n)e=e.insert(t.key,t);return e}function nI(n){let e=tI;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function vo(){return ol()}function rI(){return ol()}function ol(){return new ko((n=>n.toString()),((n,e)=>n.isEqual(e)))}const yb=new sn(Ne.comparator),vb=new bt(Ne.comparator);function zt(...n){let e=vb;for(const t of n)e=e.add(t);return e}const _b=new bt(We);function Eb(){return _b}function Mp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vc(e)?"-0":e}}function iI(n){return{integerValue:""+n}}function Tb(n,e){return qV(e)?iI(e):Mp(n,e)}class rd{constructor(){this._=void 0}}function Ib(n,e,t){return n instanceof pl?(function(i,a){const l={fields:{[B0]:{stringValue:G0},[q0]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Ap(a)&&(a=Rp(a)),a&&(l.fields[H0]=a),{mapValue:l}})(t,e):n instanceof ml?sI(n,e):n instanceof gl?aI(n,e):(function(i,a){const l=oI(i,a),d=V_(l)+V_(i.Ae);return bh(l)&&bh(i.Ae)?iI(d):Mp(i.serializer,d)})(n,e)}function Sb(n,e,t){return n instanceof ml?sI(n,e):n instanceof gl?aI(n,e):t}function oI(n,e){return n instanceof Hc?(function(r){return bh(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class pl extends rd{}class ml extends rd{constructor(e){super(),this.elements=e}}function sI(n,e){const t=lI(e);for(const r of n.elements)t.some((i=>gr(i,r)))||t.push(r);return{arrayValue:{values:t}}}class gl extends rd{constructor(e){super(),this.elements=e}}function aI(n,e){let t=lI(e);for(const r of n.elements)t=t.filter((i=>!gr(i,r)));return{arrayValue:{values:t}}}class Hc extends rd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function V_(n){return Lt(n.integerValue||n.doubleValue)}function lI(n){return Pp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class wb{constructor(e,t){this.field=e,this.transform=t}}function Cb(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof ml&&i instanceof ml||r instanceof gl&&i instanceof gl?bs(r.elements,i.elements,gr):r instanceof Hc&&i instanceof Hc?gr(r.Ae,i.Ae):r instanceof pl&&i instanceof pl})(n.transform,e.transform)}class Ab{constructor(e,t){this.version=e,this.transformResults=t}}class Br{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Br}static exists(e){return new Br(void 0,e)}static updateTime(e){return new Br(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class id{}function uI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new dI(n.key,Br.none()):new Al(n.key,n.data,Br.none());{const t=n.data,r=On.empty();let i=new bt(Vt.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?r.delete(a):r.set(a,l),i=i.add(a)}return new xo(n.key,r,new Hn(i.toArray()),Br.none())}}function Rb(n,e,t){n instanceof Al?(function(i,a,l){const d=i.value.clone(),m=U_(i.fieldTransforms,a,l.transformResults);d.setAll(m),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):n instanceof xo?(function(i,a,l){if(!gc(i.precondition,a))return void a.convertToUnknownDocument(l.version);const d=U_(i.fieldTransforms,a,l.transformResults),m=a.data;m.setAll(cI(i)),m.setAll(d),a.convertToFoundDocument(l.version,m).setHasCommittedMutations()})(n,e,t):(function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function sl(n,e,t,r){return n instanceof Al?(function(a,l,d,m){if(!gc(a.precondition,l))return d;const p=a.value.clone(),y=F_(a.fieldTransforms,m,l);return p.setAll(y),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof xo?(function(a,l,d,m){if(!gc(a.precondition,l))return d;const p=F_(a.fieldTransforms,m,l),y=l.data;return y.setAll(cI(a)),y.setAll(p),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((_=>_.field)))})(n,e,t,r):(function(a,l,d){return gc(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d})(n,e,t)}function Pb(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=oI(r.transform,i||null);a!=null&&(t===null&&(t=On.empty()),t.set(r.field,a))}return t||null}function b_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&bs(r,i,((a,l)=>Cb(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Al extends id{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class xo extends id{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function cI(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function U_(n,e,t){const r=new Map;ct(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,d=e.data.field(a.field);r.set(a.field,Sb(l,d,t[i]))}return r}function F_(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,Ib(a,l,e))}return r}class dI extends id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Nb extends id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class kb{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Rb(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=sl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=sl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=rI();return this.mutations.forEach((i=>{const a=e.get(i.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=t.has(i.key)?null:d;const m=uI(l,d);m!==null&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(rt.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),zt())}isEqual(e){return this.batchId===e.batchId&&bs(this.mutations,e.mutations,((t,r)=>b_(t,r)))&&bs(this.baseMutations,e.baseMutations,((t,r)=>b_(t,r)))}}class Dp{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ct(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return yb})();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new Dp(e,t,r,i)}}class xb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}var yt,be;function Mb(n){switch(n){case te.OK:return ke(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return ke(15467,{code:n})}}function Db(n){if(n===void 0)return Ao("GRPC error has no .code"),te.UNKNOWN;switch(n){case yt.OK:return te.OK;case yt.CANCELLED:return te.CANCELLED;case yt.UNKNOWN:return te.UNKNOWN;case yt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case yt.INTERNAL:return te.INTERNAL;case yt.UNAVAILABLE:return te.UNAVAILABLE;case yt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case yt.NOT_FOUND:return te.NOT_FOUND;case yt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case yt.ABORTED:return te.ABORTED;case yt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case yt.DATA_LOSS:return te.DATA_LOSS;default:return ke(39323,{code:n})}}(be=yt||(yt={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";new vp([4294967295,4294967295],0);class Lb{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Oh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function bb(n,e){return Oh(n,e.toTimestamp())}function xs(n){return ct(!!n,49232),rt.fromTimestamp((function(t){const r=Ro(t);return new it(r.seconds,r.nanos)})(n))}function fI(n,e){return Gh(n,e).canonicalString()}function Gh(n,e){const t=(function(i){return new at(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Ub(n){const e=at.fromString(n);return ct($b(e),10190,{key:e.toString()}),e}function Bh(n,e){return fI(n.databaseId,e.path)}function Fb(n){const e=Ub(n);return e.length===4?at.emptyPath():Gb(e)}function Ob(n){return new at(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Gb(n){return ct(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function O_(n,e,t){return{name:Bh(n,e),fields:t.value.mapValue.fields}}function Bb(n,e){let t;if(e instanceof Al)t={update:O_(n,e.key,e.value)};else if(e instanceof dI)t={delete:Bh(n,e.key)};else if(e instanceof xo)t={update:O_(n,e.key,e.data),updateMask:zb(e.fieldMask)};else{if(!(e instanceof Nb))return ke(16599,{dt:e.type});t={verify:Bh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const d=l.transform;if(d instanceof pl)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ml)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof gl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Hc)return{fieldPath:l.field.canonicalString(),increment:d.Ae};throw ke(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:bb(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ke(27497)})(n,e.precondition)),t}function Hb(n,e){return n&&n.length>0?(ct(e!==void 0,14353),n.map((t=>(function(i,a){let l=i.updateTime?xs(i.updateTime):xs(a);return l.isEqual(rt.min())&&(l=xs(a)),new Ab(l,i.transformResults||[])})(t,e)))):[]}function qb(n){let e=Fb(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ct(r===1,65062);const y=t.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let a=[];t.where&&(a=(function(_){const I=hI(_);return I instanceof Ui&&Y0(I)?I.getFilters():[I]})(t.where));let l=[];t.orderBy&&(l=(function(_){return _.map((I=>(function(D){return new Gc(Is(D.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(I)))})(t.orderBy));let d=null;t.limit&&(d=(function(_){let I;return I=typeof _=="object"?_.value:_,Cp(I)?null:I})(t.limit));let m=null;t.startAt&&(m=(function(_){const I=!!_.before,C=_.values||[];return new Oc(C,I)})(t.startAt));let p=null;return t.endAt&&(p=(function(_){const I=!_.before,C=_.values||[];return new Oc(C,I)})(t.endAt)),ub(e,i,l,a,d,"F",m,p)}function hI(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Is(t.unaryFilter.field);return At.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Is(t.unaryFilter.field);return At.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Is(t.unaryFilter.field);return At.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Is(t.unaryFilter.field);return At.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}})(n):n.fieldFilter!==void 0?(function(t){return At.create(Is(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ui.create(t.compositeFilter.filters.map((r=>hI(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ke(1026)}})(t.compositeFilter.op))})(n):ke(30097,{filter:n})}function Is(n){return Vt.fromServerFormat(n.fieldPath)}function zb(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function $b(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function pI(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}class Wb{constructor(e){this.yt=e}}function Jb(n){const e=qb({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Fh(e,e.limit,"L"):e}class Kb{constructor(){this.Sn=new Yb}addToCollectionParentIndex(e,t){return this.Sn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(bi.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(bi.min())}updateCollectionGroup(e,t,r){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class Yb{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new bt(at.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new bt(at.comparator)).toArray()}}const G_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mI=41943040;class on{static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(mI,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);class Gs{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Gs(0)}static ar(){return new Gs(-1)}}const B_="LruGarbageCollector",Qb=1048576;function H_([n,e],[t,r]){const i=We(n,t);return i===0?We(e,r):i}class Xb{constructor(e){this.Pr=e,this.buffer=new bt(H_),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();H_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Zb{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ge(B_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Cl(t)?ge(B_,"Ignoring IndexedDB error during garbage collection: ",t):await Ip(t)}await this.Ar(3e5)}))}}class jb{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return X.resolve(Sp.ce);const r=new Xb(t);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(G_)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),G_):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,i,a,l,d,m,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),i=this.params.maximumSequenceNumbersToCollect):i=_,l=Date.now(),this.nthSequenceNumber(e,i)))).next((_=>(r=_,d=Date.now(),this.removeTargets(e,r,t)))).next((_=>(a=_,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((_=>(p=Date.now(),Ts()<=Le.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${i} in `+(d-l)+`ms
	Removed ${a} targets in `+(m-d)+`ms
	Removed ${_} documents in `+(p-m)+`ms
Total Duration: ${p-y}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:_}))))}}function eU(n,e){return new jb(n,e)}class tU{constructor(){this.changes=new ko((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?X.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class nU{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class rU{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&sl(r.mutation,i,Hn.empty(),it.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,zt()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=zt()){const i=vo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let l=nc();return a.forEach(((d,m)=>{l=l.insert(d,m.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=vo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,zt())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((l,d)=>{t.set(l,d)}))}))}computeViews(e,t,r,i){let a=Bc();const l=ol(),d=(function(){return ol()})();return t.forEach(((m,p)=>{const y=r.get(p.key);i.has(p.key)&&(y===void 0||y.mutation instanceof xo)?a=a.insert(p.key,p):y!==void 0?(l.set(p.key,y.mutation.getFieldMask()),sl(y.mutation,p,y.mutation.getFieldMask(),it.now())):l.set(p.key,Hn.empty())})),this.recalculateAndSaveOverlays(e,a).next((m=>(m.forEach(((p,y)=>l.set(p,y))),t.forEach(((p,y)=>d.set(p,new nU(y,l.get(p)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=ol();let i=new sn(((l,d)=>l-d)),a=zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const d of l)d.keys().forEach((m=>{const p=t.get(m);if(p===null)return;let y=r.get(m)||Hn.empty();y=d.applyToLocalView(p,y),r.set(m,y);const _=(i.get(d.batchId)||zt()).add(m);i=i.insert(d.batchId,_)}))})).next((()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),p=m.key,y=m.value,_=rI();y.forEach((I=>{if(!a.has(I)){const C=uI(t.get(I),r.get(I));C!==null&&_.set(I,C),a=a.add(I)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,_))}return X.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return db(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):X.resolve(vo());let d=fl,m=a;return l.next((p=>X.forEach(p,((y,_)=>(d<_.largestBatchId&&(d=_.largestBatchId),a.get(y)?X.resolve():this.remoteDocumentCache.getEntry(e,y).next((I=>{m=m.insert(y,I)}))))).next((()=>this.populateOverlays(e,p,a))).next((()=>this.computeViews(e,m,p,zt()))).next((y=>({batchId:d,changes:nI(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ne(t)).next((r=>{let i=nc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let l=nc();return this.indexManager.getCollectionParents(e,a).next((d=>X.forEach(d,(m=>{const p=(function(_,I){return new nd(I,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,m.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next((y=>{y.forEach(((_,I)=>{l=l.insert(_,I)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((l=>{a.forEach(((m,p)=>{const y=p.getKey();l.get(y)===null&&(l=l.insert(y,Un.newInvalidDocument(y)))}));let d=nc();return l.forEach(((m,p)=>{const y=a.get(m);y!==void 0&&sl(y.mutation,p,Hn.empty(),it.now()),xp(t,p)&&(d=d.insert(m,p))})),d}))}}class iU{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return X.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:xs(i.createTime)}})(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(i){return{name:i.name,query:Jb(i.bundledQuery),readTime:xs(i.readTime)}})(t)),X.resolve()}}class oU{constructor(){this.overlays=new sn(Ne.comparator),this.Lr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const r=vo();return X.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.bt(e,t,a)})),X.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(r)),X.resolve()}getOverlaysForCollection(e,t,r){const i=vo(),a=t.length+1,l=new Ne(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const m=d.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return X.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new sn(((p,y)=>p-y));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let y=a.get(p.largestBatchId);y===null&&(y=vo(),a=a.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const d=vo(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,y)=>d.set(p,y))),!(d.size()>=i)););return X.resolve(d)}bt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new xb(t,r));let a=this.Lr.get(t);a===void 0&&(a=zt(),this.Lr.set(t,a)),this.Lr.set(t,a.add(r.key))}}class sU{constructor(){this.sessionToken=mr.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}class Lp{constructor(){this.kr=new bt(Ct.Kr),this.qr=new bt(Ct.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new Ct(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Ct(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new Ne(new at([])),r=new Ct(t,e),i=new Ct(t,e+1),a=[];return this.qr.forEachInRange([r,i],(l=>{this.Wr(l),a.push(l.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ne(new at([])),r=new Ct(t,e),i=new Ct(t,e+1);let a=zt();return this.qr.forEachInRange([r,i],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new Ct(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ct{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ne.comparator(e.key,t.key)||We(e.Hr,t.Hr)}static Ur(e,t){return We(e.Hr,t.Hr)||Ne.comparator(e.key,t.key)}}class aU{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new bt(Ct.Kr)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new kb(a,t,r,i);this.mutationQueue.push(l);for(const d of i)this.Jr=this.Jr.add(new Ct(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return X.resolve(l)}lookupMutationBatch(e,t){return X.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Xr(r),a=i<0?0:i;return X.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?wp:this.Yn-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ct(t,0),i=new Ct(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,i],(l=>{const d=this.Zr(l.Hr);a.push(d)})),X.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bt(We);return t.forEach((i=>{const a=new Ct(i,0),l=new Ct(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,l],(d=>{r=r.add(d.Hr)}))})),X.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ne.isDocumentKey(a)||(a=a.child(""));const l=new Ct(new Ne(a),0);let d=new bt(We);return this.Jr.forEachWhile((m=>{const p=m.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(d=d.add(m.Hr)),!0)}),l),X.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){ct(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return X.forEach(t.mutations,(i=>{const a=new Ct(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new Ct(t,0),i=this.Jr.firstAfterOrEqual(r);return X.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class lU{constructor(e){this.ti=e,this.docs=(function(){return new sn(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return X.resolve(r?r.document.mutableCopy():Un.newInvalidDocument(t))}getEntries(e,t){let r=Bc();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Un.newInvalidDocument(i))})),X.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Bc();const l=t.path,d=new Ne(l.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:p,value:{document:y}}=m.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||OV(FV(y),r)<=0||(i.has(y.key)||xp(t,y))&&(a=a.insert(y.key,y.mutableCopy()))}return X.resolve(a)}getAllFromCollectionGroup(e,t,r,i){ke(9500)}ni(e,t){return X.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new uU(this)}getSize(e){return X.resolve(this.size)}}class uU extends tU{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),X.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class cU{constructor(e){this.persistence=e,this.ri=new ko((t=>Np(t)),kp),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.ii=0,this.si=new Lp,this.targetCount=0,this.oi=Gs._r()}forEachTarget(e,t){return this.ri.forEach(((r,i)=>t(i))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),X.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Gs(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.lr(t),X.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.ri.forEach(((l,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ri.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)})),X.waitFor(a).next((()=>i))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return X.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),X.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((l=>{a.push(i.markPotentiallyOrphaned(e,l))})),X.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return X.resolve(r)}containsKey(e,t){return X.resolve(this.si.containsKey(t))}}class gI{constructor(e,t){this._i={},this.overlays={},this.ai=new Sp(0),this.ui=!1,this.ui=!0,this.ci=new sU,this.referenceDelegate=e(this),this.li=new cU(this),this.indexManager=new Kb,this.remoteDocumentCache=(function(i){return new lU(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new Wb(t),this.Pi=new iU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oU,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new aU(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){ge("MemoryPersistence","Starting transaction:",e);const i=new dU(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((a=>this.referenceDelegate.Ii(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ei(e,t){return X.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class dU extends BV{constructor(e){super(),this.currentSequenceNumber=e}}class Vp{constructor(e){this.persistence=e,this.Ri=new Lp,this.Ai=null}static Vi(e){return new Vp(e)}get di(){if(this.Ai)return this.Ai;throw ke(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),X.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),X.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.di.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.di,(r=>{const i=Ne.fromPath(r);return this.mi(e,i).next((a=>{a||t.removeEntry(i,rt.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return X.or([()=>X.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class qc{constructor(e,t){this.persistence=e,this.fi=new ko((r=>zV(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=eU(this,t)}static Vi(e,t){return new qc(e,t)}Ti(){}Ii(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return X.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((a=>a?X.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ni(e,(l=>this.wr(e,l,t).next((d=>{d||(r++,a.removeEntry(l,rt.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),X.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),X.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=pc(e.data.value)),t}wr(e,t,r){return X.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.fi.get(t);return X.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class bp{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=i}static Es(e,t){let r=zt(),i=zt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new bp(e,t.fromCache,r,i)}}class fU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class hU{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return o1()?8:HV(Wt())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.gs(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ps(e,t,i,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new fU;return this.ys(e,t,l).next((d=>{if(a.result=d,this.As)return this.ws(e,t,l,d.size)}))})).next((()=>a.result))}ws(e,t,r,i){return r.documentReadCount<this.Vs?(Ts()<=Le.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Xa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),X.resolve()):(Ts()<=Le.DEBUG&&ge("QueryEngine","Query:",Xa(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Ts()<=Le.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Xa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,To(t))):X.resolve())}gs(e,t){if(L_(t))return X.resolve(null);let r=To(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Fh(t,null,"F"),r=To(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=zt(...a);return this.fs.getDocuments(e,l).next((d=>this.indexManager.getMinOffset(e,r).next((m=>{const p=this.bs(t,d);return this.Ss(t,p,l,m.readTime)?this.gs(e,Fh(t,null,"F")):this.Ds(e,p,t,m)}))))})))))}ps(e,t,r,i){return L_(t)||i.isEqual(rt.min())?X.resolve(null):this.fs.getDocuments(e,r).next((a=>{const l=this.bs(t,a);return this.Ss(t,l,r,i)?X.resolve(null):(Ts()<=Le.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xa(t)),this.Ds(e,l,t,UV(i,fl)).next((d=>d)))}))}bs(e,t){let r=new bt(pb(e));return t.forEach(((i,a)=>{xp(e,a)&&(r=r.add(a))})),r}Ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ys(e,t,r){return Ts()<=Le.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Xa(t)),this.fs.getDocumentsMatchingQuery(e,t,bi.min(),r)}Ds(e,t,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}const pU="LocalStore";class mU{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new sn(We),this.Fs=new ko((a=>Np(a)),kp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rU(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function gU(n,e,t,r){return new mU(n,e,t,r)}async function yI(n,e){const t=Xe(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],d=[];let m=zt();for(const p of i){l.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}for(const p of a){d.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(r,m).next((p=>({Ns:p,removedBatchIds:l,addedBatchIds:d})))}))}))}function yU(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,m,p,y){const _=p.batch,I=_.keys();let C=X.resolve();return I.forEach((D=>{C=C.next((()=>y.getEntry(m,D))).next((b=>{const N=p.docVersions.get(D);ct(N!==null,48541),b.version.compareTo(N)<0&&(_.applyToRemoteDocument(b,p),b.isValidDocument()&&(b.setReadTime(p.commitVersion),y.addEntry(b)))}))})),C.next((()=>d.mutationQueue.removeMutationBatch(m,_)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let m=zt();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(m=m.add(d.batch.mutations[p].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function vU(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function _U(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=wp),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}class q_{constructor(){this.activeTargetIds=Eb()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class EU{constructor(){this.vo=new q_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new q_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class TU{Mo(e){}shutdown(){}}const z_="ConnectivityMonitor";class $_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ge(z_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ge(z_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let rc=null;function Hh(){return rc===null?rc=(function(){return 268435456+Math.round(2147483648*Math.random())})():rc++,"0x"+rc.toString(16)}const nh="RestConnection",IU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class SU{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Uc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,a){const l=Hh(),d=this.Qo(e,t.toUriEncodedString());ge(nh,`Sending RPC '${e}' ${l}:`,d,r);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,i,a);const{host:p}=new URL(d),y=Ws(p);return this.zo(e,d,m,r,y).then((_=>(ge(nh,`Received RPC '${e}' ${l}: `,_),_)),(_=>{throw dl(nh,`RPC '${e}' ${l} failed with error: `,_,"url: ",d,"request:",r),_}))}jo(e,t,r,i,a,l){return this.Wo(e,t,r,i,a)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ys})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}Qo(e,t){const r=IU[e];let i=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}class wU{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Ht="WebChannelConnection",Za=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class Ms extends SU{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ms.c_){const e=x0();Za(e,k0.STAT_EVENT,(t=>{t.stat===Mh.PROXY?ge(Ht,"STAT_EVENT: detected buffering proxy"):t.stat===Mh.NOPROXY&&ge(Ht,"STAT_EVENT: detected no buffering proxy")})),Ms.c_=!0}}zo(e,t,r,i,a){const l=Hh();return new Promise(((d,m)=>{const p=new P0;p.setWithCredentials(!0),p.listenOnce(N0.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case hc.NO_ERROR:const _=p.getResponseJson();ge(Ht,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),d(_);break;case hc.TIMEOUT:ge(Ht,`RPC '${e}' ${l} timed out`),m(new ve(te.DEADLINE_EXCEEDED,"Request time out"));break;case hc.HTTP_ERROR:const I=p.getStatus();if(ge(Ht,`RPC '${e}' ${l} failed with status:`,I,"response text:",p.getResponseText()),I>0){let C=p.getResponseJson();Array.isArray(C)&&(C=C[0]);const D=C?.error;if(D&&D.status&&D.message){const b=(function(B){const K=B.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(K)>=0?K:te.UNKNOWN})(D.status);m(new ve(b,D.message))}else m(new ve(te.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new ve(te.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ge(Ht,`RPC '${e}' ${l} completed.`)}}));const y=JSON.stringify(i);ge(Ht,`RPC '${e}' ${l} sending request:`,i),p.send(t,"POST",y,r,15)}))}T_(e,t,r){const i=Hh(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const p=a.join("");ge(Ht,`Creating RPC '${e}' stream ${i}: ${p}`,d);const y=l.createWebChannel(p,d);this.I_(y);let _=!1,I=!1;const C=new wU({Ho:D=>{I?ge(Ht,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(_||(ge(Ht,`Opening RPC '${e}' stream ${i} transport.`),y.open(),_=!0),ge(Ht,`RPC '${e}' stream ${i} sending:`,D),y.send(D))},Jo:()=>y.close()});return Za(y,el.EventType.OPEN,(()=>{I||(ge(Ht,`RPC '${e}' stream ${i} transport opened.`),C.i_())})),Za(y,el.EventType.CLOSE,(()=>{I||(I=!0,ge(Ht,`RPC '${e}' stream ${i} transport closed`),C.o_(),this.E_(y))})),Za(y,el.EventType.ERROR,(D=>{I||(I=!0,dl(Ht,`RPC '${e}' stream ${i} transport errored. Name:`,D.name,"Message:",D.message),C.o_(new ve(te.UNAVAILABLE,"The operation could not be completed")))})),Za(y,el.EventType.MESSAGE,(D=>{if(!I){const b=D.data[0];ct(!!b,16349);const N=b,B=N?.error||N[0]?.error;if(B){ge(Ht,`RPC '${e}' stream ${i} received error:`,B);const K=B.status;let Y=(function(J){const M=yt[J];if(M!==void 0)return Db(M)})(K),Q=B.message;K==="NOT_FOUND"&&Q.includes("database")&&Q.includes("does not exist")&&Q.includes(this.databaseId.database)&&dl(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),Y===void 0&&(Y=te.INTERNAL,Q="Unknown error status: "+K+" with message "+B.message),I=!0,C.o_(new ve(Y,Q)),y.close()}else ge(Ht,`RPC '${e}' stream ${i} received:`,b),C.__(b)}})),Ms.u_(),setTimeout((()=>{C.s_()}),0),C}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return M0()}}function CU(n){return new Ms(n)}function rh(){return typeof document<"u"?document:null}function od(n){return new Lb(n,!0)}Ms.c_=!1;class vI{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=i,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const W_="PersistentStream";class AU{constructor(e,t,r,i,a,l,d,m){this.Ci=e,this.b_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vI(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Ao(t.toString()),Ao("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new ve(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(W_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ge(W_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class RU extends AU{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Hb(e.writeResults,e.commitTime),r=xs(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Ob(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Bb(this.serializer,r)))};this.K_(t)}}class PU{}class NU extends PU{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ve(te.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Wo(e,Gh(t,r),i,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ve(te.UNKNOWN,a.toString())}))}jo(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.jo(e,Gh(t,r),i,l,d,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ve(te.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function kU(n,e,t,r){return new NU(n,e,t,r)}class xU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ao(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Rl="RemoteStore";class MU{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((l=>{r.enqueueAndForget((async()=>{Nl(this)&&(ge(Rl,"Restarting streams for network reachability change."),await(async function(m){const p=Xe(m);p.Ea.add(4),await Pl(p),p.Va.set("Unknown"),p.Ea.delete(4),await sd(p)})(this))}))})),this.Va=new xU(r,i)}}async function sd(n){if(Nl(n))for(const e of n.Ra)await e(!0)}async function Pl(n){for(const e of n.Ra)await e(!1)}function Nl(n){return Xe(n).Ea.size===0}async function _I(n,e,t){if(!Cl(e))throw e;n.Ea.add(1),await Pl(n),n.Va.set("Offline"),t||(t=()=>vU(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ge(Rl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await sd(n)}))}function EI(n,e){return e().catch((t=>_I(n,t,e)))}async function ad(n){const e=Xe(n),t=Fi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wp;for(;DU(e);)try{const i=await _U(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,LU(e,i)}catch(i){await _I(e,i)}TI(e)&&II(e)}function DU(n){return Nl(n)&&n.Ta.length<10}function LU(n,e){n.Ta.push(e);const t=Fi(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function TI(n){return Nl(n)&&!Fi(n).x_()&&n.Ta.length>0}function II(n){Fi(n).start()}async function VU(n){Fi(n).ra()}async function bU(n){const e=Fi(n);for(const t of n.Ta)e.ea(t.mutations)}async function UU(n,e,t){const r=n.Ta.shift(),i=Dp.from(r,e,t);await EI(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await ad(n)}async function FU(n,e){e&&Fi(n).Y_&&await(async function(r,i){if((function(l){return Mb(l)&&l!==te.ABORTED})(i.code)){const a=r.Ta.shift();Fi(r).B_(),await EI(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await ad(r)}})(n,e),TI(n)&&II(n)}async function J_(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),ge(Rl,"RemoteStore received new credentials");const r=Nl(t);t.Ea.add(3),await Pl(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await sd(t)}async function OU(n,e){const t=Xe(n);e?(t.Ea.delete(2),await sd(t)):e||(t.Ea.add(2),await Pl(t),t.Va.set("Unknown"))}function Fi(n){return n.fa||(n.fa=(function(t,r,i){const a=Xe(t);return a.sa(),new RU(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:VU.bind(null,n),t_:FU.bind(null,n),ta:bU.bind(null,n),na:UU.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await ad(n)):(await n.fa.stop(),n.Ta.length>0&&(ge(Rl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class Up{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Eo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,d=new Up(e,t,l,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function SI(n,e){if(Ao("AsyncQueue",`${e}: ${n}`),Cl(n))return new ve(te.UNAVAILABLE,`${e}: ${n}`);throw n}class GU{constructor(){this.queries=K_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Xe(t),a=i.queries;i.queries=K_(),a.forEach(((l,d)=>{for(const m of d.ba)m.onError(r)}))})(this,new ve(te.ABORTED,"Firestore shutting down"))}}function K_(){return new ko((n=>eI(n)),j0)}function BU(n){n.Ca.forEach((e=>{e.next()}))}var Y_,Q_;(Q_=Y_||(Y_={})).Ma="default",Q_.Cache="cache";const HU="SyncEngine";class qU{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new ko((d=>eI(d)),j0),this.Iu=new Map,this.Eu=new Set,this.Ru=new sn(Ne.comparator),this.Au=new Map,this.Vu=new Lp,this.du={},this.mu=new Map,this.fu=Gs.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function zU(n,e,t){const r=KU(n);try{const i=await(function(l,d){const m=Xe(l),p=it.now(),y=d.reduce(((C,D)=>C.add(D.key)),zt());let _,I;return m.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let D=Bc(),b=zt();return m.xs.getEntries(C,y).next((N=>{D=N,D.forEach(((B,K)=>{K.isValidDocument()||(b=b.add(B))}))})).next((()=>m.localDocuments.getOverlayedDocuments(C,D))).next((N=>{_=N;const B=[];for(const K of d){const Y=Pb(K,_.get(K.key).overlayedDocument);Y!=null&&B.push(new xo(K.key,Y,W0(Y.value.mapValue),Br.exists(!0)))}return m.mutationQueue.addMutationBatch(C,p,B,d)})).next((N=>{I=N;const B=N.applyToLocalDocumentSet(_,b);return m.documentOverlayCache.saveOverlays(C,N.batchId,B)}))})).then((()=>({batchId:I.batchId,changes:nI(_)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(l,d,m){let p=l.du[l.currentUser.toKey()];p||(p=new sn(We)),p=p.insert(d,m),l.du[l.currentUser.toKey()]=p})(r,i.batchId,t),await ld(r,i.changes),await ad(r.remoteStore)}catch(i){const a=SI(i,"Failed to persist write");t.reject(a)}}function X_(n,e,t){const r=Xe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,l)=>{const d=l.view.va(e);d.snapshot&&i.push(d.snapshot)})),(function(l,d){const m=Xe(l);m.onlineState=d;let p=!1;m.queries.forEach(((y,_)=>{for(const I of _.ba)I.va(d)&&(p=!0)})),p&&BU(m)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $U(n,e){const t=Xe(n),r=e.batch.batchId;try{const i=await yU(t.localStore,e);CI(t,r,null),wI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ld(t,i)}catch(i){await Ip(i)}}async function WU(n,e,t){const r=Xe(n);try{const i=await(function(l,d){const m=Xe(l);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return m.mutationQueue.lookupMutationBatch(p,d).next((_=>(ct(_!==null,37113),y=_.keys(),m.mutationQueue.removeMutationBatch(p,_)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,y,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>m.localDocuments.getDocuments(p,y)))}))})(r.localStore,e);CI(r,e,t),wI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ld(r,i)}catch(i){await Ip(i)}}function wI(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function CI(n,e,t){const r=Xe(n);let i=r.du[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}async function ld(n,e,t){const r=Xe(n),i=[],a=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,m)=>{l.push(r.pu(m,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const y=p?!p.fromCache:t?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,y?"current":"not-current")}if(p){i.push(p);const y=bp.Es(m.targetId,p);a.push(y)}})))})),await Promise.all(l),r.Pu.J_(i),await(async function(m,p){const y=Xe(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>X.forEach(p,(I=>X.forEach(I.Ts,(C=>y.persistence.referenceDelegate.addReference(_,I.targetId,C))).next((()=>X.forEach(I.Is,(C=>y.persistence.referenceDelegate.removeReference(_,I.targetId,C)))))))))}catch(_){if(!Cl(_))throw _;ge(pU,"Failed to update sequence numbers: "+_)}for(const _ of p){const I=_.targetId;if(!_.fromCache){const C=y.vs.get(I),D=C.snapshotVersion,b=C.withLastLimboFreeSnapshotVersion(D);y.vs=y.vs.insert(I,b)}}})(r.localStore,a))}async function JU(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){ge(HU,"User change. New user:",e.toKey());const r=await yI(t.localStore,e);t.currentUser=e,(function(a,l){a.mu.forEach((d=>{d.forEach((m=>{m.reject(new ve(te.CANCELLED,l))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ld(t,r.Ns)}}function KU(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$U.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WU.bind(null,e),e}class zc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=od(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return gU(this.persistence,new hU,e.initialUser,this.serializer)}Cu(e){return new gI(Vp.Vi,this.serializer)}Du(e){return new EU}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zc.provider={build:()=>new zc};class YU extends zc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ct(this.persistence.referenceDelegate instanceof qc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Zb(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new gI((r=>qc.Vi(r,t)),this.serializer)}}class qh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>X_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=JU.bind(null,this.syncEngine),await OU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new GU})()}createDatastore(e){const t=od(e.databaseInfo.databaseId),r=CU(e.databaseInfo);return kU(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,l,d){return new MU(r,i,a,l,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>X_(this.syncEngine,t,0)),(function(){return $_.v()?new $_:new TU})())}createSyncEngine(e,t){return(function(i,a,l,d,m,p,y){const _=new qU(i,a,l,d,m,p);return y&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Xe(t);ge(Rl,"RemoteStore shutting down."),r.Ea.add(5),await Pl(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}qh.provider={build:()=>new qh};const Oi="FirestoreClient";class QU{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=i,this.user=qt.UNAUTHENTICATED,this.clientId=Ep.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{ge(Oi,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(ge(Oi,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Eo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=SI(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function ih(n,e){n.asyncQueue.verifyOperationInProgress(),ge(Oi,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await yI(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Z_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await XU(n);ge(Oi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>J_(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>J_(e.remoteStore,i))),n._onlineComponents=e}async function XU(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge(Oi,"Using user provided OfflineComponentProvider");try{await ih(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===te.FAILED_PRECONDITION||i.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;dl("Error using user provided cache. Falling back to memory cache: "+t),await ih(n,new zc)}}else ge(Oi,"Using default OfflineComponentProvider"),await ih(n,new YU(void 0));return n._offlineComponents}async function ZU(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge(Oi,"Using user provided OnlineComponentProvider"),await Z_(n,n._uninitializedComponentsProvider._online)):(ge(Oi,"Using default OnlineComponentProvider"),await Z_(n,new qh))),n._onlineComponents}function jU(n){return ZU(n).then((e=>e.syncEngine))}function eF(n,e){const t=new Eo;return n.asyncQueue.enqueueAndForget((async()=>zU(await jU(n),e,t))),t.promise}function AI(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const tF="ComponentProvider",j_=new Map;function nF(n,e,t,r,i){return new KV(n,e,t,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,AI(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}const RI="firestore.googleapis.com",eE=!0;class tE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RI,this.ssl=eE}else this.host=e.host,this.ssl=e.ssl??eE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Qb)throw new ve(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AI(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ve(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ve(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ve(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ud{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new AV;switch(r.type){case"firstParty":return new kV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=j_.get(t);r&&(ge(tF,"Removing Datastore"),j_.delete(t),r.terminate())})(this),Promise.resolve()}}function rF(n,e,t,r={}){n=U0(n,ud);const i=Ws(e),a=n._getSettings(),l={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;i&&(zT(`https://${d}`),$T("Firestore",!0)),a.host!==RI&&a.host!==d&&dl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...a,host:d,ssl:i,emulatorOptions:r};if(!Io(m,l)&&(n._setSettings(m),r.mockUserToken)){let p,y;if(typeof r.mockUserToken=="string")p=r.mockUserToken,y=qt.MOCK_USER;else{p=QM(r.mockUserToken,n._app?.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new ve(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new qt(_)}n._authCredentials=new RV(new L0(p,y))}}class Fp{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fp(this.firestore,e,this._query)}}class $t{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(wl(t,$t._jsonSchema))return new $t(e,r||null,new Ne(at.fromString(t.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:vt("string",$t._jsonSchemaVersion),referencePath:vt("string")};class Vi extends Fp{constructor(e,t,r){super(e,t,cb(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new Ne(e))}withConverter(e){return new Vi(this.firestore,e,this._path)}}function iF(n,e,...t){if(n=An(n),V0("collection","path",e),n instanceof ud){const r=at.fromString(e,...t);return S_(r),new Vi(n,null,r)}{if(!(n instanceof $t||n instanceof Vi))throw new ve(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(at.fromString(e,...t));return S_(r),new Vi(n.firestore,null,r)}}function oF(n,e,...t){if(n=An(n),arguments.length===1&&(e=Ep.newId()),V0("doc","path",e),n instanceof ud){const r=at.fromString(e,...t);return I_(r),new $t(n,null,new Ne(r))}{if(!(n instanceof $t||n instanceof Vi))throw new ve(te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(at.fromString(e,...t));return I_(r),new $t(n.firestore,n instanceof Vi?n.converter:null,new Ne(r))}}const nE="AsyncQueue";class rE{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vI(this,"async_queue_retry"),this._c=()=>{const r=rh();r&&ge(nE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=rh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=rh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Eo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Cl(e))throw e;ge(nE,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ao("INTERNAL UNHANDLED ERROR: ",iE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Up.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&ke(47125,{Pc:iE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function iE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class PI extends ud{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new rE,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rE(e),this._firestoreClient=void 0,await e}}}function sF(n,e){const t=typeof n=="object"?n:YT(),r=typeof n=="string"?n:Uc,i=ap(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=KM("firestore");a&&rF(i,...a)}return i}function aF(n){if(n._terminated)throw new ve(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||lF(n),n._firestoreClient}function lF(n){const e=n._freezeSettings(),t=nF(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new QU(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(n._componentsProvider))}class Gn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gn(mr.fromBase64String(e))}catch(t){throw new ve(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gn(mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wl(e,Gn._jsonSchema))return Gn.fromBase64String(e.bytes)}}Gn._jsonSchemaVersion="firestore/bytes/1.0",Gn._jsonSchema={type:vt("string",Gn._jsonSchemaVersion),bytes:vt("string")};class NI{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Op{constructor(e){this._methodName=e}}class Hr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hr._jsonSchemaVersion}}static fromJSON(e){if(wl(e,Hr._jsonSchema))return new Hr(e.latitude,e.longitude)}}Hr._jsonSchemaVersion="firestore/geoPoint/1.0",Hr._jsonSchema={type:vt("string",Hr._jsonSchemaVersion),latitude:vt("number"),longitude:vt("number")};class hr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:hr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wl(e,hr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new hr(e.vectorValues);throw new ve(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hr._jsonSchemaVersion="firestore/vectorValue/1.0",hr._jsonSchema={type:vt("string",hr._jsonSchemaVersion),vectorValues:vt("object")};const uF=/^__.*__$/;class cF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new xo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Al(e,this.data,t,this.fieldTransforms)}}function kI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{dataSource:n})}}class Gp{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Gp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return $c(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(kI(this.dataSource)&&uF.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class dF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||od(e)}createContext(e,t,r,i=!1){return new Gp({dataSource:e,methodName:t,targetDoc:r,path:Vt.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fF(n){const e=n._freezeSettings(),t=od(n._databaseId);return new dF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hF(n,e,t,r,i,a={}){const l=n.createContext(a.merge||a.mergeFields?2:0,e,t,i);LI("Data must be an object, but it was:",l,r);const d=MI(r,l);let m,p;if(a.merge)m=new Hn(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const y=[];for(const _ of a.mergeFields){const I=Hp(e,_,t);if(!l.contains(I))throw new ve(te.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);gF(y,I)||y.push(I)}m=new Hn(y),p=l.fieldTransforms.filter((_=>m.covers(_.field)))}else m=null,p=l.fieldTransforms;return new cF(new On(d),m,p)}class Bp extends Op{_toFieldTransform(e){return new wb(e.path,new pl)}isEqual(e){return e instanceof Bp}}function xI(n,e){if(DI(n=An(n)))return LI("Unsupported field value:",e,n),MI(n,e);if(n instanceof Op)return(function(r,i){if(!kI(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const a=[];let l=0;for(const d of r){let m=xI(d,i.childContextForArray(l));m==null&&(m={nullValue:"NULL_VALUE"}),a.push(m),l++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=An(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Tb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=it.fromDate(r);return{timestampValue:Oh(i.serializer,a)}}if(r instanceof it){const a=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Oh(i.serializer,a)}}if(r instanceof Hr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gn)return{bytesValue:Vb(i.serializer,r._byteString)};if(r instanceof $t){const a=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw i.createError(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:fI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof hr)return(function(l,d){const m=l instanceof hr?l.toArray():l;return{mapValue:{fields:{[z0]:{stringValue:$0},[Lh]:{arrayValue:{values:m.map((y=>{if(typeof y!="number")throw d.createError("VectorValues must only contain numeric values.");return Mp(d.serializer,y)}))}}}}}})(r,i);if(pI(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${Tp(r)}`)})(n,e)}function MI(n,e){const t={};return O0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qs(n,((r,i)=>{const a=xI(i,e.childContextForField(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function DI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof it||n instanceof Hr||n instanceof Gn||n instanceof $t||n instanceof Op||n instanceof hr||pI(n))}function LI(n,e,t){if(!DI(t)||!b0(t)){const r=Tp(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function Hp(n,e,t){if((e=An(e))instanceof NI)return e._internalPath;if(typeof e=="string")return mF(n,e);throw $c("Field path arguments must be of type string or ",n,!1,void 0,t)}const pF=new RegExp("[~\\*/\\[\\]]");function mF(n,e,t){if(e.search(pF)>=0)throw $c(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new NI(...e.split("."))._internalPath}catch{throw $c(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $c(n,e,t,r,i){const a=r&&!r.isEmpty(),l=i!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(a||l)&&(m+=" (found",a&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new ve(te.INVALID_ARGUMENT,d+n+m)}function gF(n,e){return n.some((t=>t.isEqual(e)))}function yF(){return new Bp("serverTimestamp")}const oE="@firebase/firestore",sE="4.11.0";class VI{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Hp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class vF extends VI{data(){return super.data()}}function _F(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class ic{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ds extends VI{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Hp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ds._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ds._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ds._jsonSchema={type:vt("string",Ds._jsonSchemaVersion),bundleSource:vt("string","DocumentSnapshot"),bundleName:vt("string"),bundle:vt("string")};class yc extends Ds{data(e={}){return super.data(e)}}class al{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ic(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new yc(this._firestore,this._userDataWriter,r.key,r,new ic(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((d=>{const m=new yc(i._firestore,i._userDataWriter,d.doc.key,d.doc,new ic(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const m=new yc(i._firestore,i._userDataWriter,d.doc.key,d.doc,new ic(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,y=-1;return d.type!==0&&(p=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),y=l.indexOf(d.doc.key)),{type:EF(d.type),doc:m,oldIndex:p,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=al._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ep.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function EF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:n})}}al._jsonSchemaVersion="firestore/querySnapshot/1.0",al._jsonSchema={type:vt("string",al._jsonSchemaVersion),bundleSource:vt("string","QuerySnapshot"),bundleName:vt("string"),bundle:vt("string")};function TF(n,e){const t=U0(n.firestore,PI),r=oF(n),i=_F(n.converter,e),a=fF(n.firestore);return IF(t,[hF(a,"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Br.exists(!1))]).then((()=>r))}function IF(n,e){const t=aF(n);return eF(t,e)}(function(e,t=!0){CV(Js),Ls(new So("firestore",((r,{instanceIdentifier:i,options:a})=>{const l=r.getProvider("app").getImmediate(),d=new PI(new PV(r.getProvider("auth-internal")),new xV(l,r.getProvider("app-check-internal")),YV(l,i),l);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Li(oE,sE,e),Li(oE,sE,"esm2020")})();const SF={apiKey:"mock-key",authDomain:"jobfit-analyzer.firebaseapp.com",projectId:"jobfit-analyzer",storageBucket:"jobfit-analyzer.appspot.com",messagingSenderId:"000000000",appId:"1:000000000:web:mock123"},bI=KT(SF),UI=SV(bI),wF=sF(bI),CF=new Ur,AF=async()=>{try{return(await ML(UI,CF)).user}catch(n){return console.error("Firebase Login Error:",n),null}},RF=async(n,e,t,r)=>{try{return(await TF(iF(wF,"users",n,"scans"),{timestamp:yF(),targetNiche:r,profileSnapshot:{fullName:e.fullName,currentRole:e.currentRole,url:e.url},score:t.score,coreScore:t.coreScore,adjScore:t.adjScore,analysis:t.analysis,skillBreakdown:t.skillBreakdown||[]})).id}catch(i){throw console.error("Error saving to Firestore:",i),i}};var PF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const NF=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),cd=(n,e)=>{const t=oe.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:d="",children:m,...p},y)=>oe.createElement("svg",{ref:y,...PF,width:i,height:i,stroke:r,strokeWidth:l?Number(a)*24/Number(i):a,className:["lucide",`lucide-${NF(n)}`,d].join(" "),...p},[...e.map(([_,I])=>oe.createElement(_,I)),...Array.isArray(m)?m:[m]]));return t.displayName=`${n}`,t};const kF=cd("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const aE=cd("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const xF=cd("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);const MF=cd("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),DF=()=>{const[n,e]=oe.useState(null),[t,r]=oe.useState(null),[i,a]=oe.useState(!0),[l,d]=oe.useState(null),[m,p]=oe.useState(!1),[y,_]=oe.useState(!1),[I,C]=oe.useState("AI_ML");oe.useEffect(()=>{const N=fL(UI,B=>{d(B)});return typeof chrome<"u"&&chrome.storage?chrome.storage.local.get(["linkedinProfile"],async B=>{if(B.linkedinProfile){e(B.linkedinProfile);try{const K=await OM({candidate:B.linkedinProfile,targetNiche:I});r(K)}catch(K){console.error(K)}}a(!1)}):a(!1),()=>N()},[I]);const D=async()=>{await AF()},b=async()=>{if(!(!l||!n||!t)){p(!0);try{await RF(l.uid,n,t,I),_(!0)}catch(N){console.error(N)}finally{p(!1)}}};return ae.jsxs("div",{className:"w-[450px] min-h-[500px] p-4 bg-background text-foreground font-sans flex flex-col",children:[ae.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-3",children:[ae.jsx("h1",{className:"text-xl font-bold tracking-tight",children:"JobFit Analyzer"}),l?ae.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[ae.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),l.email]}):ae.jsxs("button",{onClick:D,className:"text-xs flex items-center gap-1 bg-secondary hover:bg-secondary/80 text-secondary-foreground px-2 py-1 rounded",children:[ae.jsx(xF,{size:14})," Login"]})]}),!n&&!i&&ae.jsx(sh,{className:"flex-1 flex flex-col items-center justify-center p-6 text-center",children:ae.jsx("p",{className:"text-sm text-muted-foreground",children:"Navigate to a LinkedIn profile to analyze JobFit against 2026 niches."})}),i&&ae.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center space-y-4",children:[ae.jsx(aE,{className:"h-8 w-8 animate-spin text-primary"}),ae.jsx("p",{className:"text-sm text-muted-foreground animate-pulse",children:"Running Multi-Agent Evaluation (Gemini 3.1 Pro)..."})]}),n&&t&&!i&&ae.jsxs("div",{className:"flex flex-col gap-4 flex-1",children:[ae.jsxs(sh,{children:[ae.jsxs(gE,{className:"pb-3",children:[ae.jsx(yE,{className:"text-lg leading-tight",children:n.fullName}),ae.jsx("p",{className:"text-xs text-muted-foreground truncate",children:n.currentRole})]}),ae.jsxs(vE,{children:[ae.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ae.jsxs("span",{className:"text-sm font-semibold",children:["Overall $S_","{JF}","$ Match"]}),ae.jsxs(Dw,{variant:t.score>=80?"default":t.score>=60?"secondary":"destructive",children:[t.score.toFixed(1)," / 100"]})]}),ae.jsx(_E,{value:t.score,className:"h-2 mb-2"}),ae.jsxs("div",{className:"flex justify-between text-[10px] text-muted-foreground",children:[ae.jsxs("span",{children:["Core: ",t.coreScore]}),ae.jsxs("span",{children:["Adjacency: ",t.adjScore]})]})]})]}),ae.jsxs(hC,{defaultValue:"overview",className:"flex-1 flex flex-col",children:[ae.jsxs(zE,{className:"grid w-full grid-cols-3",children:[ae.jsx(oc,{value:"overview",children:"Overview"}),ae.jsx(oc,{value:"gap",children:"Gap Analysis"}),ae.jsx(oc,{value:"roadmap",children:"Roadmap"})]}),ae.jsxs("div",{className:"mt-3 flex-1 bg-card rounded-md border p-3 text-sm h-[200px] overflow-y-auto",children:[ae.jsxs(sc,{value:"overview",className:"mt-0 outline-none",children:[ae.jsx("h4",{className:"font-semibold text-xs mb-2 uppercase text-muted-foreground tracking-wider",children:"Skill Breakdown"}),ae.jsx("div",{className:"space-y-2",children:t.skillBreakdown?.map((N,B)=>ae.jsxs("div",{className:"flex justify-between items-center bg-secondary/50 p-2 rounded",children:[ae.jsx("span",{className:"font-medium text-xs",children:N.skill}),ae.jsxs("span",{className:"text-xs",children:[N.score,"/100"]})]},B))})]}),ae.jsx(sc,{value:"gap",className:"mt-0 outline-none",children:ae.jsx("div",{className:"prose prose-sm dark:prose-invert",children:ae.jsx("p",{className:"whitespace-pre-wrap text-xs leading-relaxed",children:t.analysis.split("Action Plan:")[0].replace("Gap: ","")})})}),ae.jsx(sc,{value:"roadmap",className:"mt-0 outline-none",children:ae.jsx("ul",{className:"list-disc pl-4 space-y-2 text-xs",children:(t.analysis.split("Action Plan:")[1]||"").split(`
`).filter(N=>N.trim().length>3).map((N,B)=>ae.jsx("li",{className:"text-muted-foreground",children:N.replace(/^- /,"")},B))})})]})]}),ae.jsx("div",{className:"pt-2 flex gap-2",children:ae.jsxs("button",{className:"flex-1 bg-primary text-primary-foreground text-sm font-medium py-2 rounded-md hover:bg-primary/90 transition flex items-center justify-center gap-2 disabled:opacity-50",onClick:b,disabled:!l||m||y,children:[m?ae.jsx(aE,{size:16,className:"animate-spin"}):y?ae.jsx(kF,{size:16}):ae.jsx(MF,{size:16}),y?"Saved to Profile":l?"Save Scan History":"Login to Save"]})})]})]})};jS.createRoot(document.getElementById("root")).render(ae.jsx(br.StrictMode,{children:ae.jsx(DF,{})}));
